(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function LT(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Sy={exports:{}},Wl={},Iy={exports:{}},ee={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ro=Symbol.for("react.element"),OT=Symbol.for("react.portal"),jT=Symbol.for("react.fragment"),VT=Symbol.for("react.strict_mode"),FT=Symbol.for("react.profiler"),MT=Symbol.for("react.provider"),UT=Symbol.for("react.context"),BT=Symbol.for("react.forward_ref"),HT=Symbol.for("react.suspense"),zT=Symbol.for("react.memo"),$T=Symbol.for("react.lazy"),Mp=Symbol.iterator;function WT(t){return t===null||typeof t!="object"?null:(t=Mp&&t[Mp]||t["@@iterator"],typeof t=="function"?t:null)}var ky={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Ay=Object.assign,Cy={};function Ki(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||ky}Ki.prototype.isReactComponent={};Ki.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ki.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function Ny(){}Ny.prototype=Ki.prototype;function Zh(t,e,n){this.props=t,this.context=e,this.refs=Cy,this.updater=n||ky}var ed=Zh.prototype=new Ny;ed.constructor=Zh;Ay(ed,Ki.prototype);ed.isPureReactComponent=!0;var Up=Array.isArray,Py=Object.prototype.hasOwnProperty,td={current:null},Ry={key:!0,ref:!0,__self:!0,__source:!0};function Dy(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)Py.call(e,r)&&!Ry.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var u=Array(l),h=0;h<l;h++)u[h]=arguments[h+2];i.children=u}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ro,type:t,key:s,ref:o,props:i,_owner:td.current}}function qT(t,e){return{$$typeof:Ro,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function nd(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ro}function KT(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Bp=/\/+/g;function Ku(t,e){return typeof t=="object"&&t!==null&&t.key!=null?KT(""+t.key):e.toString(36)}function Da(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ro:case OT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+Ku(o,0):r,Up(i)?(n="",t!=null&&(n=t.replace(Bp,"$&/")+"/"),Da(i,e,n,"",function(h){return h})):i!=null&&(nd(i)&&(i=qT(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Bp,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Up(t))for(var l=0;l<t.length;l++){s=t[l];var u=r+Ku(s,l);o+=Da(s,e,n,u,i)}else if(u=WT(t),typeof u=="function")for(t=u.call(t),l=0;!(s=t.next()).done;)s=s.value,u=r+Ku(s,l++),o+=Da(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function la(t,e,n){if(t==null)return t;var r=[],i=0;return Da(t,r,"","",function(s){return e.call(n,s,i++)}),r}function GT(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ot={current:null},La={transition:null},QT={ReactCurrentDispatcher:ot,ReactCurrentBatchConfig:La,ReactCurrentOwner:td};function Ly(){throw Error("act(...) is not supported in production builds of React.")}ee.Children={map:la,forEach:function(t,e,n){la(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return la(t,function(){e++}),e},toArray:function(t){return la(t,function(e){return e})||[]},only:function(t){if(!nd(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ee.Component=Ki;ee.Fragment=jT;ee.Profiler=FT;ee.PureComponent=Zh;ee.StrictMode=VT;ee.Suspense=HT;ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QT;ee.act=Ly;ee.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Ay({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=td.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(u in e)Py.call(e,u)&&!Ry.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&l!==void 0?l[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){l=Array(u);for(var h=0;h<u;h++)l[h]=arguments[h+2];r.children=l}return{$$typeof:Ro,type:t.type,key:i,ref:s,props:r,_owner:o}};ee.createContext=function(t){return t={$$typeof:UT,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:MT,_context:t},t.Consumer=t};ee.createElement=Dy;ee.createFactory=function(t){var e=Dy.bind(null,t);return e.type=t,e};ee.createRef=function(){return{current:null}};ee.forwardRef=function(t){return{$$typeof:BT,render:t}};ee.isValidElement=nd;ee.lazy=function(t){return{$$typeof:$T,_payload:{_status:-1,_result:t},_init:GT}};ee.memo=function(t,e){return{$$typeof:zT,type:t,compare:e===void 0?null:e}};ee.startTransition=function(t){var e=La.transition;La.transition={};try{t()}finally{La.transition=e}};ee.unstable_act=Ly;ee.useCallback=function(t,e){return ot.current.useCallback(t,e)};ee.useContext=function(t){return ot.current.useContext(t)};ee.useDebugValue=function(){};ee.useDeferredValue=function(t){return ot.current.useDeferredValue(t)};ee.useEffect=function(t,e){return ot.current.useEffect(t,e)};ee.useId=function(){return ot.current.useId()};ee.useImperativeHandle=function(t,e,n){return ot.current.useImperativeHandle(t,e,n)};ee.useInsertionEffect=function(t,e){return ot.current.useInsertionEffect(t,e)};ee.useLayoutEffect=function(t,e){return ot.current.useLayoutEffect(t,e)};ee.useMemo=function(t,e){return ot.current.useMemo(t,e)};ee.useReducer=function(t,e,n){return ot.current.useReducer(t,e,n)};ee.useRef=function(t){return ot.current.useRef(t)};ee.useState=function(t){return ot.current.useState(t)};ee.useSyncExternalStore=function(t,e,n){return ot.current.useSyncExternalStore(t,e,n)};ee.useTransition=function(){return ot.current.useTransition()};ee.version="18.3.1";Iy.exports=ee;var $=Iy.exports;const YT=LT($);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JT=$,XT=Symbol.for("react.element"),ZT=Symbol.for("react.fragment"),e1=Object.prototype.hasOwnProperty,t1=JT.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,n1={key:!0,ref:!0,__self:!0,__source:!0};function Oy(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)e1.call(e,r)&&!n1.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:XT,type:t,key:s,ref:o,props:i,_owner:t1.current}}Wl.Fragment=ZT;Wl.jsx=Oy;Wl.jsxs=Oy;Sy.exports=Wl;var d=Sy.exports,Lc={},jy={exports:{}},Tt={},Vy={exports:{}},Fy={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Q){var X=B.length;B.push(Q);e:for(;0<X;){var me=X-1>>>1,be=B[me];if(0<i(be,Q))B[me]=Q,B[X]=be,X=me;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Q=B[0],X=B.pop();if(X!==Q){B[0]=X;e:for(var me=0,be=B.length,_r=be>>>1;me<_r;){var Et=2*(me+1)-1,wr=B[Et],Dt=Et+1,An=B[Dt];if(0>i(wr,X))Dt<be&&0>i(An,wr)?(B[me]=An,B[Dt]=X,me=Dt):(B[me]=wr,B[Et]=X,me=Et);else if(Dt<be&&0>i(An,X))B[me]=An,B[Dt]=X,me=Dt;else break e}}return Q}function i(B,Q){var X=B.sortIndex-Q.sortIndex;return X!==0?X:B.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var u=[],h=[],p=1,m=null,y=3,S=!1,b=!1,P=!1,L=typeof setTimeout=="function"?setTimeout:null,E=typeof clearTimeout=="function"?clearTimeout:null,w=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function A(B){for(var Q=n(h);Q!==null;){if(Q.callback===null)r(h);else if(Q.startTime<=B)r(h),Q.sortIndex=Q.expirationTime,e(u,Q);else break;Q=n(h)}}function R(B){if(P=!1,A(B),!b)if(n(u)!==null)b=!0,kn(F);else{var Q=n(h);Q!==null&&rs(R,Q.startTime-B)}}function F(B,Q){b=!1,P&&(P=!1,E(v),v=-1),S=!0;var X=y;try{for(A(Q),m=n(u);m!==null&&(!(m.expirationTime>Q)||B&&!k());){var me=m.callback;if(typeof me=="function"){m.callback=null,y=m.priorityLevel;var be=me(m.expirationTime<=Q);Q=t.unstable_now(),typeof be=="function"?m.callback=be:m===n(u)&&r(u),A(Q)}else r(u);m=n(u)}if(m!==null)var _r=!0;else{var Et=n(h);Et!==null&&rs(R,Et.startTime-Q),_r=!1}return _r}finally{m=null,y=X,S=!1}}var M=!1,T=null,v=-1,x=5,I=-1;function k(){return!(t.unstable_now()-I<x)}function N(){if(T!==null){var B=t.unstable_now();I=B;var Q=!0;try{Q=T(!0,B)}finally{Q?_():(M=!1,T=null)}}else M=!1}var _;if(typeof w=="function")_=function(){w(N)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,tt=ce.port2;ce.port1.onmessage=N,_=function(){tt.postMessage(null)}}else _=function(){L(N,0)};function kn(B){T=B,M||(M=!0,_())}function rs(B,Q){v=L(function(){B(t.unstable_now())},Q)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){b||S||(b=!0,kn(F))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):x=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return y},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(y){case 1:case 2:case 3:var Q=3;break;default:Q=y}var X=y;y=Q;try{return B()}finally{y=X}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Q){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var X=y;y=B;try{return Q()}finally{y=X}},t.unstable_scheduleCallback=function(B,Q,X){var me=t.unstable_now();switch(typeof X=="object"&&X!==null?(X=X.delay,X=typeof X=="number"&&0<X?me+X:me):X=me,B){case 1:var be=-1;break;case 2:be=250;break;case 5:be=1073741823;break;case 4:be=1e4;break;default:be=5e3}return be=X+be,B={id:p++,callback:Q,priorityLevel:B,startTime:X,expirationTime:be,sortIndex:-1},X>me?(B.sortIndex=X,e(h,B),n(u)===null&&B===n(h)&&(P?(E(v),v=-1):P=!0,rs(R,X-me))):(B.sortIndex=be,e(u,B),b||S||(b=!0,kn(F))),B},t.unstable_shouldYield=k,t.unstable_wrapCallback=function(B){var Q=y;return function(){var X=y;y=Q;try{return B.apply(this,arguments)}finally{y=X}}}})(Fy);Vy.exports=Fy;var r1=Vy.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1=$,wt=r1;function V(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var My=new Set,io={};function Qr(t,e){Di(t,e),Di(t+"Capture",e)}function Di(t,e){for(io[t]=e,t=0;t<e.length;t++)My.add(e[t])}var gn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oc=Object.prototype.hasOwnProperty,s1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hp={},zp={};function o1(t){return Oc.call(zp,t)?!0:Oc.call(Hp,t)?!1:s1.test(t)?zp[t]=!0:(Hp[t]=!0,!1)}function a1(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function l1(t,e,n,r){if(e===null||typeof e>"u"||a1(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function at(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var $e={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){$e[t]=new at(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];$e[e]=new at(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){$e[t]=new at(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){$e[t]=new at(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){$e[t]=new at(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){$e[t]=new at(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){$e[t]=new at(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){$e[t]=new at(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){$e[t]=new at(t,5,!1,t.toLowerCase(),null,!1,!1)});var rd=/[\-:]([a-z])/g;function id(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(rd,id);$e[e]=new at(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(rd,id);$e[e]=new at(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(rd,id);$e[e]=new at(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){$e[t]=new at(t,1,!1,t.toLowerCase(),null,!1,!1)});$e.xlinkHref=new at("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){$e[t]=new at(t,1,!1,t.toLowerCase(),null,!0,!0)});function sd(t,e,n,r){var i=$e.hasOwnProperty(e)?$e[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(l1(e,n,i,r)&&(n=null),r||i===null?o1(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var bn=i1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ua=Symbol.for("react.element"),ci=Symbol.for("react.portal"),hi=Symbol.for("react.fragment"),od=Symbol.for("react.strict_mode"),jc=Symbol.for("react.profiler"),Uy=Symbol.for("react.provider"),By=Symbol.for("react.context"),ad=Symbol.for("react.forward_ref"),Vc=Symbol.for("react.suspense"),Fc=Symbol.for("react.suspense_list"),ld=Symbol.for("react.memo"),Vn=Symbol.for("react.lazy"),Hy=Symbol.for("react.offscreen"),$p=Symbol.iterator;function ws(t){return t===null||typeof t!="object"?null:(t=$p&&t[$p]||t["@@iterator"],typeof t=="function"?t:null)}var we=Object.assign,Gu;function Rs(t){if(Gu===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Gu=e&&e[1]||""}return`
`+Gu+t}var Qu=!1;function Yu(t,e){if(!t||Qu)return"";Qu=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(h){var r=h}Reflect.construct(t,[],e)}else{try{e.call()}catch(h){r=h}t.call(e.prototype)}else{try{throw Error()}catch(h){r=h}t()}}catch(h){if(h&&r&&typeof h.stack=="string"){for(var i=h.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=l);break}}}finally{Qu=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Rs(t):""}function u1(t){switch(t.tag){case 5:return Rs(t.type);case 16:return Rs("Lazy");case 13:return Rs("Suspense");case 19:return Rs("SuspenseList");case 0:case 2:case 15:return t=Yu(t.type,!1),t;case 11:return t=Yu(t.type.render,!1),t;case 1:return t=Yu(t.type,!0),t;default:return""}}function Mc(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case hi:return"Fragment";case ci:return"Portal";case jc:return"Profiler";case od:return"StrictMode";case Vc:return"Suspense";case Fc:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case By:return(t.displayName||"Context")+".Consumer";case Uy:return(t._context.displayName||"Context")+".Provider";case ad:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ld:return e=t.displayName||null,e!==null?e:Mc(t.type)||"Memo";case Vn:e=t._payload,t=t._init;try{return Mc(t(e))}catch{}}return null}function c1(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mc(e);case 8:return e===od?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function or(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function zy(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function h1(t){var e=zy(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ca(t){t._valueTracker||(t._valueTracker=h1(t))}function $y(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=zy(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function tl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Uc(t,e){var n=e.checked;return we({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Wp(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=or(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Wy(t,e){e=e.checked,e!=null&&sd(t,"checked",e,!1)}function Bc(t,e){Wy(t,e);var n=or(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Hc(t,e.type,n):e.hasOwnProperty("defaultValue")&&Hc(t,e.type,or(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function qp(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function Hc(t,e,n){(e!=="number"||tl(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ds=Array.isArray;function xi(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+or(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function zc(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(V(91));return we({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Kp(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(V(92));if(Ds(n)){if(1<n.length)throw Error(V(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:or(n)}}function qy(t,e){var n=or(e.value),r=or(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function Gp(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Ky(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function $c(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Ky(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var ha,Gy=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(ha=ha||document.createElement("div"),ha.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=ha.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function so(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Hs={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d1=["Webkit","ms","Moz","O"];Object.keys(Hs).forEach(function(t){d1.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Hs[e]=Hs[t]})});function Qy(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Hs.hasOwnProperty(t)&&Hs[t]?(""+e).trim():e+"px"}function Yy(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Qy(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var f1=we({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Wc(t,e){if(e){if(f1[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(V(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(V(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(V(61))}if(e.style!=null&&typeof e.style!="object")throw Error(V(62))}}function qc(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Kc=null;function ud(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Gc=null,Ei=null,bi=null;function Qp(t){if(t=Oo(t)){if(typeof Gc!="function")throw Error(V(280));var e=t.stateNode;e&&(e=Yl(e),Gc(t.stateNode,t.type,e))}}function Jy(t){Ei?bi?bi.push(t):bi=[t]:Ei=t}function Xy(){if(Ei){var t=Ei,e=bi;if(bi=Ei=null,Qp(t),e)for(t=0;t<e.length;t++)Qp(e[t])}}function Zy(t,e){return t(e)}function ev(){}var Ju=!1;function tv(t,e,n){if(Ju)return t(e,n);Ju=!0;try{return Zy(t,e,n)}finally{Ju=!1,(Ei!==null||bi!==null)&&(ev(),Xy())}}function oo(t,e){var n=t.stateNode;if(n===null)return null;var r=Yl(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(V(231,e,typeof n));return n}var Qc=!1;if(gn)try{var Ts={};Object.defineProperty(Ts,"passive",{get:function(){Qc=!0}}),window.addEventListener("test",Ts,Ts),window.removeEventListener("test",Ts,Ts)}catch{Qc=!1}function p1(t,e,n,r,i,s,o,l,u){var h=Array.prototype.slice.call(arguments,3);try{e.apply(n,h)}catch(p){this.onError(p)}}var zs=!1,nl=null,rl=!1,Yc=null,m1={onError:function(t){zs=!0,nl=t}};function g1(t,e,n,r,i,s,o,l,u){zs=!1,nl=null,p1.apply(m1,arguments)}function y1(t,e,n,r,i,s,o,l,u){if(g1.apply(this,arguments),zs){if(zs){var h=nl;zs=!1,nl=null}else throw Error(V(198));rl||(rl=!0,Yc=h)}}function Yr(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function nv(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Yp(t){if(Yr(t)!==t)throw Error(V(188))}function v1(t){var e=t.alternate;if(!e){if(e=Yr(t),e===null)throw Error(V(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Yp(i),t;if(s===r)return Yp(i),e;s=s.sibling}throw Error(V(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(V(189))}}if(n.alternate!==r)throw Error(V(190))}if(n.tag!==3)throw Error(V(188));return n.stateNode.current===n?t:e}function rv(t){return t=v1(t),t!==null?iv(t):null}function iv(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=iv(t);if(e!==null)return e;t=t.sibling}return null}var sv=wt.unstable_scheduleCallback,Jp=wt.unstable_cancelCallback,_1=wt.unstable_shouldYield,w1=wt.unstable_requestPaint,Ie=wt.unstable_now,T1=wt.unstable_getCurrentPriorityLevel,cd=wt.unstable_ImmediatePriority,ov=wt.unstable_UserBlockingPriority,il=wt.unstable_NormalPriority,x1=wt.unstable_LowPriority,av=wt.unstable_IdlePriority,ql=null,Jt=null;function E1(t){if(Jt&&typeof Jt.onCommitFiberRoot=="function")try{Jt.onCommitFiberRoot(ql,t,void 0,(t.current.flags&128)===128)}catch{}}var Ut=Math.clz32?Math.clz32:I1,b1=Math.log,S1=Math.LN2;function I1(t){return t>>>=0,t===0?32:31-(b1(t)/S1|0)|0}var da=64,fa=4194304;function Ls(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function sl(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Ls(l):(s&=o,s!==0&&(r=Ls(s)))}else o=n&~i,o!==0?r=Ls(o):s!==0&&(r=Ls(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Ut(e),i=1<<n,r|=t[n],e&=~i;return r}function k1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function A1(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Ut(s),l=1<<o,u=i[o];u===-1?(!(l&n)||l&r)&&(i[o]=k1(l,e)):u<=e&&(t.expiredLanes|=l),s&=~l}}function Jc(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function lv(){var t=da;return da<<=1,!(da&4194240)&&(da=64),t}function Xu(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Do(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Ut(e),t[e]=n}function C1(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function hd(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var ae=0;function uv(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var cv,dd,hv,dv,fv,Xc=!1,pa=[],Kn=null,Gn=null,Qn=null,ao=new Map,lo=new Map,Mn=[],N1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Xp(t,e){switch(t){case"focusin":case"focusout":Kn=null;break;case"dragenter":case"dragleave":Gn=null;break;case"mouseover":case"mouseout":Qn=null;break;case"pointerover":case"pointerout":ao.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":lo.delete(e.pointerId)}}function xs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Oo(e),e!==null&&dd(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function P1(t,e,n,r,i){switch(e){case"focusin":return Kn=xs(Kn,t,e,n,r,i),!0;case"dragenter":return Gn=xs(Gn,t,e,n,r,i),!0;case"mouseover":return Qn=xs(Qn,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return ao.set(s,xs(ao.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,lo.set(s,xs(lo.get(s)||null,t,e,n,r,i)),!0}return!1}function pv(t){var e=Cr(t.target);if(e!==null){var n=Yr(e);if(n!==null){if(e=n.tag,e===13){if(e=nv(n),e!==null){t.blockedOn=e,fv(t.priority,function(){hv(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Oa(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Zc(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);Kc=r,n.target.dispatchEvent(r),Kc=null}else return e=Oo(n),e!==null&&dd(e),t.blockedOn=n,!1;e.shift()}return!0}function Zp(t,e,n){Oa(t)&&n.delete(e)}function R1(){Xc=!1,Kn!==null&&Oa(Kn)&&(Kn=null),Gn!==null&&Oa(Gn)&&(Gn=null),Qn!==null&&Oa(Qn)&&(Qn=null),ao.forEach(Zp),lo.forEach(Zp)}function Es(t,e){t.blockedOn===e&&(t.blockedOn=null,Xc||(Xc=!0,wt.unstable_scheduleCallback(wt.unstable_NormalPriority,R1)))}function uo(t){function e(i){return Es(i,t)}if(0<pa.length){Es(pa[0],t);for(var n=1;n<pa.length;n++){var r=pa[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Kn!==null&&Es(Kn,t),Gn!==null&&Es(Gn,t),Qn!==null&&Es(Qn,t),ao.forEach(e),lo.forEach(e),n=0;n<Mn.length;n++)r=Mn[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Mn.length&&(n=Mn[0],n.blockedOn===null);)pv(n),n.blockedOn===null&&Mn.shift()}var Si=bn.ReactCurrentBatchConfig,ol=!0;function D1(t,e,n,r){var i=ae,s=Si.transition;Si.transition=null;try{ae=1,fd(t,e,n,r)}finally{ae=i,Si.transition=s}}function L1(t,e,n,r){var i=ae,s=Si.transition;Si.transition=null;try{ae=4,fd(t,e,n,r)}finally{ae=i,Si.transition=s}}function fd(t,e,n,r){if(ol){var i=Zc(t,e,n,r);if(i===null)lc(t,e,r,al,n),Xp(t,r);else if(P1(i,t,e,n,r))r.stopPropagation();else if(Xp(t,r),e&4&&-1<N1.indexOf(t)){for(;i!==null;){var s=Oo(i);if(s!==null&&cv(s),s=Zc(t,e,n,r),s===null&&lc(t,e,r,al,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else lc(t,e,r,null,n)}}var al=null;function Zc(t,e,n,r){if(al=null,t=ud(r),t=Cr(t),t!==null)if(e=Yr(t),e===null)t=null;else if(n=e.tag,n===13){if(t=nv(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return al=t,null}function mv(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(T1()){case cd:return 1;case ov:return 4;case il:case x1:return 16;case av:return 536870912;default:return 16}default:return 16}}var $n=null,pd=null,ja=null;function gv(){if(ja)return ja;var t,e=pd,n=e.length,r,i="value"in $n?$n.value:$n.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return ja=i.slice(t,1<r?1-r:void 0)}function Va(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ma(){return!0}function em(){return!1}function xt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ma:em,this.isPropagationStopped=em,this}return we(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ma)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ma)},persist:function(){},isPersistent:ma}),e}var Gi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},md=xt(Gi),Lo=we({},Gi,{view:0,detail:0}),O1=xt(Lo),Zu,ec,bs,Kl=we({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:gd,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==bs&&(bs&&t.type==="mousemove"?(Zu=t.screenX-bs.screenX,ec=t.screenY-bs.screenY):ec=Zu=0,bs=t),Zu)},movementY:function(t){return"movementY"in t?t.movementY:ec}}),tm=xt(Kl),j1=we({},Kl,{dataTransfer:0}),V1=xt(j1),F1=we({},Lo,{relatedTarget:0}),tc=xt(F1),M1=we({},Gi,{animationName:0,elapsedTime:0,pseudoElement:0}),U1=xt(M1),B1=we({},Gi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),H1=xt(B1),z1=we({},Gi,{data:0}),nm=xt(z1),$1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},q1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function K1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=q1[t])?!!e[t]:!1}function gd(){return K1}var G1=we({},Lo,{key:function(t){if(t.key){var e=$1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Va(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?W1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:gd,charCode:function(t){return t.type==="keypress"?Va(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Va(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Q1=xt(G1),Y1=we({},Kl,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rm=xt(Y1),J1=we({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:gd}),X1=xt(J1),Z1=we({},Gi,{propertyName:0,elapsedTime:0,pseudoElement:0}),ex=xt(Z1),tx=we({},Kl,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),nx=xt(tx),rx=[9,13,27,32],yd=gn&&"CompositionEvent"in window,$s=null;gn&&"documentMode"in document&&($s=document.documentMode);var ix=gn&&"TextEvent"in window&&!$s,yv=gn&&(!yd||$s&&8<$s&&11>=$s),im=String.fromCharCode(32),sm=!1;function vv(t,e){switch(t){case"keyup":return rx.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function _v(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var di=!1;function sx(t,e){switch(t){case"compositionend":return _v(e);case"keypress":return e.which!==32?null:(sm=!0,im);case"textInput":return t=e.data,t===im&&sm?null:t;default:return null}}function ox(t,e){if(di)return t==="compositionend"||!yd&&vv(t,e)?(t=gv(),ja=pd=$n=null,di=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yv&&e.locale!=="ko"?null:e.data;default:return null}}var ax={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ax[t.type]:e==="textarea"}function wv(t,e,n,r){Jy(r),e=ll(e,"onChange"),0<e.length&&(n=new md("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ws=null,co=null;function lx(t){Pv(t,0)}function Gl(t){var e=mi(t);if($y(e))return t}function ux(t,e){if(t==="change")return e}var Tv=!1;if(gn){var nc;if(gn){var rc="oninput"in document;if(!rc){var am=document.createElement("div");am.setAttribute("oninput","return;"),rc=typeof am.oninput=="function"}nc=rc}else nc=!1;Tv=nc&&(!document.documentMode||9<document.documentMode)}function lm(){Ws&&(Ws.detachEvent("onpropertychange",xv),co=Ws=null)}function xv(t){if(t.propertyName==="value"&&Gl(co)){var e=[];wv(e,co,t,ud(t)),tv(lx,e)}}function cx(t,e,n){t==="focusin"?(lm(),Ws=e,co=n,Ws.attachEvent("onpropertychange",xv)):t==="focusout"&&lm()}function hx(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Gl(co)}function dx(t,e){if(t==="click")return Gl(e)}function fx(t,e){if(t==="input"||t==="change")return Gl(e)}function px(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var $t=typeof Object.is=="function"?Object.is:px;function ho(t,e){if($t(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Oc.call(e,i)||!$t(t[i],e[i]))return!1}return!0}function um(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function cm(t,e){var n=um(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=um(n)}}function Ev(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Ev(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function bv(){for(var t=window,e=tl();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=tl(t.document)}return e}function vd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function mx(t){var e=bv(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Ev(n.ownerDocument.documentElement,n)){if(r!==null&&vd(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=cm(n,s);var o=cm(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var gx=gn&&"documentMode"in document&&11>=document.documentMode,fi=null,eh=null,qs=null,th=!1;function hm(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;th||fi==null||fi!==tl(r)||(r=fi,"selectionStart"in r&&vd(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),qs&&ho(qs,r)||(qs=r,r=ll(eh,"onSelect"),0<r.length&&(e=new md("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=fi)))}function ga(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var pi={animationend:ga("Animation","AnimationEnd"),animationiteration:ga("Animation","AnimationIteration"),animationstart:ga("Animation","AnimationStart"),transitionend:ga("Transition","TransitionEnd")},ic={},Sv={};gn&&(Sv=document.createElement("div").style,"AnimationEvent"in window||(delete pi.animationend.animation,delete pi.animationiteration.animation,delete pi.animationstart.animation),"TransitionEvent"in window||delete pi.transitionend.transition);function Ql(t){if(ic[t])return ic[t];if(!pi[t])return t;var e=pi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Sv)return ic[t]=e[n];return t}var Iv=Ql("animationend"),kv=Ql("animationiteration"),Av=Ql("animationstart"),Cv=Ql("transitionend"),Nv=new Map,dm="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function pr(t,e){Nv.set(t,e),Qr(e,[t])}for(var sc=0;sc<dm.length;sc++){var oc=dm[sc],yx=oc.toLowerCase(),vx=oc[0].toUpperCase()+oc.slice(1);pr(yx,"on"+vx)}pr(Iv,"onAnimationEnd");pr(kv,"onAnimationIteration");pr(Av,"onAnimationStart");pr("dblclick","onDoubleClick");pr("focusin","onFocus");pr("focusout","onBlur");pr(Cv,"onTransitionEnd");Di("onMouseEnter",["mouseout","mouseover"]);Di("onMouseLeave",["mouseout","mouseover"]);Di("onPointerEnter",["pointerout","pointerover"]);Di("onPointerLeave",["pointerout","pointerover"]);Qr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Qr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Qr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Qr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Qr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Os="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_x=new Set("cancel close invalid load scroll toggle".split(" ").concat(Os));function fm(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,y1(r,e,void 0,t),t.currentTarget=null}function Pv(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],u=l.instance,h=l.currentTarget;if(l=l.listener,u!==s&&i.isPropagationStopped())break e;fm(i,l,h),s=u}else for(o=0;o<r.length;o++){if(l=r[o],u=l.instance,h=l.currentTarget,l=l.listener,u!==s&&i.isPropagationStopped())break e;fm(i,l,h),s=u}}}if(rl)throw t=Yc,rl=!1,Yc=null,t}function de(t,e){var n=e[oh];n===void 0&&(n=e[oh]=new Set);var r=t+"__bubble";n.has(r)||(Rv(e,t,2,!1),n.add(r))}function ac(t,e,n){var r=0;e&&(r|=4),Rv(n,t,r,e)}var ya="_reactListening"+Math.random().toString(36).slice(2);function fo(t){if(!t[ya]){t[ya]=!0,My.forEach(function(n){n!=="selectionchange"&&(_x.has(n)||ac(n,!1,t),ac(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ya]||(e[ya]=!0,ac("selectionchange",!1,e))}}function Rv(t,e,n,r){switch(mv(e)){case 1:var i=D1;break;case 4:i=L1;break;default:i=fd}n=i.bind(null,e,n,t),i=void 0,!Qc||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lc(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Cr(l),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}l=l.parentNode}}r=r.return}tv(function(){var h=s,p=ud(n),m=[];e:{var y=Nv.get(t);if(y!==void 0){var S=md,b=t;switch(t){case"keypress":if(Va(n)===0)break e;case"keydown":case"keyup":S=Q1;break;case"focusin":b="focus",S=tc;break;case"focusout":b="blur",S=tc;break;case"beforeblur":case"afterblur":S=tc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=tm;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=V1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=X1;break;case Iv:case kv:case Av:S=U1;break;case Cv:S=ex;break;case"scroll":S=O1;break;case"wheel":S=nx;break;case"copy":case"cut":case"paste":S=H1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=rm}var P=(e&4)!==0,L=!P&&t==="scroll",E=P?y!==null?y+"Capture":null:y;P=[];for(var w=h,A;w!==null;){A=w;var R=A.stateNode;if(A.tag===5&&R!==null&&(A=R,E!==null&&(R=oo(w,E),R!=null&&P.push(po(w,R,A)))),L)break;w=w.return}0<P.length&&(y=new S(y,b,null,n,p),m.push({event:y,listeners:P}))}}if(!(e&7)){e:{if(y=t==="mouseover"||t==="pointerover",S=t==="mouseout"||t==="pointerout",y&&n!==Kc&&(b=n.relatedTarget||n.fromElement)&&(Cr(b)||b[yn]))break e;if((S||y)&&(y=p.window===p?p:(y=p.ownerDocument)?y.defaultView||y.parentWindow:window,S?(b=n.relatedTarget||n.toElement,S=h,b=b?Cr(b):null,b!==null&&(L=Yr(b),b!==L||b.tag!==5&&b.tag!==6)&&(b=null)):(S=null,b=h),S!==b)){if(P=tm,R="onMouseLeave",E="onMouseEnter",w="mouse",(t==="pointerout"||t==="pointerover")&&(P=rm,R="onPointerLeave",E="onPointerEnter",w="pointer"),L=S==null?y:mi(S),A=b==null?y:mi(b),y=new P(R,w+"leave",S,n,p),y.target=L,y.relatedTarget=A,R=null,Cr(p)===h&&(P=new P(E,w+"enter",b,n,p),P.target=A,P.relatedTarget=L,R=P),L=R,S&&b)t:{for(P=S,E=b,w=0,A=P;A;A=ii(A))w++;for(A=0,R=E;R;R=ii(R))A++;for(;0<w-A;)P=ii(P),w--;for(;0<A-w;)E=ii(E),A--;for(;w--;){if(P===E||E!==null&&P===E.alternate)break t;P=ii(P),E=ii(E)}P=null}else P=null;S!==null&&pm(m,y,S,P,!1),b!==null&&L!==null&&pm(m,L,b,P,!0)}}e:{if(y=h?mi(h):window,S=y.nodeName&&y.nodeName.toLowerCase(),S==="select"||S==="input"&&y.type==="file")var F=ux;else if(om(y))if(Tv)F=fx;else{F=hx;var M=cx}else(S=y.nodeName)&&S.toLowerCase()==="input"&&(y.type==="checkbox"||y.type==="radio")&&(F=dx);if(F&&(F=F(t,h))){wv(m,F,n,p);break e}M&&M(t,y,h),t==="focusout"&&(M=y._wrapperState)&&M.controlled&&y.type==="number"&&Hc(y,"number",y.value)}switch(M=h?mi(h):window,t){case"focusin":(om(M)||M.contentEditable==="true")&&(fi=M,eh=h,qs=null);break;case"focusout":qs=eh=fi=null;break;case"mousedown":th=!0;break;case"contextmenu":case"mouseup":case"dragend":th=!1,hm(m,n,p);break;case"selectionchange":if(gx)break;case"keydown":case"keyup":hm(m,n,p)}var T;if(yd)e:{switch(t){case"compositionstart":var v="onCompositionStart";break e;case"compositionend":v="onCompositionEnd";break e;case"compositionupdate":v="onCompositionUpdate";break e}v=void 0}else di?vv(t,n)&&(v="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(v="onCompositionStart");v&&(yv&&n.locale!=="ko"&&(di||v!=="onCompositionStart"?v==="onCompositionEnd"&&di&&(T=gv()):($n=p,pd="value"in $n?$n.value:$n.textContent,di=!0)),M=ll(h,v),0<M.length&&(v=new nm(v,t,null,n,p),m.push({event:v,listeners:M}),T?v.data=T:(T=_v(n),T!==null&&(v.data=T)))),(T=ix?sx(t,n):ox(t,n))&&(h=ll(h,"onBeforeInput"),0<h.length&&(p=new nm("onBeforeInput","beforeinput",null,n,p),m.push({event:p,listeners:h}),p.data=T))}Pv(m,e)})}function po(t,e,n){return{instance:t,listener:e,currentTarget:n}}function ll(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=oo(t,n),s!=null&&r.unshift(po(t,s,i)),s=oo(t,e),s!=null&&r.push(po(t,s,i))),t=t.return}return r}function ii(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pm(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,u=l.alternate,h=l.stateNode;if(u!==null&&u===r)break;l.tag===5&&h!==null&&(l=h,i?(u=oo(n,s),u!=null&&o.unshift(po(n,u,l))):i||(u=oo(n,s),u!=null&&o.push(po(n,u,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var wx=/\r\n?/g,Tx=/\u0000|\uFFFD/g;function mm(t){return(typeof t=="string"?t:""+t).replace(wx,`
`).replace(Tx,"")}function va(t,e,n){if(e=mm(e),mm(t)!==e&&n)throw Error(V(425))}function ul(){}var nh=null,rh=null;function ih(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var sh=typeof setTimeout=="function"?setTimeout:void 0,xx=typeof clearTimeout=="function"?clearTimeout:void 0,gm=typeof Promise=="function"?Promise:void 0,Ex=typeof queueMicrotask=="function"?queueMicrotask:typeof gm<"u"?function(t){return gm.resolve(null).then(t).catch(bx)}:sh;function bx(t){setTimeout(function(){throw t})}function uc(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),uo(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);uo(e)}function Yn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function ym(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Qi=Math.random().toString(36).slice(2),Yt="__reactFiber$"+Qi,mo="__reactProps$"+Qi,yn="__reactContainer$"+Qi,oh="__reactEvents$"+Qi,Sx="__reactListeners$"+Qi,Ix="__reactHandles$"+Qi;function Cr(t){var e=t[Yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[yn]||n[Yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=ym(t);t!==null;){if(n=t[Yt])return n;t=ym(t)}return e}t=n,n=t.parentNode}return null}function Oo(t){return t=t[Yt]||t[yn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function mi(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(V(33))}function Yl(t){return t[mo]||null}var ah=[],gi=-1;function mr(t){return{current:t}}function pe(t){0>gi||(t.current=ah[gi],ah[gi]=null,gi--)}function ue(t,e){gi++,ah[gi]=t.current,t.current=e}var ar={},Ze=mr(ar),ht=mr(!1),Vr=ar;function Li(t,e){var n=t.type.contextTypes;if(!n)return ar;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function dt(t){return t=t.childContextTypes,t!=null}function cl(){pe(ht),pe(Ze)}function vm(t,e,n){if(Ze.current!==ar)throw Error(V(168));ue(Ze,e),ue(ht,n)}function Dv(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(V(108,c1(t)||"Unknown",i));return we({},n,r)}function hl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ar,Vr=Ze.current,ue(Ze,t),ue(ht,ht.current),!0}function _m(t,e,n){var r=t.stateNode;if(!r)throw Error(V(169));n?(t=Dv(t,e,Vr),r.__reactInternalMemoizedMergedChildContext=t,pe(ht),pe(Ze),ue(Ze,t)):pe(ht),ue(ht,n)}var an=null,Jl=!1,cc=!1;function Lv(t){an===null?an=[t]:an.push(t)}function kx(t){Jl=!0,Lv(t)}function gr(){if(!cc&&an!==null){cc=!0;var t=0,e=ae;try{var n=an;for(ae=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}an=null,Jl=!1}catch(i){throw an!==null&&(an=an.slice(t+1)),sv(cd,gr),i}finally{ae=e,cc=!1}}return null}var yi=[],vi=0,dl=null,fl=0,bt=[],St=0,Fr=null,un=1,cn="";function Ir(t,e){yi[vi++]=fl,yi[vi++]=dl,dl=t,fl=e}function Ov(t,e,n){bt[St++]=un,bt[St++]=cn,bt[St++]=Fr,Fr=t;var r=un;t=cn;var i=32-Ut(r)-1;r&=~(1<<i),n+=1;var s=32-Ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,un=1<<32-Ut(e)+i|n<<i|r,cn=s+t}else un=1<<s|n<<i|r,cn=t}function _d(t){t.return!==null&&(Ir(t,1),Ov(t,1,0))}function wd(t){for(;t===dl;)dl=yi[--vi],yi[vi]=null,fl=yi[--vi],yi[vi]=null;for(;t===Fr;)Fr=bt[--St],bt[St]=null,cn=bt[--St],bt[St]=null,un=bt[--St],bt[St]=null}var _t=null,vt=null,ge=!1,Vt=null;function jv(t,e){var n=At(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function wm(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,_t=t,vt=Yn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,_t=t,vt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Fr!==null?{id:un,overflow:cn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=At(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,_t=t,vt=null,!0):!1;default:return!1}}function lh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function uh(t){if(ge){var e=vt;if(e){var n=e;if(!wm(t,e)){if(lh(t))throw Error(V(418));e=Yn(n.nextSibling);var r=_t;e&&wm(t,e)?jv(r,n):(t.flags=t.flags&-4097|2,ge=!1,_t=t)}}else{if(lh(t))throw Error(V(418));t.flags=t.flags&-4097|2,ge=!1,_t=t}}}function Tm(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;_t=t}function _a(t){if(t!==_t)return!1;if(!ge)return Tm(t),ge=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ih(t.type,t.memoizedProps)),e&&(e=vt)){if(lh(t))throw Vv(),Error(V(418));for(;e;)jv(t,e),e=Yn(e.nextSibling)}if(Tm(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(V(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){vt=Yn(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}vt=null}}else vt=_t?Yn(t.stateNode.nextSibling):null;return!0}function Vv(){for(var t=vt;t;)t=Yn(t.nextSibling)}function Oi(){vt=_t=null,ge=!1}function Td(t){Vt===null?Vt=[t]:Vt.push(t)}var Ax=bn.ReactCurrentBatchConfig;function Ss(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(V(309));var r=n.stateNode}if(!r)throw Error(V(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(V(284));if(!n._owner)throw Error(V(290,t))}return t}function wa(t,e){throw t=Object.prototype.toString.call(e),Error(V(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function xm(t){var e=t._init;return e(t._payload)}function Fv(t){function e(E,w){if(t){var A=E.deletions;A===null?(E.deletions=[w],E.flags|=16):A.push(w)}}function n(E,w){if(!t)return null;for(;w!==null;)e(E,w),w=w.sibling;return null}function r(E,w){for(E=new Map;w!==null;)w.key!==null?E.set(w.key,w):E.set(w.index,w),w=w.sibling;return E}function i(E,w){return E=er(E,w),E.index=0,E.sibling=null,E}function s(E,w,A){return E.index=A,t?(A=E.alternate,A!==null?(A=A.index,A<w?(E.flags|=2,w):A):(E.flags|=2,w)):(E.flags|=1048576,w)}function o(E){return t&&E.alternate===null&&(E.flags|=2),E}function l(E,w,A,R){return w===null||w.tag!==6?(w=yc(A,E.mode,R),w.return=E,w):(w=i(w,A),w.return=E,w)}function u(E,w,A,R){var F=A.type;return F===hi?p(E,w,A.props.children,R,A.key):w!==null&&(w.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&xm(F)===w.type)?(R=i(w,A.props),R.ref=Ss(E,w,A),R.return=E,R):(R=$a(A.type,A.key,A.props,null,E.mode,R),R.ref=Ss(E,w,A),R.return=E,R)}function h(E,w,A,R){return w===null||w.tag!==4||w.stateNode.containerInfo!==A.containerInfo||w.stateNode.implementation!==A.implementation?(w=vc(A,E.mode,R),w.return=E,w):(w=i(w,A.children||[]),w.return=E,w)}function p(E,w,A,R,F){return w===null||w.tag!==7?(w=Or(A,E.mode,R,F),w.return=E,w):(w=i(w,A),w.return=E,w)}function m(E,w,A){if(typeof w=="string"&&w!==""||typeof w=="number")return w=yc(""+w,E.mode,A),w.return=E,w;if(typeof w=="object"&&w!==null){switch(w.$$typeof){case ua:return A=$a(w.type,w.key,w.props,null,E.mode,A),A.ref=Ss(E,null,w),A.return=E,A;case ci:return w=vc(w,E.mode,A),w.return=E,w;case Vn:var R=w._init;return m(E,R(w._payload),A)}if(Ds(w)||ws(w))return w=Or(w,E.mode,A,null),w.return=E,w;wa(E,w)}return null}function y(E,w,A,R){var F=w!==null?w.key:null;if(typeof A=="string"&&A!==""||typeof A=="number")return F!==null?null:l(E,w,""+A,R);if(typeof A=="object"&&A!==null){switch(A.$$typeof){case ua:return A.key===F?u(E,w,A,R):null;case ci:return A.key===F?h(E,w,A,R):null;case Vn:return F=A._init,y(E,w,F(A._payload),R)}if(Ds(A)||ws(A))return F!==null?null:p(E,w,A,R,null);wa(E,A)}return null}function S(E,w,A,R,F){if(typeof R=="string"&&R!==""||typeof R=="number")return E=E.get(A)||null,l(w,E,""+R,F);if(typeof R=="object"&&R!==null){switch(R.$$typeof){case ua:return E=E.get(R.key===null?A:R.key)||null,u(w,E,R,F);case ci:return E=E.get(R.key===null?A:R.key)||null,h(w,E,R,F);case Vn:var M=R._init;return S(E,w,A,M(R._payload),F)}if(Ds(R)||ws(R))return E=E.get(A)||null,p(w,E,R,F,null);wa(w,R)}return null}function b(E,w,A,R){for(var F=null,M=null,T=w,v=w=0,x=null;T!==null&&v<A.length;v++){T.index>v?(x=T,T=null):x=T.sibling;var I=y(E,T,A[v],R);if(I===null){T===null&&(T=x);break}t&&T&&I.alternate===null&&e(E,T),w=s(I,w,v),M===null?F=I:M.sibling=I,M=I,T=x}if(v===A.length)return n(E,T),ge&&Ir(E,v),F;if(T===null){for(;v<A.length;v++)T=m(E,A[v],R),T!==null&&(w=s(T,w,v),M===null?F=T:M.sibling=T,M=T);return ge&&Ir(E,v),F}for(T=r(E,T);v<A.length;v++)x=S(T,E,v,A[v],R),x!==null&&(t&&x.alternate!==null&&T.delete(x.key===null?v:x.key),w=s(x,w,v),M===null?F=x:M.sibling=x,M=x);return t&&T.forEach(function(k){return e(E,k)}),ge&&Ir(E,v),F}function P(E,w,A,R){var F=ws(A);if(typeof F!="function")throw Error(V(150));if(A=F.call(A),A==null)throw Error(V(151));for(var M=F=null,T=w,v=w=0,x=null,I=A.next();T!==null&&!I.done;v++,I=A.next()){T.index>v?(x=T,T=null):x=T.sibling;var k=y(E,T,I.value,R);if(k===null){T===null&&(T=x);break}t&&T&&k.alternate===null&&e(E,T),w=s(k,w,v),M===null?F=k:M.sibling=k,M=k,T=x}if(I.done)return n(E,T),ge&&Ir(E,v),F;if(T===null){for(;!I.done;v++,I=A.next())I=m(E,I.value,R),I!==null&&(w=s(I,w,v),M===null?F=I:M.sibling=I,M=I);return ge&&Ir(E,v),F}for(T=r(E,T);!I.done;v++,I=A.next())I=S(T,E,v,I.value,R),I!==null&&(t&&I.alternate!==null&&T.delete(I.key===null?v:I.key),w=s(I,w,v),M===null?F=I:M.sibling=I,M=I);return t&&T.forEach(function(N){return e(E,N)}),ge&&Ir(E,v),F}function L(E,w,A,R){if(typeof A=="object"&&A!==null&&A.type===hi&&A.key===null&&(A=A.props.children),typeof A=="object"&&A!==null){switch(A.$$typeof){case ua:e:{for(var F=A.key,M=w;M!==null;){if(M.key===F){if(F=A.type,F===hi){if(M.tag===7){n(E,M.sibling),w=i(M,A.props.children),w.return=E,E=w;break e}}else if(M.elementType===F||typeof F=="object"&&F!==null&&F.$$typeof===Vn&&xm(F)===M.type){n(E,M.sibling),w=i(M,A.props),w.ref=Ss(E,M,A),w.return=E,E=w;break e}n(E,M);break}else e(E,M);M=M.sibling}A.type===hi?(w=Or(A.props.children,E.mode,R,A.key),w.return=E,E=w):(R=$a(A.type,A.key,A.props,null,E.mode,R),R.ref=Ss(E,w,A),R.return=E,E=R)}return o(E);case ci:e:{for(M=A.key;w!==null;){if(w.key===M)if(w.tag===4&&w.stateNode.containerInfo===A.containerInfo&&w.stateNode.implementation===A.implementation){n(E,w.sibling),w=i(w,A.children||[]),w.return=E,E=w;break e}else{n(E,w);break}else e(E,w);w=w.sibling}w=vc(A,E.mode,R),w.return=E,E=w}return o(E);case Vn:return M=A._init,L(E,w,M(A._payload),R)}if(Ds(A))return b(E,w,A,R);if(ws(A))return P(E,w,A,R);wa(E,A)}return typeof A=="string"&&A!==""||typeof A=="number"?(A=""+A,w!==null&&w.tag===6?(n(E,w.sibling),w=i(w,A),w.return=E,E=w):(n(E,w),w=yc(A,E.mode,R),w.return=E,E=w),o(E)):n(E,w)}return L}var ji=Fv(!0),Mv=Fv(!1),pl=mr(null),ml=null,_i=null,xd=null;function Ed(){xd=_i=ml=null}function bd(t){var e=pl.current;pe(pl),t._currentValue=e}function ch(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function Ii(t,e){ml=t,xd=_i=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(ct=!0),t.firstContext=null)}function Nt(t){var e=t._currentValue;if(xd!==t)if(t={context:t,memoizedValue:e,next:null},_i===null){if(ml===null)throw Error(V(308));_i=t,ml.dependencies={lanes:0,firstContext:t}}else _i=_i.next=t;return e}var Nr=null;function Sd(t){Nr===null?Nr=[t]:Nr.push(t)}function Uv(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Sd(e)):(n.next=i.next,i.next=n),e.interleaved=n,vn(t,r)}function vn(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Fn=!1;function Id(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Bv(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function fn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Jn(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,se&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,vn(t,n)}return i=r.interleaved,i===null?(e.next=e,Sd(r)):(e.next=i.next,i.next=e),r.interleaved=e,vn(t,n)}function Fa(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hd(t,n)}}function Em(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function gl(t,e,n,r){var i=t.updateQueue;Fn=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var u=l,h=u.next;u.next=null,o===null?s=h:o.next=h,o=u;var p=t.alternate;p!==null&&(p=p.updateQueue,l=p.lastBaseUpdate,l!==o&&(l===null?p.firstBaseUpdate=h:l.next=h,p.lastBaseUpdate=u))}if(s!==null){var m=i.baseState;o=0,p=h=u=null,l=s;do{var y=l.lane,S=l.eventTime;if((r&y)===y){p!==null&&(p=p.next={eventTime:S,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=t,P=l;switch(y=e,S=n,P.tag){case 1:if(b=P.payload,typeof b=="function"){m=b.call(S,m,y);break e}m=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=P.payload,y=typeof b=="function"?b.call(S,m,y):b,y==null)break e;m=we({},m,y);break e;case 2:Fn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,y=i.effects,y===null?i.effects=[l]:y.push(l))}else S={eventTime:S,lane:y,tag:l.tag,payload:l.payload,callback:l.callback,next:null},p===null?(h=p=S,u=m):p=p.next=S,o|=y;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;y=l,l=y.next,y.next=null,i.lastBaseUpdate=y,i.shared.pending=null}}while(1);if(p===null&&(u=m),i.baseState=u,i.firstBaseUpdate=h,i.lastBaseUpdate=p,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ur|=o,t.lanes=o,t.memoizedState=m}}function bm(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(V(191,i));i.call(r)}}}var jo={},Xt=mr(jo),go=mr(jo),yo=mr(jo);function Pr(t){if(t===jo)throw Error(V(174));return t}function kd(t,e){switch(ue(yo,e),ue(go,t),ue(Xt,jo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:$c(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=$c(e,t)}pe(Xt),ue(Xt,e)}function Vi(){pe(Xt),pe(go),pe(yo)}function Hv(t){Pr(yo.current);var e=Pr(Xt.current),n=$c(e,t.type);e!==n&&(ue(go,t),ue(Xt,n))}function Ad(t){go.current===t&&(pe(Xt),pe(go))}var ye=mr(0);function yl(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var hc=[];function Cd(){for(var t=0;t<hc.length;t++)hc[t]._workInProgressVersionPrimary=null;hc.length=0}var Ma=bn.ReactCurrentDispatcher,dc=bn.ReactCurrentBatchConfig,Mr=0,_e=null,Pe=null,Ve=null,vl=!1,Ks=!1,vo=0,Cx=0;function Ke(){throw Error(V(321))}function Nd(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!$t(t[n],e[n]))return!1;return!0}function Pd(t,e,n,r,i,s){if(Mr=s,_e=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ma.current=t===null||t.memoizedState===null?Dx:Lx,t=n(r,i),Ks){s=0;do{if(Ks=!1,vo=0,25<=s)throw Error(V(301));s+=1,Ve=Pe=null,e.updateQueue=null,Ma.current=Ox,t=n(r,i)}while(Ks)}if(Ma.current=_l,e=Pe!==null&&Pe.next!==null,Mr=0,Ve=Pe=_e=null,vl=!1,e)throw Error(V(300));return t}function Rd(){var t=vo!==0;return vo=0,t}function Gt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ve===null?_e.memoizedState=Ve=t:Ve=Ve.next=t,Ve}function Pt(){if(Pe===null){var t=_e.alternate;t=t!==null?t.memoizedState:null}else t=Pe.next;var e=Ve===null?_e.memoizedState:Ve.next;if(e!==null)Ve=e,Pe=t;else{if(t===null)throw Error(V(310));Pe=t,t={memoizedState:Pe.memoizedState,baseState:Pe.baseState,baseQueue:Pe.baseQueue,queue:Pe.queue,next:null},Ve===null?_e.memoizedState=Ve=t:Ve=Ve.next=t}return Ve}function _o(t,e){return typeof e=="function"?e(t):e}function fc(t){var e=Pt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=Pe,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,u=null,h=s;do{var p=h.lane;if((Mr&p)===p)u!==null&&(u=u.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),r=h.hasEagerState?h.eagerState:t(r,h.action);else{var m={lane:p,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};u===null?(l=u=m,o=r):u=u.next=m,_e.lanes|=p,Ur|=p}h=h.next}while(h!==null&&h!==s);u===null?o=r:u.next=l,$t(r,e.memoizedState)||(ct=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,_e.lanes|=s,Ur|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function pc(t){var e=Pt(),n=e.queue;if(n===null)throw Error(V(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);$t(s,e.memoizedState)||(ct=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function zv(){}function $v(t,e){var n=_e,r=Pt(),i=e(),s=!$t(r.memoizedState,i);if(s&&(r.memoizedState=i,ct=!0),r=r.queue,Dd(Kv.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||Ve!==null&&Ve.memoizedState.tag&1){if(n.flags|=2048,wo(9,qv.bind(null,n,r,i,e),void 0,null),Me===null)throw Error(V(349));Mr&30||Wv(n,e,i)}return i}function Wv(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function qv(t,e,n,r){e.value=n,e.getSnapshot=r,Gv(e)&&Qv(t)}function Kv(t,e,n){return n(function(){Gv(e)&&Qv(t)})}function Gv(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!$t(t,n)}catch{return!0}}function Qv(t){var e=vn(t,1);e!==null&&Bt(e,t,1,-1)}function Sm(t){var e=Gt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:_o,lastRenderedState:t},e.queue=t,t=t.dispatch=Rx.bind(null,_e,t),[e.memoizedState,t]}function wo(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=_e.updateQueue,e===null?(e={lastEffect:null,stores:null},_e.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Yv(){return Pt().memoizedState}function Ua(t,e,n,r){var i=Gt();_e.flags|=t,i.memoizedState=wo(1|e,n,void 0,r===void 0?null:r)}function Xl(t,e,n,r){var i=Pt();r=r===void 0?null:r;var s=void 0;if(Pe!==null){var o=Pe.memoizedState;if(s=o.destroy,r!==null&&Nd(r,o.deps)){i.memoizedState=wo(e,n,s,r);return}}_e.flags|=t,i.memoizedState=wo(1|e,n,s,r)}function Im(t,e){return Ua(8390656,8,t,e)}function Dd(t,e){return Xl(2048,8,t,e)}function Jv(t,e){return Xl(4,2,t,e)}function Xv(t,e){return Xl(4,4,t,e)}function Zv(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function e0(t,e,n){return n=n!=null?n.concat([t]):null,Xl(4,4,Zv.bind(null,e,t),n)}function Ld(){}function t0(t,e){var n=Pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nd(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function n0(t,e){var n=Pt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Nd(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function r0(t,e,n){return Mr&21?($t(n,e)||(n=lv(),_e.lanes|=n,Ur|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,ct=!0),t.memoizedState=n)}function Nx(t,e){var n=ae;ae=n!==0&&4>n?n:4,t(!0);var r=dc.transition;dc.transition={};try{t(!1),e()}finally{ae=n,dc.transition=r}}function i0(){return Pt().memoizedState}function Px(t,e,n){var r=Zn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},s0(t))o0(e,n);else if(n=Uv(t,e,n,r),n!==null){var i=st();Bt(n,t,r,i),a0(n,e,r)}}function Rx(t,e,n){var r=Zn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(s0(t))o0(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,$t(l,o)){var u=e.interleaved;u===null?(i.next=i,Sd(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Uv(t,e,i,r),n!==null&&(i=st(),Bt(n,t,r,i),a0(n,e,r))}}function s0(t){var e=t.alternate;return t===_e||e!==null&&e===_e}function o0(t,e){Ks=vl=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function a0(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,hd(t,n)}}var _l={readContext:Nt,useCallback:Ke,useContext:Ke,useEffect:Ke,useImperativeHandle:Ke,useInsertionEffect:Ke,useLayoutEffect:Ke,useMemo:Ke,useReducer:Ke,useRef:Ke,useState:Ke,useDebugValue:Ke,useDeferredValue:Ke,useTransition:Ke,useMutableSource:Ke,useSyncExternalStore:Ke,useId:Ke,unstable_isNewReconciler:!1},Dx={readContext:Nt,useCallback:function(t,e){return Gt().memoizedState=[t,e===void 0?null:e],t},useContext:Nt,useEffect:Im,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ua(4194308,4,Zv.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ua(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ua(4,2,t,e)},useMemo:function(t,e){var n=Gt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Gt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=Px.bind(null,_e,t),[r.memoizedState,t]},useRef:function(t){var e=Gt();return t={current:t},e.memoizedState=t},useState:Sm,useDebugValue:Ld,useDeferredValue:function(t){return Gt().memoizedState=t},useTransition:function(){var t=Sm(!1),e=t[0];return t=Nx.bind(null,t[1]),Gt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=_e,i=Gt();if(ge){if(n===void 0)throw Error(V(407));n=n()}else{if(n=e(),Me===null)throw Error(V(349));Mr&30||Wv(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Im(Kv.bind(null,r,s,t),[t]),r.flags|=2048,wo(9,qv.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Gt(),e=Me.identifierPrefix;if(ge){var n=cn,r=un;n=(r&~(1<<32-Ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=vo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Cx++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Lx={readContext:Nt,useCallback:t0,useContext:Nt,useEffect:Dd,useImperativeHandle:e0,useInsertionEffect:Jv,useLayoutEffect:Xv,useMemo:n0,useReducer:fc,useRef:Yv,useState:function(){return fc(_o)},useDebugValue:Ld,useDeferredValue:function(t){var e=Pt();return r0(e,Pe.memoizedState,t)},useTransition:function(){var t=fc(_o)[0],e=Pt().memoizedState;return[t,e]},useMutableSource:zv,useSyncExternalStore:$v,useId:i0,unstable_isNewReconciler:!1},Ox={readContext:Nt,useCallback:t0,useContext:Nt,useEffect:Dd,useImperativeHandle:e0,useInsertionEffect:Jv,useLayoutEffect:Xv,useMemo:n0,useReducer:pc,useRef:Yv,useState:function(){return pc(_o)},useDebugValue:Ld,useDeferredValue:function(t){var e=Pt();return Pe===null?e.memoizedState=t:r0(e,Pe.memoizedState,t)},useTransition:function(){var t=pc(_o)[0],e=Pt().memoizedState;return[t,e]},useMutableSource:zv,useSyncExternalStore:$v,useId:i0,unstable_isNewReconciler:!1};function Ot(t,e){if(t&&t.defaultProps){e=we({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function hh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:we({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zl={isMounted:function(t){return(t=t._reactInternals)?Yr(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=st(),i=Zn(t),s=fn(r,i);s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(Bt(e,t,i,r),Fa(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=st(),i=Zn(t),s=fn(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Jn(t,s,i),e!==null&&(Bt(e,t,i,r),Fa(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=st(),r=Zn(t),i=fn(n,r);i.tag=2,e!=null&&(i.callback=e),e=Jn(t,i,r),e!==null&&(Bt(e,t,r,n),Fa(e,t,r))}};function km(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!ho(n,r)||!ho(i,s):!0}function l0(t,e,n){var r=!1,i=ar,s=e.contextType;return typeof s=="object"&&s!==null?s=Nt(s):(i=dt(e)?Vr:Ze.current,r=e.contextTypes,s=(r=r!=null)?Li(t,i):ar),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zl,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Am(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zl.enqueueReplaceState(e,e.state,null)}function dh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Id(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=Nt(s):(s=dt(e)?Vr:Ze.current,i.context=Li(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(hh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zl.enqueueReplaceState(i,i.state,null),gl(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fi(t,e){try{var n="",r=e;do n+=u1(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function mc(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function fh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var jx=typeof WeakMap=="function"?WeakMap:Map;function u0(t,e,n){n=fn(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Tl||(Tl=!0,Eh=r),fh(t,e)},n}function c0(t,e,n){n=fn(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){fh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){fh(t,e),typeof r!="function"&&(Xn===null?Xn=new Set([this]):Xn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Cm(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new jx;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=Yx.bind(null,t,e,n),e.then(t,t))}function Nm(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Pm(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=fn(-1,1),e.tag=2,Jn(n,e,1))),n.lanes|=1),t)}var Vx=bn.ReactCurrentOwner,ct=!1;function it(t,e,n,r){e.child=t===null?Mv(e,null,n,r):ji(e,t.child,n,r)}function Rm(t,e,n,r,i){n=n.render;var s=e.ref;return Ii(e,i),r=Pd(t,e,n,r,s,i),n=Rd(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_n(t,e,i)):(ge&&n&&_d(e),e.flags|=1,it(t,e,r,i),e.child)}function Dm(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Hd(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,h0(t,e,s,r,i)):(t=$a(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:ho,n(o,r)&&t.ref===e.ref)return _n(t,e,i)}return e.flags|=1,t=er(s,r),t.ref=e.ref,t.return=e,e.child=t}function h0(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(ho(s,r)&&t.ref===e.ref)if(ct=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(ct=!0);else return e.lanes=t.lanes,_n(t,e,i)}return ph(t,e,n,r,i)}function d0(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},ue(Ti,gt),gt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,ue(Ti,gt),gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,ue(Ti,gt),gt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,ue(Ti,gt),gt|=r;return it(t,e,i,n),e.child}function f0(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ph(t,e,n,r,i){var s=dt(n)?Vr:Ze.current;return s=Li(e,s),Ii(e,i),n=Pd(t,e,n,r,s,i),r=Rd(),t!==null&&!ct?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,_n(t,e,i)):(ge&&r&&_d(e),e.flags|=1,it(t,e,n,i),e.child)}function Lm(t,e,n,r,i){if(dt(n)){var s=!0;hl(e)}else s=!1;if(Ii(e,i),e.stateNode===null)Ba(t,e),l0(e,n,r),dh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var u=o.context,h=n.contextType;typeof h=="object"&&h!==null?h=Nt(h):(h=dt(n)?Vr:Ze.current,h=Li(e,h));var p=n.getDerivedStateFromProps,m=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function";m||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||u!==h)&&Am(e,o,r,h),Fn=!1;var y=e.memoizedState;o.state=y,gl(e,r,o,i),u=e.memoizedState,l!==r||y!==u||ht.current||Fn?(typeof p=="function"&&(hh(e,n,p,r),u=e.memoizedState),(l=Fn||km(e,n,l,r,y,u,h))?(m||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=h,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Bv(t,e),l=e.memoizedProps,h=e.type===e.elementType?l:Ot(e.type,l),o.props=h,m=e.pendingProps,y=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=Nt(u):(u=dt(n)?Vr:Ze.current,u=Li(e,u));var S=n.getDerivedStateFromProps;(p=typeof S=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==m||y!==u)&&Am(e,o,r,u),Fn=!1,y=e.memoizedState,o.state=y,gl(e,r,o,i);var b=e.memoizedState;l!==m||y!==b||ht.current||Fn?(typeof S=="function"&&(hh(e,n,S,r),b=e.memoizedState),(h=Fn||km(e,n,h,r,y,b,u)||!1)?(p||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,b,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,b,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=b),o.props=r,o.state=b,o.context=u,r=h):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&y===t.memoizedState||(e.flags|=1024),r=!1)}return mh(t,e,n,r,s,i)}function mh(t,e,n,r,i,s){f0(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&_m(e,n,!1),_n(t,e,s);r=e.stateNode,Vx.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=ji(e,t.child,null,s),e.child=ji(e,null,l,s)):it(t,e,l,s),e.memoizedState=r.state,i&&_m(e,n,!0),e.child}function p0(t){var e=t.stateNode;e.pendingContext?vm(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vm(t,e.context,!1),kd(t,e.containerInfo)}function Om(t,e,n,r,i){return Oi(),Td(i),e.flags|=256,it(t,e,n,r),e.child}var gh={dehydrated:null,treeContext:null,retryLane:0};function yh(t){return{baseLanes:t,cachePool:null,transitions:null}}function m0(t,e,n){var r=e.pendingProps,i=ye.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),ue(ye,i&1),t===null)return uh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nu(o,r,0,null),t=Or(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=yh(n),e.memoizedState=gh,t):Od(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return Fx(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=er(i,u),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=er(l,s):(s=Or(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?yh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=gh,r}return s=t.child,t=s.sibling,r=er(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Od(t,e){return e=nu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ta(t,e,n,r){return r!==null&&Td(r),ji(e,t.child,null,n),t=Od(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Fx(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=mc(Error(V(422))),Ta(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nu({mode:"visible",children:r.children},i,0,null),s=Or(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&ji(e,t.child,null,o),e.child.memoizedState=yh(o),e.memoizedState=gh,s);if(!(e.mode&1))return Ta(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(V(419)),r=mc(s,r,void 0),Ta(t,e,o,r)}if(l=(o&t.childLanes)!==0,ct||l){if(r=Me,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,vn(t,i),Bt(r,t,i,-1))}return Bd(),r=mc(Error(V(421))),Ta(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=Jx.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,vt=Yn(i.nextSibling),_t=e,ge=!0,Vt=null,t!==null&&(bt[St++]=un,bt[St++]=cn,bt[St++]=Fr,un=t.id,cn=t.overflow,Fr=e),e=Od(e,r.children),e.flags|=4096,e)}function jm(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),ch(t.return,e,n)}function gc(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function g0(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(it(t,e,r.children,n),r=ye.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&jm(t,n,e);else if(t.tag===19)jm(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(ue(ye,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&yl(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gc(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&yl(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gc(e,!0,n,null,s);break;case"together":gc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ba(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function _n(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ur|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(V(153));if(e.child!==null){for(t=e.child,n=er(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=er(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Mx(t,e,n){switch(e.tag){case 3:p0(e),Oi();break;case 5:Hv(e);break;case 1:dt(e.type)&&hl(e);break;case 4:kd(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;ue(pl,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(ue(ye,ye.current&1),e.flags|=128,null):n&e.child.childLanes?m0(t,e,n):(ue(ye,ye.current&1),t=_n(t,e,n),t!==null?t.sibling:null);ue(ye,ye.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return g0(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),ue(ye,ye.current),r)break;return null;case 22:case 23:return e.lanes=0,d0(t,e,n)}return _n(t,e,n)}var y0,vh,v0,_0;y0=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};vh=function(){};v0=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Pr(Xt.current);var s=null;switch(n){case"input":i=Uc(t,i),r=Uc(t,r),s=[];break;case"select":i=we({},i,{value:void 0}),r=we({},r,{value:void 0}),s=[];break;case"textarea":i=zc(t,i),r=zc(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=ul)}Wc(n,r);var o;n=null;for(h in i)if(!r.hasOwnProperty(h)&&i.hasOwnProperty(h)&&i[h]!=null)if(h==="style"){var l=i[h];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(io.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in r){var u=r[h];if(l=i!=null?i[h]:void 0,r.hasOwnProperty(h)&&u!==l&&(u!=null||l!=null))if(h==="style")if(l){for(o in l)!l.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&l[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(h,n)),n=u;else h==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,l=l?l.__html:void 0,u!=null&&l!==u&&(s=s||[]).push(h,u)):h==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(h,""+u):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(io.hasOwnProperty(h)?(u!=null&&h==="onScroll"&&de("scroll",t),s||l===u||(s=[])):(s=s||[]).push(h,u))}n&&(s=s||[]).push("style",n);var h=s;(e.updateQueue=h)&&(e.flags|=4)}};_0=function(t,e,n,r){n!==r&&(e.flags|=4)};function Is(t,e){if(!ge)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Ge(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function Ux(t,e,n){var r=e.pendingProps;switch(wd(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ge(e),null;case 1:return dt(e.type)&&cl(),Ge(e),null;case 3:return r=e.stateNode,Vi(),pe(ht),pe(Ze),Cd(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(_a(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Vt!==null&&(Ih(Vt),Vt=null))),vh(t,e),Ge(e),null;case 5:Ad(e);var i=Pr(yo.current);if(n=e.type,t!==null&&e.stateNode!=null)v0(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(V(166));return Ge(e),null}if(t=Pr(Xt.current),_a(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[Yt]=e,r[mo]=s,t=(e.mode&1)!==0,n){case"dialog":de("cancel",r),de("close",r);break;case"iframe":case"object":case"embed":de("load",r);break;case"video":case"audio":for(i=0;i<Os.length;i++)de(Os[i],r);break;case"source":de("error",r);break;case"img":case"image":case"link":de("error",r),de("load",r);break;case"details":de("toggle",r);break;case"input":Wp(r,s),de("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},de("invalid",r);break;case"textarea":Kp(r,s),de("invalid",r)}Wc(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&va(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&va(r.textContent,l,t),i=["children",""+l]):io.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&de("scroll",r)}switch(n){case"input":ca(r),qp(r,s,!0);break;case"textarea":ca(r),Gp(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=ul)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Ky(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[Yt]=e,t[mo]=r,y0(t,e,!1,!1),e.stateNode=t;e:{switch(o=qc(n,r),n){case"dialog":de("cancel",t),de("close",t),i=r;break;case"iframe":case"object":case"embed":de("load",t),i=r;break;case"video":case"audio":for(i=0;i<Os.length;i++)de(Os[i],t);i=r;break;case"source":de("error",t),i=r;break;case"img":case"image":case"link":de("error",t),de("load",t),i=r;break;case"details":de("toggle",t),i=r;break;case"input":Wp(t,r),i=Uc(t,r),de("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=we({},r,{value:void 0}),de("invalid",t);break;case"textarea":Kp(t,r),i=zc(t,r),de("invalid",t);break;default:i=r}Wc(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var u=l[s];s==="style"?Yy(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&Gy(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&so(t,u):typeof u=="number"&&so(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(io.hasOwnProperty(s)?u!=null&&s==="onScroll"&&de("scroll",t):u!=null&&sd(t,s,u,o))}switch(n){case"input":ca(t),qp(t,r,!1);break;case"textarea":ca(t),Gp(t);break;case"option":r.value!=null&&t.setAttribute("value",""+or(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?xi(t,!!r.multiple,s,!1):r.defaultValue!=null&&xi(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=ul)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Ge(e),null;case 6:if(t&&e.stateNode!=null)_0(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(V(166));if(n=Pr(yo.current),Pr(Xt.current),_a(e)){if(r=e.stateNode,n=e.memoizedProps,r[Yt]=e,(s=r.nodeValue!==n)&&(t=_t,t!==null))switch(t.tag){case 3:va(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&va(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Yt]=e,e.stateNode=r}return Ge(e),null;case 13:if(pe(ye),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ge&&vt!==null&&e.mode&1&&!(e.flags&128))Vv(),Oi(),e.flags|=98560,s=!1;else if(s=_a(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(V(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(V(317));s[Yt]=e}else Oi(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Ge(e),s=!1}else Vt!==null&&(Ih(Vt),Vt=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||ye.current&1?De===0&&(De=3):Bd())),e.updateQueue!==null&&(e.flags|=4),Ge(e),null);case 4:return Vi(),vh(t,e),t===null&&fo(e.stateNode.containerInfo),Ge(e),null;case 10:return bd(e.type._context),Ge(e),null;case 17:return dt(e.type)&&cl(),Ge(e),null;case 19:if(pe(ye),s=e.memoizedState,s===null)return Ge(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Is(s,!1);else{if(De!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=yl(t),o!==null){for(e.flags|=128,Is(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return ue(ye,ye.current&1|2),e.child}t=t.sibling}s.tail!==null&&Ie()>Mi&&(e.flags|=128,r=!0,Is(s,!1),e.lanes=4194304)}else{if(!r)if(t=yl(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Is(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ge)return Ge(e),null}else 2*Ie()-s.renderingStartTime>Mi&&n!==1073741824&&(e.flags|=128,r=!0,Is(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ie(),e.sibling=null,n=ye.current,ue(ye,r?n&1|2:n&1),e):(Ge(e),null);case 22:case 23:return Ud(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?gt&1073741824&&(Ge(e),e.subtreeFlags&6&&(e.flags|=8192)):Ge(e),null;case 24:return null;case 25:return null}throw Error(V(156,e.tag))}function Bx(t,e){switch(wd(e),e.tag){case 1:return dt(e.type)&&cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Vi(),pe(ht),pe(Ze),Cd(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ad(e),null;case 13:if(pe(ye),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(V(340));Oi()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return pe(ye),null;case 4:return Vi(),null;case 10:return bd(e.type._context),null;case 22:case 23:return Ud(),null;case 24:return null;default:return null}}var xa=!1,Je=!1,Hx=typeof WeakSet=="function"?WeakSet:Set,z=null;function wi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ee(t,e,r)}else n.current=null}function _h(t,e,n){try{n()}catch(r){Ee(t,e,r)}}var Vm=!1;function zx(t,e){if(nh=ol,t=bv(),vd(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,u=-1,h=0,p=0,m=t,y=null;t:for(;;){for(var S;m!==n||i!==0&&m.nodeType!==3||(l=o+i),m!==s||r!==0&&m.nodeType!==3||(u=o+r),m.nodeType===3&&(o+=m.nodeValue.length),(S=m.firstChild)!==null;)y=m,m=S;for(;;){if(m===t)break t;if(y===n&&++h===i&&(l=o),y===s&&++p===r&&(u=o),(S=m.nextSibling)!==null)break;m=y,y=m.parentNode}m=S}n=l===-1||u===-1?null:{start:l,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(rh={focusedElem:t,selectionRange:n},ol=!1,z=e;z!==null;)if(e=z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,z=t;else for(;z!==null;){e=z;try{var b=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var P=b.memoizedProps,L=b.memoizedState,E=e.stateNode,w=E.getSnapshotBeforeUpdate(e.elementType===e.type?P:Ot(e.type,P),L);E.__reactInternalSnapshotBeforeUpdate=w}break;case 3:var A=e.stateNode.containerInfo;A.nodeType===1?A.textContent="":A.nodeType===9&&A.documentElement&&A.removeChild(A.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(V(163))}}catch(R){Ee(e,e.return,R)}if(t=e.sibling,t!==null){t.return=e.return,z=t;break}z=e.return}return b=Vm,Vm=!1,b}function Gs(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&_h(e,n,s)}i=i.next}while(i!==r)}}function eu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function wh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function w0(t){var e=t.alternate;e!==null&&(t.alternate=null,w0(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Yt],delete e[mo],delete e[oh],delete e[Sx],delete e[Ix])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function T0(t){return t.tag===5||t.tag===3||t.tag===4}function Fm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||T0(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Th(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=ul));else if(r!==4&&(t=t.child,t!==null))for(Th(t,e,n),t=t.sibling;t!==null;)Th(t,e,n),t=t.sibling}function xh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(xh(t,e,n),t=t.sibling;t!==null;)xh(t,e,n),t=t.sibling}var Ue=null,jt=!1;function On(t,e,n){for(n=n.child;n!==null;)x0(t,e,n),n=n.sibling}function x0(t,e,n){if(Jt&&typeof Jt.onCommitFiberUnmount=="function")try{Jt.onCommitFiberUnmount(ql,n)}catch{}switch(n.tag){case 5:Je||wi(n,e);case 6:var r=Ue,i=jt;Ue=null,On(t,e,n),Ue=r,jt=i,Ue!==null&&(jt?(t=Ue,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Ue.removeChild(n.stateNode));break;case 18:Ue!==null&&(jt?(t=Ue,n=n.stateNode,t.nodeType===8?uc(t.parentNode,n):t.nodeType===1&&uc(t,n),uo(t)):uc(Ue,n.stateNode));break;case 4:r=Ue,i=jt,Ue=n.stateNode.containerInfo,jt=!0,On(t,e,n),Ue=r,jt=i;break;case 0:case 11:case 14:case 15:if(!Je&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&_h(n,e,o),i=i.next}while(i!==r)}On(t,e,n);break;case 1:if(!Je&&(wi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ee(n,e,l)}On(t,e,n);break;case 21:On(t,e,n);break;case 22:n.mode&1?(Je=(r=Je)||n.memoizedState!==null,On(t,e,n),Je=r):On(t,e,n);break;default:On(t,e,n)}}function Mm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Hx),e.forEach(function(r){var i=Xx.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Lt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:Ue=l.stateNode,jt=!1;break e;case 3:Ue=l.stateNode.containerInfo,jt=!0;break e;case 4:Ue=l.stateNode.containerInfo,jt=!0;break e}l=l.return}if(Ue===null)throw Error(V(160));x0(s,o,i),Ue=null,jt=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(h){Ee(i,e,h)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)E0(e,t),e=e.sibling}function E0(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Lt(e,t),Kt(t),r&4){try{Gs(3,t,t.return),eu(3,t)}catch(P){Ee(t,t.return,P)}try{Gs(5,t,t.return)}catch(P){Ee(t,t.return,P)}}break;case 1:Lt(e,t),Kt(t),r&512&&n!==null&&wi(n,n.return);break;case 5:if(Lt(e,t),Kt(t),r&512&&n!==null&&wi(n,n.return),t.flags&32){var i=t.stateNode;try{so(i,"")}catch(P){Ee(t,t.return,P)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Wy(i,s),qc(l,o);var h=qc(l,s);for(o=0;o<u.length;o+=2){var p=u[o],m=u[o+1];p==="style"?Yy(i,m):p==="dangerouslySetInnerHTML"?Gy(i,m):p==="children"?so(i,m):sd(i,p,m,h)}switch(l){case"input":Bc(i,s);break;case"textarea":qy(i,s);break;case"select":var y=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var S=s.value;S!=null?xi(i,!!s.multiple,S,!1):y!==!!s.multiple&&(s.defaultValue!=null?xi(i,!!s.multiple,s.defaultValue,!0):xi(i,!!s.multiple,s.multiple?[]:"",!1))}i[mo]=s}catch(P){Ee(t,t.return,P)}}break;case 6:if(Lt(e,t),Kt(t),r&4){if(t.stateNode===null)throw Error(V(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(P){Ee(t,t.return,P)}}break;case 3:if(Lt(e,t),Kt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{uo(e.containerInfo)}catch(P){Ee(t,t.return,P)}break;case 4:Lt(e,t),Kt(t);break;case 13:Lt(e,t),Kt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Fd=Ie())),r&4&&Mm(t);break;case 22:if(p=n!==null&&n.memoizedState!==null,t.mode&1?(Je=(h=Je)||p,Lt(e,t),Je=h):Lt(e,t),Kt(t),r&8192){if(h=t.memoizedState!==null,(t.stateNode.isHidden=h)&&!p&&t.mode&1)for(z=t,p=t.child;p!==null;){for(m=z=p;z!==null;){switch(y=z,S=y.child,y.tag){case 0:case 11:case 14:case 15:Gs(4,y,y.return);break;case 1:wi(y,y.return);var b=y.stateNode;if(typeof b.componentWillUnmount=="function"){r=y,n=y.return;try{e=r,b.props=e.memoizedProps,b.state=e.memoizedState,b.componentWillUnmount()}catch(P){Ee(r,n,P)}}break;case 5:wi(y,y.return);break;case 22:if(y.memoizedState!==null){Bm(m);continue}}S!==null?(S.return=y,z=S):Bm(m)}p=p.sibling}e:for(p=null,m=t;;){if(m.tag===5){if(p===null){p=m;try{i=m.stateNode,h?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=m.stateNode,u=m.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,l.style.display=Qy("display",o))}catch(P){Ee(t,t.return,P)}}}else if(m.tag===6){if(p===null)try{m.stateNode.nodeValue=h?"":m.memoizedProps}catch(P){Ee(t,t.return,P)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;p===m&&(p=null),m=m.return}p===m&&(p=null),m.sibling.return=m.return,m=m.sibling}}break;case 19:Lt(e,t),Kt(t),r&4&&Mm(t);break;case 21:break;default:Lt(e,t),Kt(t)}}function Kt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(T0(n)){var r=n;break e}n=n.return}throw Error(V(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(so(i,""),r.flags&=-33);var s=Fm(t);xh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Fm(t);Th(t,l,o);break;default:throw Error(V(161))}}catch(u){Ee(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function $x(t,e,n){z=t,b0(t)}function b0(t,e,n){for(var r=(t.mode&1)!==0;z!==null;){var i=z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||xa;if(!o){var l=i.alternate,u=l!==null&&l.memoizedState!==null||Je;l=xa;var h=Je;if(xa=o,(Je=u)&&!h)for(z=i;z!==null;)o=z,u=o.child,o.tag===22&&o.memoizedState!==null?Hm(i):u!==null?(u.return=o,z=u):Hm(i);for(;s!==null;)z=s,b0(s),s=s.sibling;z=i,xa=l,Je=h}Um(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,z=s):Um(t)}}function Um(t){for(;z!==null;){var e=z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Je||eu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Je)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Ot(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&bm(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}bm(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var h=e.alternate;if(h!==null){var p=h.memoizedState;if(p!==null){var m=p.dehydrated;m!==null&&uo(m)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(V(163))}Je||e.flags&512&&wh(e)}catch(y){Ee(e,e.return,y)}}if(e===t){z=null;break}if(n=e.sibling,n!==null){n.return=e.return,z=n;break}z=e.return}}function Bm(t){for(;z!==null;){var e=z;if(e===t){z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,z=n;break}z=e.return}}function Hm(t){for(;z!==null;){var e=z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eu(4,e)}catch(u){Ee(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Ee(e,i,u)}}var s=e.return;try{wh(e)}catch(u){Ee(e,s,u)}break;case 5:var o=e.return;try{wh(e)}catch(u){Ee(e,o,u)}}}catch(u){Ee(e,e.return,u)}if(e===t){z=null;break}var l=e.sibling;if(l!==null){l.return=e.return,z=l;break}z=e.return}}var Wx=Math.ceil,wl=bn.ReactCurrentDispatcher,jd=bn.ReactCurrentOwner,Ct=bn.ReactCurrentBatchConfig,se=0,Me=null,Ae=null,ze=0,gt=0,Ti=mr(0),De=0,To=null,Ur=0,tu=0,Vd=0,Qs=null,ut=null,Fd=0,Mi=1/0,on=null,Tl=!1,Eh=null,Xn=null,Ea=!1,Wn=null,xl=0,Ys=0,bh=null,Ha=-1,za=0;function st(){return se&6?Ie():Ha!==-1?Ha:Ha=Ie()}function Zn(t){return t.mode&1?se&2&&ze!==0?ze&-ze:Ax.transition!==null?(za===0&&(za=lv()),za):(t=ae,t!==0||(t=window.event,t=t===void 0?16:mv(t.type)),t):1}function Bt(t,e,n,r){if(50<Ys)throw Ys=0,bh=null,Error(V(185));Do(t,n,r),(!(se&2)||t!==Me)&&(t===Me&&(!(se&2)&&(tu|=n),De===4&&Un(t,ze)),ft(t,r),n===1&&se===0&&!(e.mode&1)&&(Mi=Ie()+500,Jl&&gr()))}function ft(t,e){var n=t.callbackNode;A1(t,e);var r=sl(t,t===Me?ze:0);if(r===0)n!==null&&Jp(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Jp(n),e===1)t.tag===0?kx(zm.bind(null,t)):Lv(zm.bind(null,t)),Ex(function(){!(se&6)&&gr()}),n=null;else{switch(uv(r)){case 1:n=cd;break;case 4:n=ov;break;case 16:n=il;break;case 536870912:n=av;break;default:n=il}n=R0(n,S0.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function S0(t,e){if(Ha=-1,za=0,se&6)throw Error(V(327));var n=t.callbackNode;if(ki()&&t.callbackNode!==n)return null;var r=sl(t,t===Me?ze:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=El(t,r);else{e=r;var i=se;se|=2;var s=k0();(Me!==t||ze!==e)&&(on=null,Mi=Ie()+500,Lr(t,e));do try{Gx();break}catch(l){I0(t,l)}while(1);Ed(),wl.current=s,se=i,Ae!==null?e=0:(Me=null,ze=0,e=De)}if(e!==0){if(e===2&&(i=Jc(t),i!==0&&(r=i,e=Sh(t,i))),e===1)throw n=To,Lr(t,0),Un(t,r),ft(t,Ie()),n;if(e===6)Un(t,r);else{if(i=t.current.alternate,!(r&30)&&!qx(i)&&(e=El(t,r),e===2&&(s=Jc(t),s!==0&&(r=s,e=Sh(t,s))),e===1))throw n=To,Lr(t,0),Un(t,r),ft(t,Ie()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(V(345));case 2:kr(t,ut,on);break;case 3:if(Un(t,r),(r&130023424)===r&&(e=Fd+500-Ie(),10<e)){if(sl(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){st(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=sh(kr.bind(null,t,ut,on),e);break}kr(t,ut,on);break;case 4:if(Un(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Ie()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*Wx(r/1960))-r,10<r){t.timeoutHandle=sh(kr.bind(null,t,ut,on),r);break}kr(t,ut,on);break;case 5:kr(t,ut,on);break;default:throw Error(V(329))}}}return ft(t,Ie()),t.callbackNode===n?S0.bind(null,t):null}function Sh(t,e){var n=Qs;return t.current.memoizedState.isDehydrated&&(Lr(t,e).flags|=256),t=El(t,e),t!==2&&(e=ut,ut=n,e!==null&&Ih(e)),t}function Ih(t){ut===null?ut=t:ut.push.apply(ut,t)}function qx(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!$t(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Un(t,e){for(e&=~Vd,e&=~tu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Ut(e),r=1<<n;t[n]=-1,e&=~r}}function zm(t){if(se&6)throw Error(V(327));ki();var e=sl(t,0);if(!(e&1))return ft(t,Ie()),null;var n=El(t,e);if(t.tag!==0&&n===2){var r=Jc(t);r!==0&&(e=r,n=Sh(t,r))}if(n===1)throw n=To,Lr(t,0),Un(t,e),ft(t,Ie()),n;if(n===6)throw Error(V(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,kr(t,ut,on),ft(t,Ie()),null}function Md(t,e){var n=se;se|=1;try{return t(e)}finally{se=n,se===0&&(Mi=Ie()+500,Jl&&gr())}}function Br(t){Wn!==null&&Wn.tag===0&&!(se&6)&&ki();var e=se;se|=1;var n=Ct.transition,r=ae;try{if(Ct.transition=null,ae=1,t)return t()}finally{ae=r,Ct.transition=n,se=e,!(se&6)&&gr()}}function Ud(){gt=Ti.current,pe(Ti)}function Lr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,xx(n)),Ae!==null)for(n=Ae.return;n!==null;){var r=n;switch(wd(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&cl();break;case 3:Vi(),pe(ht),pe(Ze),Cd();break;case 5:Ad(r);break;case 4:Vi();break;case 13:pe(ye);break;case 19:pe(ye);break;case 10:bd(r.type._context);break;case 22:case 23:Ud()}n=n.return}if(Me=t,Ae=t=er(t.current,null),ze=gt=e,De=0,To=null,Vd=tu=Ur=0,ut=Qs=null,Nr!==null){for(e=0;e<Nr.length;e++)if(n=Nr[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Nr=null}return t}function I0(t,e){do{var n=Ae;try{if(Ed(),Ma.current=_l,vl){for(var r=_e.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}vl=!1}if(Mr=0,Ve=Pe=_e=null,Ks=!1,vo=0,jd.current=null,n===null||n.return===null){De=1,To=e,Ae=null;break}e:{var s=t,o=n.return,l=n,u=e;if(e=ze,l.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var h=u,p=l,m=p.tag;if(!(p.mode&1)&&(m===0||m===11||m===15)){var y=p.alternate;y?(p.updateQueue=y.updateQueue,p.memoizedState=y.memoizedState,p.lanes=y.lanes):(p.updateQueue=null,p.memoizedState=null)}var S=Nm(o);if(S!==null){S.flags&=-257,Pm(S,o,l,s,e),S.mode&1&&Cm(s,h,e),e=S,u=h;var b=e.updateQueue;if(b===null){var P=new Set;P.add(u),e.updateQueue=P}else b.add(u);break e}else{if(!(e&1)){Cm(s,h,e),Bd();break e}u=Error(V(426))}}else if(ge&&l.mode&1){var L=Nm(o);if(L!==null){!(L.flags&65536)&&(L.flags|=256),Pm(L,o,l,s,e),Td(Fi(u,l));break e}}s=u=Fi(u,l),De!==4&&(De=2),Qs===null?Qs=[s]:Qs.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var E=u0(s,u,e);Em(s,E);break e;case 1:l=u;var w=s.type,A=s.stateNode;if(!(s.flags&128)&&(typeof w.getDerivedStateFromError=="function"||A!==null&&typeof A.componentDidCatch=="function"&&(Xn===null||!Xn.has(A)))){s.flags|=65536,e&=-e,s.lanes|=e;var R=c0(s,l,e);Em(s,R);break e}}s=s.return}while(s!==null)}C0(n)}catch(F){e=F,Ae===n&&n!==null&&(Ae=n=n.return);continue}break}while(1)}function k0(){var t=wl.current;return wl.current=_l,t===null?_l:t}function Bd(){(De===0||De===3||De===2)&&(De=4),Me===null||!(Ur&268435455)&&!(tu&268435455)||Un(Me,ze)}function El(t,e){var n=se;se|=2;var r=k0();(Me!==t||ze!==e)&&(on=null,Lr(t,e));do try{Kx();break}catch(i){I0(t,i)}while(1);if(Ed(),se=n,wl.current=r,Ae!==null)throw Error(V(261));return Me=null,ze=0,De}function Kx(){for(;Ae!==null;)A0(Ae)}function Gx(){for(;Ae!==null&&!_1();)A0(Ae)}function A0(t){var e=P0(t.alternate,t,gt);t.memoizedProps=t.pendingProps,e===null?C0(t):Ae=e,jd.current=null}function C0(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Bx(n,e),n!==null){n.flags&=32767,Ae=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Ae=null;return}}else if(n=Ux(n,e,gt),n!==null){Ae=n;return}if(e=e.sibling,e!==null){Ae=e;return}Ae=e=t}while(e!==null);De===0&&(De=5)}function kr(t,e,n){var r=ae,i=Ct.transition;try{Ct.transition=null,ae=1,Qx(t,e,n,r)}finally{Ct.transition=i,ae=r}return null}function Qx(t,e,n,r){do ki();while(Wn!==null);if(se&6)throw Error(V(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(V(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(C1(t,s),t===Me&&(Ae=Me=null,ze=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ea||(Ea=!0,R0(il,function(){return ki(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ct.transition,Ct.transition=null;var o=ae;ae=1;var l=se;se|=4,jd.current=null,zx(t,n),E0(n,t),mx(rh),ol=!!nh,rh=nh=null,t.current=n,$x(n),w1(),se=l,ae=o,Ct.transition=s}else t.current=n;if(Ea&&(Ea=!1,Wn=t,xl=i),s=t.pendingLanes,s===0&&(Xn=null),E1(n.stateNode),ft(t,Ie()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Tl)throw Tl=!1,t=Eh,Eh=null,t;return xl&1&&t.tag!==0&&ki(),s=t.pendingLanes,s&1?t===bh?Ys++:(Ys=0,bh=t):Ys=0,gr(),null}function ki(){if(Wn!==null){var t=uv(xl),e=Ct.transition,n=ae;try{if(Ct.transition=null,ae=16>t?16:t,Wn===null)var r=!1;else{if(t=Wn,Wn=null,xl=0,se&6)throw Error(V(331));var i=se;for(se|=4,z=t.current;z!==null;){var s=z,o=s.child;if(z.flags&16){var l=s.deletions;if(l!==null){for(var u=0;u<l.length;u++){var h=l[u];for(z=h;z!==null;){var p=z;switch(p.tag){case 0:case 11:case 15:Gs(8,p,s)}var m=p.child;if(m!==null)m.return=p,z=m;else for(;z!==null;){p=z;var y=p.sibling,S=p.return;if(w0(p),p===h){z=null;break}if(y!==null){y.return=S,z=y;break}z=S}}}var b=s.alternate;if(b!==null){var P=b.child;if(P!==null){b.child=null;do{var L=P.sibling;P.sibling=null,P=L}while(P!==null)}}z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,z=o;else e:for(;z!==null;){if(s=z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Gs(9,s,s.return)}var E=s.sibling;if(E!==null){E.return=s.return,z=E;break e}z=s.return}}var w=t.current;for(z=w;z!==null;){o=z;var A=o.child;if(o.subtreeFlags&2064&&A!==null)A.return=o,z=A;else e:for(o=w;z!==null;){if(l=z,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:eu(9,l)}}catch(F){Ee(l,l.return,F)}if(l===o){z=null;break e}var R=l.sibling;if(R!==null){R.return=l.return,z=R;break e}z=l.return}}if(se=i,gr(),Jt&&typeof Jt.onPostCommitFiberRoot=="function")try{Jt.onPostCommitFiberRoot(ql,t)}catch{}r=!0}return r}finally{ae=n,Ct.transition=e}}return!1}function $m(t,e,n){e=Fi(n,e),e=u0(t,e,1),t=Jn(t,e,1),e=st(),t!==null&&(Do(t,1,e),ft(t,e))}function Ee(t,e,n){if(t.tag===3)$m(t,t,n);else for(;e!==null;){if(e.tag===3){$m(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xn===null||!Xn.has(r))){t=Fi(n,t),t=c0(e,t,1),e=Jn(e,t,1),t=st(),e!==null&&(Do(e,1,t),ft(e,t));break}}e=e.return}}function Yx(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=st(),t.pingedLanes|=t.suspendedLanes&n,Me===t&&(ze&n)===n&&(De===4||De===3&&(ze&130023424)===ze&&500>Ie()-Fd?Lr(t,0):Vd|=n),ft(t,e)}function N0(t,e){e===0&&(t.mode&1?(e=fa,fa<<=1,!(fa&130023424)&&(fa=4194304)):e=1);var n=st();t=vn(t,e),t!==null&&(Do(t,e,n),ft(t,n))}function Jx(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),N0(t,n)}function Xx(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(V(314))}r!==null&&r.delete(e),N0(t,n)}var P0;P0=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ht.current)ct=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return ct=!1,Mx(t,e,n);ct=!!(t.flags&131072)}else ct=!1,ge&&e.flags&1048576&&Ov(e,fl,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ba(t,e),t=e.pendingProps;var i=Li(e,Ze.current);Ii(e,n),i=Pd(null,e,r,t,i,n);var s=Rd();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,dt(r)?(s=!0,hl(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Id(e),i.updater=Zl,e.stateNode=i,i._reactInternals=e,dh(e,r,t,n),e=mh(null,e,r,!0,s,n)):(e.tag=0,ge&&s&&_d(e),it(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ba(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=eE(r),t=Ot(r,t),i){case 0:e=ph(null,e,r,t,n);break e;case 1:e=Lm(null,e,r,t,n);break e;case 11:e=Rm(null,e,r,t,n);break e;case 14:e=Dm(null,e,r,Ot(r.type,t),n);break e}throw Error(V(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),ph(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),Lm(t,e,r,i,n);case 3:e:{if(p0(e),t===null)throw Error(V(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Bv(t,e),gl(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Fi(Error(V(423)),e),e=Om(t,e,r,n,i);break e}else if(r!==i){i=Fi(Error(V(424)),e),e=Om(t,e,r,n,i);break e}else for(vt=Yn(e.stateNode.containerInfo.firstChild),_t=e,ge=!0,Vt=null,n=Mv(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Oi(),r===i){e=_n(t,e,n);break e}it(t,e,r,n)}e=e.child}return e;case 5:return Hv(e),t===null&&uh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ih(r,i)?o=null:s!==null&&ih(r,s)&&(e.flags|=32),f0(t,e),it(t,e,o,n),e.child;case 6:return t===null&&uh(e),null;case 13:return m0(t,e,n);case 4:return kd(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ji(e,null,r,n):it(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),Rm(t,e,r,i,n);case 7:return it(t,e,e.pendingProps,n),e.child;case 8:return it(t,e,e.pendingProps.children,n),e.child;case 12:return it(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,ue(pl,r._currentValue),r._currentValue=o,s!==null)if($t(s.value,o)){if(s.children===i.children&&!ht.current){e=_n(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var u=l.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=fn(-1,n&-n),u.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var p=h.pending;p===null?u.next=u:(u.next=p.next,p.next=u),h.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),ch(s.return,n,e),l.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(V(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),ch(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}it(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,Ii(e,n),i=Nt(i),r=r(i),e.flags|=1,it(t,e,r,n),e.child;case 14:return r=e.type,i=Ot(r,e.pendingProps),i=Ot(r.type,i),Dm(t,e,r,i,n);case 15:return h0(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Ot(r,i),Ba(t,e),e.tag=1,dt(r)?(t=!0,hl(e)):t=!1,Ii(e,n),l0(e,r,i),dh(e,r,i,n),mh(null,e,r,!0,t,n);case 19:return g0(t,e,n);case 22:return d0(t,e,n)}throw Error(V(156,e.tag))};function R0(t,e){return sv(t,e)}function Zx(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function At(t,e,n,r){return new Zx(t,e,n,r)}function Hd(t){return t=t.prototype,!(!t||!t.isReactComponent)}function eE(t){if(typeof t=="function")return Hd(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ad)return 11;if(t===ld)return 14}return 2}function er(t,e){var n=t.alternate;return n===null?(n=At(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $a(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Hd(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case hi:return Or(n.children,i,s,e);case od:o=8,i|=8;break;case jc:return t=At(12,n,e,i|2),t.elementType=jc,t.lanes=s,t;case Vc:return t=At(13,n,e,i),t.elementType=Vc,t.lanes=s,t;case Fc:return t=At(19,n,e,i),t.elementType=Fc,t.lanes=s,t;case Hy:return nu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Uy:o=10;break e;case By:o=9;break e;case ad:o=11;break e;case ld:o=14;break e;case Vn:o=16,r=null;break e}throw Error(V(130,t==null?t:typeof t,""))}return e=At(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Or(t,e,n,r){return t=At(7,t,r,e),t.lanes=n,t}function nu(t,e,n,r){return t=At(22,t,r,e),t.elementType=Hy,t.lanes=n,t.stateNode={isHidden:!1},t}function yc(t,e,n){return t=At(6,t,null,e),t.lanes=n,t}function vc(t,e,n){return e=At(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function tE(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xu(0),this.expirationTimes=Xu(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xu(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function zd(t,e,n,r,i,s,o,l,u){return t=new tE(t,e,n,l,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=At(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Id(s),t}function nE(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:ci,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function D0(t){if(!t)return ar;t=t._reactInternals;e:{if(Yr(t)!==t||t.tag!==1)throw Error(V(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(dt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(V(171))}if(t.tag===1){var n=t.type;if(dt(n))return Dv(t,n,e)}return e}function L0(t,e,n,r,i,s,o,l,u){return t=zd(n,r,!0,t,i,s,o,l,u),t.context=D0(null),n=t.current,r=st(),i=Zn(n),s=fn(r,i),s.callback=e??null,Jn(n,s,i),t.current.lanes=i,Do(t,i,r),ft(t,r),t}function ru(t,e,n,r){var i=e.current,s=st(),o=Zn(i);return n=D0(n),e.context===null?e.context=n:e.pendingContext=n,e=fn(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Jn(i,e,o),t!==null&&(Bt(t,i,o,s),Fa(t,i,o)),o}function bl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Wm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function $d(t,e){Wm(t,e),(t=t.alternate)&&Wm(t,e)}function rE(){return null}var O0=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wd(t){this._internalRoot=t}iu.prototype.render=Wd.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(V(409));ru(t,e,null,null)};iu.prototype.unmount=Wd.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Br(function(){ru(null,t,null,null)}),e[yn]=null}};function iu(t){this._internalRoot=t}iu.prototype.unstable_scheduleHydration=function(t){if(t){var e=dv();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Mn.length&&e!==0&&e<Mn[n].priority;n++);Mn.splice(n,0,t),n===0&&pv(t)}};function qd(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function su(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function qm(){}function iE(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var h=bl(o);s.call(h)}}var o=L0(e,r,t,0,null,!1,!1,"",qm);return t._reactRootContainer=o,t[yn]=o.current,fo(t.nodeType===8?t.parentNode:t),Br(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var h=bl(u);l.call(h)}}var u=zd(t,0,!1,null,null,!1,!1,"",qm);return t._reactRootContainer=u,t[yn]=u.current,fo(t.nodeType===8?t.parentNode:t),Br(function(){ru(e,u,n,r)}),u}function ou(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var u=bl(o);l.call(u)}}ru(e,o,t,i)}else o=iE(n,e,t,i,r);return bl(o)}cv=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Ls(e.pendingLanes);n!==0&&(hd(e,n|1),ft(e,Ie()),!(se&6)&&(Mi=Ie()+500,gr()))}break;case 13:Br(function(){var r=vn(t,1);if(r!==null){var i=st();Bt(r,t,1,i)}}),$d(t,1)}};dd=function(t){if(t.tag===13){var e=vn(t,134217728);if(e!==null){var n=st();Bt(e,t,134217728,n)}$d(t,134217728)}};hv=function(t){if(t.tag===13){var e=Zn(t),n=vn(t,e);if(n!==null){var r=st();Bt(n,t,e,r)}$d(t,e)}};dv=function(){return ae};fv=function(t,e){var n=ae;try{return ae=t,e()}finally{ae=n}};Gc=function(t,e,n){switch(e){case"input":if(Bc(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Yl(r);if(!i)throw Error(V(90));$y(r),Bc(r,i)}}}break;case"textarea":qy(t,n);break;case"select":e=n.value,e!=null&&xi(t,!!n.multiple,e,!1)}};Zy=Md;ev=Br;var sE={usingClientEntryPoint:!1,Events:[Oo,mi,Yl,Jy,Xy,Md]},ks={findFiberByHostInstance:Cr,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},oE={bundleType:ks.bundleType,version:ks.version,rendererPackageName:ks.rendererPackageName,rendererConfig:ks.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:bn.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=rv(t),t===null?null:t.stateNode},findFiberByHostInstance:ks.findFiberByHostInstance||rE,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ba=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ba.isDisabled&&ba.supportsFiber)try{ql=ba.inject(oE),Jt=ba}catch{}}Tt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sE;Tt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qd(e))throw Error(V(200));return nE(t,e,null,n)};Tt.createRoot=function(t,e){if(!qd(t))throw Error(V(299));var n=!1,r="",i=O0;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=zd(t,1,!1,null,null,n,!1,r,i),t[yn]=e.current,fo(t.nodeType===8?t.parentNode:t),new Wd(e)};Tt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(V(188)):(t=Object.keys(t).join(","),Error(V(268,t)));return t=rv(e),t=t===null?null:t.stateNode,t};Tt.flushSync=function(t){return Br(t)};Tt.hydrate=function(t,e,n){if(!su(e))throw Error(V(200));return ou(null,t,e,!0,n)};Tt.hydrateRoot=function(t,e,n){if(!qd(t))throw Error(V(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=O0;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=L0(e,null,t,1,n??null,i,!1,s,o),t[yn]=e.current,fo(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new iu(e)};Tt.render=function(t,e,n){if(!su(e))throw Error(V(200));return ou(null,t,e,!1,n)};Tt.unmountComponentAtNode=function(t){if(!su(t))throw Error(V(40));return t._reactRootContainer?(Br(function(){ou(null,null,t,!1,function(){t._reactRootContainer=null,t[yn]=null})}),!0):!1};Tt.unstable_batchedUpdates=Md;Tt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!su(n))throw Error(V(200));if(t==null||t._reactInternals===void 0)throw Error(V(38));return ou(t,e,n,!1,r)};Tt.version="18.3.1-next-f1338f8080-20240426";function j0(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(j0)}catch(t){console.error(t)}}j0(),jy.exports=Tt;var aE=jy.exports,Km=aE;Lc.createRoot=Km.createRoot,Lc.hydrateRoot=Km.hydrateRoot;const lE=()=>{};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V0=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},uE=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},F0={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,u=i+2<t.length,h=u?t[i+2]:0,p=s>>2,m=(s&3)<<4|l>>4;let y=(l&15)<<2|h>>6,S=h&63;u||(S=64,o||(y=64)),r.push(n[p],n[m],n[y],n[S])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(V0(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):uE(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const h=i<t.length?n[t.charAt(i)]:64;++i;const m=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||h==null||m==null)throw new cE;const y=s<<2|l>>4;if(r.push(y),h!==64){const S=l<<4&240|h>>2;if(r.push(S),m!==64){const b=h<<6&192|m;r.push(b)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cE extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const hE=function(t){const e=V0(t);return F0.encodeByteArray(e,!0)},Sl=function(t){return hE(t).replace(/\./g,"")},M0=function(t){try{return F0.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dE(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fE=()=>dE().__FIREBASE_DEFAULTS__,pE=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},mE=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&M0(t[1]);return e&&JSON.parse(e)},au=()=>{try{return lE()||fE()||pE()||mE()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},U0=t=>{var e,n;return(n=(e=au())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},gE=t=>{const e=U0(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},B0=()=>{var t;return(t=au())==null?void 0:t.config},H0=t=>{var e;return(e=au())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yE{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yi(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function z0(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t},l="";return[Sl(JSON.stringify(n)),Sl(JSON.stringify(o)),l].join(".")}const Js={};function _E(){const t={prod:[],emulator:[]};for(const e of Object.keys(Js))Js[e]?t.emulator.push(e):t.prod.push(e);return t}function wE(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let Gm=!1;function $0(t,e){if(typeof window>"u"||typeof document>"u"||!Yi(window.location.host)||Js[t]===e||Js[t]||Gm)return;Js[t]=e;function n(y){return`__firebase__banner__${y}`}const r="__firebase__banner",s=_E().prod.length>0;function o(){const y=document.getElementById(r);y&&y.remove()}function l(y){y.style.display="flex",y.style.background="#7faaf0",y.style.position="fixed",y.style.bottom="5px",y.style.left="5px",y.style.padding=".5em",y.style.borderRadius="5px",y.style.alignItems="center"}function u(y,S){y.setAttribute("width","24"),y.setAttribute("id",S),y.setAttribute("height","24"),y.setAttribute("viewBox","0 0 24 24"),y.setAttribute("fill","none"),y.style.marginLeft="-6px"}function h(){const y=document.createElement("span");return y.style.cursor="pointer",y.style.marginLeft="16px",y.style.fontSize="24px",y.innerHTML=" &times;",y.onclick=()=>{Gm=!0,o()},y}function p(y,S){y.setAttribute("id",S),y.innerText="Learn more",y.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",y.setAttribute("target","__blank"),y.style.paddingLeft="5px",y.style.textDecoration="underline"}function m(){const y=wE(r),S=n("text"),b=document.getElementById(S)||document.createElement("span"),P=n("learnmore"),L=document.getElementById(P)||document.createElement("a"),E=n("preprendIcon"),w=document.getElementById(E)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(y.created){const A=y.element;l(A),p(L,P);const R=h();u(w,E),A.append(w,b,L,R),document.body.appendChild(A)}s?(b.innerText="Preview backend disconnected.",w.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(w.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,b.innerText="Preview backend running in this workspace."),b.setAttribute("id",S)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",m):m()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function et(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function TE(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(et())}function xE(){var e;const t=(e=au())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function EE(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function bE(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function SE(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function IE(){const t=et();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function kE(){return!xE()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function AE(){try{return typeof indexedDB=="object"}catch{return!1}}function CE(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const NE="FirebaseError";class Sn extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=NE,Object.setPrototypeOf(this,Sn.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Vo.prototype.create)}}class Vo{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?PE(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Sn(i,l,r)}}function PE(t,e){return t.replace(RE,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const RE=/\{\$([^}]+)}/g;function DE(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Hr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Qm(s)&&Qm(o)){if(!Hr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Qm(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function js(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function Vs(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function LE(t,e){const n=new OE(t,e);return n.subscribe.bind(n)}class OE{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");jE(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=_c),i.error===void 0&&(i.error=_c),i.complete===void 0&&(i.complete=_c);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function jE(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function _c(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pt(t){return t&&t._delegate?t._delegate:t}class zr{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ar="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VE{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new yE;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(ME(e))try{this.getOrInitializeService({instanceIdentifier:Ar})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=Ar){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Ar){return this.instances.has(e)}getOptions(e=Ar){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:FE(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Ar){return this.component?this.component.multipleInstances?e:Ar:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function FE(t){return t===Ar?void 0:t}function ME(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new VE(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var te;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(te||(te={}));const BE={debug:te.DEBUG,verbose:te.VERBOSE,info:te.INFO,warn:te.WARN,error:te.ERROR,silent:te.SILENT},HE=te.INFO,zE={[te.DEBUG]:"log",[te.VERBOSE]:"log",[te.INFO]:"info",[te.WARN]:"warn",[te.ERROR]:"error"},$E=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zE[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Kd{constructor(e){this.name=e,this._logLevel=HE,this._logHandler=$E,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in te))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?BE[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,te.DEBUG,...e),this._logHandler(this,te.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,te.VERBOSE,...e),this._logHandler(this,te.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,te.INFO,...e),this._logHandler(this,te.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,te.WARN,...e),this._logHandler(this,te.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,te.ERROR,...e),this._logHandler(this,te.ERROR,...e)}}const WE=(t,e)=>e.some(n=>t instanceof n);let Ym,Jm;function qE(){return Ym||(Ym=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function KE(){return Jm||(Jm=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const W0=new WeakMap,kh=new WeakMap,q0=new WeakMap,wc=new WeakMap,Gd=new WeakMap;function GE(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tr(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&W0.set(n,t)}).catch(()=>{}),Gd.set(e,t),e}function QE(t){if(kh.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});kh.set(t,e)}let Ah={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return kh.get(t);if(e==="objectStoreNames")return t.objectStoreNames||q0.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tr(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function YE(t){Ah=t(Ah)}function JE(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Tc(this),e,...n);return q0.set(r,e.sort?e.sort():[e]),tr(r)}:KE().includes(t)?function(...e){return t.apply(Tc(this),e),tr(W0.get(this))}:function(...e){return tr(t.apply(Tc(this),e))}}function XE(t){return typeof t=="function"?JE(t):(t instanceof IDBTransaction&&QE(t),WE(t,qE())?new Proxy(t,Ah):t)}function tr(t){if(t instanceof IDBRequest)return GE(t);if(wc.has(t))return wc.get(t);const e=XE(t);return e!==t&&(wc.set(t,e),Gd.set(e,t)),e}const Tc=t=>Gd.get(t);function ZE(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=tr(o);return r&&o.addEventListener("upgradeneeded",u=>{r(tr(o.result),u.oldVersion,u.newVersion,tr(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),l.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",h=>i(h.oldVersion,h.newVersion,h))}).catch(()=>{}),l}const eb=["get","getKey","getAll","getAllKeys","count"],tb=["put","add","delete","clear"],xc=new Map;function Xm(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(xc.get(e))return xc.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=tb.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||eb.includes(n)))return;const s=async function(o,...l){const u=this.transaction(o,i?"readwrite":"readonly");let h=u.store;return r&&(h=h.index(l.shift())),(await Promise.all([h[n](...l),i&&u.done]))[0]};return xc.set(e,s),s}YE(t=>({...t,get:(e,n,r)=>Xm(e,n)||t.get(e,n,r),has:(e,n)=>!!Xm(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(rb(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function rb(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Ch="@firebase/app",Zm="0.14.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wn=new Kd("@firebase/app"),ib="@firebase/app-compat",sb="@firebase/analytics-compat",ob="@firebase/analytics",ab="@firebase/app-check-compat",lb="@firebase/app-check",ub="@firebase/auth",cb="@firebase/auth-compat",hb="@firebase/database",db="@firebase/data-connect",fb="@firebase/database-compat",pb="@firebase/functions",mb="@firebase/functions-compat",gb="@firebase/installations",yb="@firebase/installations-compat",vb="@firebase/messaging",_b="@firebase/messaging-compat",wb="@firebase/performance",Tb="@firebase/performance-compat",xb="@firebase/remote-config",Eb="@firebase/remote-config-compat",bb="@firebase/storage",Sb="@firebase/storage-compat",Ib="@firebase/firestore",kb="@firebase/ai",Ab="@firebase/firestore-compat",Cb="firebase",Nb="12.9.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nh="[DEFAULT]",Pb={[Ch]:"fire-core",[ib]:"fire-core-compat",[ob]:"fire-analytics",[sb]:"fire-analytics-compat",[lb]:"fire-app-check",[ab]:"fire-app-check-compat",[ub]:"fire-auth",[cb]:"fire-auth-compat",[hb]:"fire-rtdb",[db]:"fire-data-connect",[fb]:"fire-rtdb-compat",[pb]:"fire-fn",[mb]:"fire-fn-compat",[gb]:"fire-iid",[yb]:"fire-iid-compat",[vb]:"fire-fcm",[_b]:"fire-fcm-compat",[wb]:"fire-perf",[Tb]:"fire-perf-compat",[xb]:"fire-rc",[Eb]:"fire-rc-compat",[bb]:"fire-gcs",[Sb]:"fire-gcs-compat",[Ib]:"fire-fst",[Ab]:"fire-fst-compat",[kb]:"fire-vertex","fire-js":"fire-js",[Cb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il=new Map,Rb=new Map,Ph=new Map;function eg(t,e){try{t.container.addComponent(e)}catch(n){wn.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ui(t){const e=t.name;if(Ph.has(e))return wn.debug(`There were multiple attempts to register component ${e}.`),!1;Ph.set(e,t);for(const n of Il.values())eg(n,t);for(const n of Rb.values())eg(n,t);return!0}function Qd(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function yt(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Db={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nr=new Vo("app","Firebase",Db);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lb{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new zr("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nr.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ji=Nb;function K0(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:Nh,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw nr.create("bad-app-name",{appName:String(i)});if(n||(n=B0()),!n)throw nr.create("no-options");const s=Il.get(i);if(s){if(Hr(n,s.options)&&Hr(r,s.config))return s;throw nr.create("duplicate-app",{appName:i})}const o=new UE(i);for(const u of Ph.values())o.addComponent(u);const l=new Lb(n,r,o);return Il.set(i,l),l}function G0(t=Nh){const e=Il.get(t);if(!e&&t===Nh&&B0())return K0();if(!e)throw nr.create("no-app",{appName:t});return e}function rr(t,e,n){let r=Pb[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wn.warn(o.join(" "));return}Ui(new zr(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ob="firebase-heartbeat-database",jb=1,xo="firebase-heartbeat-store";let Ec=null;function Q0(){return Ec||(Ec=ZE(Ob,jb,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(xo)}catch(n){console.warn(n)}}}}).catch(t=>{throw nr.create("idb-open",{originalErrorMessage:t.message})})),Ec}async function Vb(t){try{const n=(await Q0()).transaction(xo),r=await n.objectStore(xo).get(Y0(t));return await n.done,r}catch(e){if(e instanceof Sn)wn.warn(e.message);else{const n=nr.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wn.warn(n.message)}}}async function tg(t,e){try{const r=(await Q0()).transaction(xo,"readwrite");await r.objectStore(xo).put(e,Y0(t)),await r.done}catch(n){if(n instanceof Sn)wn.warn(n.message);else{const r=nr.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wn.warn(r.message)}}}function Y0(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fb=1024,Mb=30;class Ub{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Hb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=ng();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>Mb){const o=zb(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){wn.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=ng(),{heartbeatsToSend:r,unsentEntries:i}=Bb(this._heartbeatsCache.heartbeats),s=Sl(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return wn.warn(n),""}}}function ng(){return new Date().toISOString().substring(0,10)}function Bb(t,e=Fb){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),rg(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),rg(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Hb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return AE()?CE().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Vb(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return tg(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function rg(t){return Sl(JSON.stringify({version:2,heartbeats:t})).length}function zb(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $b(t){Ui(new zr("platform-logger",e=>new nb(e),"PRIVATE")),Ui(new zr("heartbeat",e=>new Ub(e),"PRIVATE")),rr(Ch,Zm,t),rr(Ch,Zm,"esm2020"),rr("fire-js","")}$b("");var ig=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ir,J0;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(T,v){function x(){}x.prototype=v.prototype,T.F=v.prototype,T.prototype=new x,T.prototype.constructor=T,T.D=function(I,k,N){for(var _=Array(arguments.length-2),ce=2;ce<arguments.length;ce++)_[ce-2]=arguments[ce];return v.prototype[k].apply(I,_)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(T,v,x){x||(x=0);const I=Array(16);if(typeof v=="string")for(var k=0;k<16;++k)I[k]=v.charCodeAt(x++)|v.charCodeAt(x++)<<8|v.charCodeAt(x++)<<16|v.charCodeAt(x++)<<24;else for(k=0;k<16;++k)I[k]=v[x++]|v[x++]<<8|v[x++]<<16|v[x++]<<24;v=T.g[0],x=T.g[1],k=T.g[2];let N=T.g[3],_;_=v+(N^x&(k^N))+I[0]+3614090360&4294967295,v=x+(_<<7&4294967295|_>>>25),_=N+(k^v&(x^k))+I[1]+3905402710&4294967295,N=v+(_<<12&4294967295|_>>>20),_=k+(x^N&(v^x))+I[2]+606105819&4294967295,k=N+(_<<17&4294967295|_>>>15),_=x+(v^k&(N^v))+I[3]+3250441966&4294967295,x=k+(_<<22&4294967295|_>>>10),_=v+(N^x&(k^N))+I[4]+4118548399&4294967295,v=x+(_<<7&4294967295|_>>>25),_=N+(k^v&(x^k))+I[5]+1200080426&4294967295,N=v+(_<<12&4294967295|_>>>20),_=k+(x^N&(v^x))+I[6]+2821735955&4294967295,k=N+(_<<17&4294967295|_>>>15),_=x+(v^k&(N^v))+I[7]+4249261313&4294967295,x=k+(_<<22&4294967295|_>>>10),_=v+(N^x&(k^N))+I[8]+1770035416&4294967295,v=x+(_<<7&4294967295|_>>>25),_=N+(k^v&(x^k))+I[9]+2336552879&4294967295,N=v+(_<<12&4294967295|_>>>20),_=k+(x^N&(v^x))+I[10]+4294925233&4294967295,k=N+(_<<17&4294967295|_>>>15),_=x+(v^k&(N^v))+I[11]+2304563134&4294967295,x=k+(_<<22&4294967295|_>>>10),_=v+(N^x&(k^N))+I[12]+1804603682&4294967295,v=x+(_<<7&4294967295|_>>>25),_=N+(k^v&(x^k))+I[13]+4254626195&4294967295,N=v+(_<<12&4294967295|_>>>20),_=k+(x^N&(v^x))+I[14]+2792965006&4294967295,k=N+(_<<17&4294967295|_>>>15),_=x+(v^k&(N^v))+I[15]+1236535329&4294967295,x=k+(_<<22&4294967295|_>>>10),_=v+(k^N&(x^k))+I[1]+4129170786&4294967295,v=x+(_<<5&4294967295|_>>>27),_=N+(x^k&(v^x))+I[6]+3225465664&4294967295,N=v+(_<<9&4294967295|_>>>23),_=k+(v^x&(N^v))+I[11]+643717713&4294967295,k=N+(_<<14&4294967295|_>>>18),_=x+(N^v&(k^N))+I[0]+3921069994&4294967295,x=k+(_<<20&4294967295|_>>>12),_=v+(k^N&(x^k))+I[5]+3593408605&4294967295,v=x+(_<<5&4294967295|_>>>27),_=N+(x^k&(v^x))+I[10]+38016083&4294967295,N=v+(_<<9&4294967295|_>>>23),_=k+(v^x&(N^v))+I[15]+3634488961&4294967295,k=N+(_<<14&4294967295|_>>>18),_=x+(N^v&(k^N))+I[4]+3889429448&4294967295,x=k+(_<<20&4294967295|_>>>12),_=v+(k^N&(x^k))+I[9]+568446438&4294967295,v=x+(_<<5&4294967295|_>>>27),_=N+(x^k&(v^x))+I[14]+3275163606&4294967295,N=v+(_<<9&4294967295|_>>>23),_=k+(v^x&(N^v))+I[3]+4107603335&4294967295,k=N+(_<<14&4294967295|_>>>18),_=x+(N^v&(k^N))+I[8]+1163531501&4294967295,x=k+(_<<20&4294967295|_>>>12),_=v+(k^N&(x^k))+I[13]+2850285829&4294967295,v=x+(_<<5&4294967295|_>>>27),_=N+(x^k&(v^x))+I[2]+4243563512&4294967295,N=v+(_<<9&4294967295|_>>>23),_=k+(v^x&(N^v))+I[7]+1735328473&4294967295,k=N+(_<<14&4294967295|_>>>18),_=x+(N^v&(k^N))+I[12]+2368359562&4294967295,x=k+(_<<20&4294967295|_>>>12),_=v+(x^k^N)+I[5]+4294588738&4294967295,v=x+(_<<4&4294967295|_>>>28),_=N+(v^x^k)+I[8]+2272392833&4294967295,N=v+(_<<11&4294967295|_>>>21),_=k+(N^v^x)+I[11]+1839030562&4294967295,k=N+(_<<16&4294967295|_>>>16),_=x+(k^N^v)+I[14]+4259657740&4294967295,x=k+(_<<23&4294967295|_>>>9),_=v+(x^k^N)+I[1]+2763975236&4294967295,v=x+(_<<4&4294967295|_>>>28),_=N+(v^x^k)+I[4]+1272893353&4294967295,N=v+(_<<11&4294967295|_>>>21),_=k+(N^v^x)+I[7]+4139469664&4294967295,k=N+(_<<16&4294967295|_>>>16),_=x+(k^N^v)+I[10]+3200236656&4294967295,x=k+(_<<23&4294967295|_>>>9),_=v+(x^k^N)+I[13]+681279174&4294967295,v=x+(_<<4&4294967295|_>>>28),_=N+(v^x^k)+I[0]+3936430074&4294967295,N=v+(_<<11&4294967295|_>>>21),_=k+(N^v^x)+I[3]+3572445317&4294967295,k=N+(_<<16&4294967295|_>>>16),_=x+(k^N^v)+I[6]+76029189&4294967295,x=k+(_<<23&4294967295|_>>>9),_=v+(x^k^N)+I[9]+3654602809&4294967295,v=x+(_<<4&4294967295|_>>>28),_=N+(v^x^k)+I[12]+3873151461&4294967295,N=v+(_<<11&4294967295|_>>>21),_=k+(N^v^x)+I[15]+530742520&4294967295,k=N+(_<<16&4294967295|_>>>16),_=x+(k^N^v)+I[2]+3299628645&4294967295,x=k+(_<<23&4294967295|_>>>9),_=v+(k^(x|~N))+I[0]+4096336452&4294967295,v=x+(_<<6&4294967295|_>>>26),_=N+(x^(v|~k))+I[7]+1126891415&4294967295,N=v+(_<<10&4294967295|_>>>22),_=k+(v^(N|~x))+I[14]+2878612391&4294967295,k=N+(_<<15&4294967295|_>>>17),_=x+(N^(k|~v))+I[5]+4237533241&4294967295,x=k+(_<<21&4294967295|_>>>11),_=v+(k^(x|~N))+I[12]+1700485571&4294967295,v=x+(_<<6&4294967295|_>>>26),_=N+(x^(v|~k))+I[3]+2399980690&4294967295,N=v+(_<<10&4294967295|_>>>22),_=k+(v^(N|~x))+I[10]+4293915773&4294967295,k=N+(_<<15&4294967295|_>>>17),_=x+(N^(k|~v))+I[1]+2240044497&4294967295,x=k+(_<<21&4294967295|_>>>11),_=v+(k^(x|~N))+I[8]+1873313359&4294967295,v=x+(_<<6&4294967295|_>>>26),_=N+(x^(v|~k))+I[15]+4264355552&4294967295,N=v+(_<<10&4294967295|_>>>22),_=k+(v^(N|~x))+I[6]+2734768916&4294967295,k=N+(_<<15&4294967295|_>>>17),_=x+(N^(k|~v))+I[13]+1309151649&4294967295,x=k+(_<<21&4294967295|_>>>11),_=v+(k^(x|~N))+I[4]+4149444226&4294967295,v=x+(_<<6&4294967295|_>>>26),_=N+(x^(v|~k))+I[11]+3174756917&4294967295,N=v+(_<<10&4294967295|_>>>22),_=k+(v^(N|~x))+I[2]+718787259&4294967295,k=N+(_<<15&4294967295|_>>>17),_=x+(N^(k|~v))+I[9]+3951481745&4294967295,T.g[0]=T.g[0]+v&4294967295,T.g[1]=T.g[1]+(k+(_<<21&4294967295|_>>>11))&4294967295,T.g[2]=T.g[2]+k&4294967295,T.g[3]=T.g[3]+N&4294967295}r.prototype.v=function(T,v){v===void 0&&(v=T.length);const x=v-this.blockSize,I=this.C;let k=this.h,N=0;for(;N<v;){if(k==0)for(;N<=x;)i(this,T,N),N+=this.blockSize;if(typeof T=="string"){for(;N<v;)if(I[k++]=T.charCodeAt(N++),k==this.blockSize){i(this,I),k=0;break}}else for(;N<v;)if(I[k++]=T[N++],k==this.blockSize){i(this,I),k=0;break}}this.h=k,this.o+=v},r.prototype.A=function(){var T=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);T[0]=128;for(var v=1;v<T.length-8;++v)T[v]=0;v=this.o*8;for(var x=T.length-8;x<T.length;++x)T[x]=v&255,v/=256;for(this.v(T),T=Array(16),v=0,x=0;x<4;++x)for(let I=0;I<32;I+=8)T[v++]=this.g[x]>>>I&255;return T};function s(T,v){var x=l;return Object.prototype.hasOwnProperty.call(x,T)?x[T]:x[T]=v(T)}function o(T,v){this.h=v;const x=[];let I=!0;for(let k=T.length-1;k>=0;k--){const N=T[k]|0;I&&N==v||(x[k]=N,I=!1)}this.g=x}var l={};function u(T){return-128<=T&&T<128?s(T,function(v){return new o([v|0],v<0?-1:0)}):new o([T|0],T<0?-1:0)}function h(T){if(isNaN(T)||!isFinite(T))return m;if(T<0)return L(h(-T));const v=[];let x=1;for(let I=0;T>=x;I++)v[I]=T/x|0,x*=4294967296;return new o(v,0)}function p(T,v){if(T.length==0)throw Error("number format error: empty string");if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(T.charAt(0)=="-")return L(p(T.substring(1),v));if(T.indexOf("-")>=0)throw Error('number format error: interior "-" character');const x=h(Math.pow(v,8));let I=m;for(let N=0;N<T.length;N+=8){var k=Math.min(8,T.length-N);const _=parseInt(T.substring(N,N+k),v);k<8?(k=h(Math.pow(v,k)),I=I.j(k).add(h(_))):(I=I.j(x),I=I.add(h(_)))}return I}var m=u(0),y=u(1),S=u(16777216);t=o.prototype,t.m=function(){if(P(this))return-L(this).m();let T=0,v=1;for(let x=0;x<this.g.length;x++){const I=this.i(x);T+=(I>=0?I:4294967296+I)*v,v*=4294967296}return T},t.toString=function(T){if(T=T||10,T<2||36<T)throw Error("radix out of range: "+T);if(b(this))return"0";if(P(this))return"-"+L(this).toString(T);const v=h(Math.pow(T,6));var x=this;let I="";for(;;){const k=R(x,v).g;x=E(x,k.j(v));let N=((x.g.length>0?x.g[0]:x.h)>>>0).toString(T);if(x=k,b(x))return N+I;for(;N.length<6;)N="0"+N;I=N+I}},t.i=function(T){return T<0?0:T<this.g.length?this.g[T]:this.h};function b(T){if(T.h!=0)return!1;for(let v=0;v<T.g.length;v++)if(T.g[v]!=0)return!1;return!0}function P(T){return T.h==-1}t.l=function(T){return T=E(this,T),P(T)?-1:b(T)?0:1};function L(T){const v=T.g.length,x=[];for(let I=0;I<v;I++)x[I]=~T.g[I];return new o(x,~T.h).add(y)}t.abs=function(){return P(this)?L(this):this},t.add=function(T){const v=Math.max(this.g.length,T.g.length),x=[];let I=0;for(let k=0;k<=v;k++){let N=I+(this.i(k)&65535)+(T.i(k)&65535),_=(N>>>16)+(this.i(k)>>>16)+(T.i(k)>>>16);I=_>>>16,N&=65535,_&=65535,x[k]=_<<16|N}return new o(x,x[x.length-1]&-2147483648?-1:0)};function E(T,v){return T.add(L(v))}t.j=function(T){if(b(this)||b(T))return m;if(P(this))return P(T)?L(this).j(L(T)):L(L(this).j(T));if(P(T))return L(this.j(L(T)));if(this.l(S)<0&&T.l(S)<0)return h(this.m()*T.m());const v=this.g.length+T.g.length,x=[];for(var I=0;I<2*v;I++)x[I]=0;for(I=0;I<this.g.length;I++)for(let k=0;k<T.g.length;k++){const N=this.i(I)>>>16,_=this.i(I)&65535,ce=T.i(k)>>>16,tt=T.i(k)&65535;x[2*I+2*k]+=_*tt,w(x,2*I+2*k),x[2*I+2*k+1]+=N*tt,w(x,2*I+2*k+1),x[2*I+2*k+1]+=_*ce,w(x,2*I+2*k+1),x[2*I+2*k+2]+=N*ce,w(x,2*I+2*k+2)}for(T=0;T<v;T++)x[T]=x[2*T+1]<<16|x[2*T];for(T=v;T<2*v;T++)x[T]=0;return new o(x,0)};function w(T,v){for(;(T[v]&65535)!=T[v];)T[v+1]+=T[v]>>>16,T[v]&=65535,v++}function A(T,v){this.g=T,this.h=v}function R(T,v){if(b(v))throw Error("division by zero");if(b(T))return new A(m,m);if(P(T))return v=R(L(T),v),new A(L(v.g),L(v.h));if(P(v))return v=R(T,L(v)),new A(L(v.g),v.h);if(T.g.length>30){if(P(T)||P(v))throw Error("slowDivide_ only works with positive integers.");for(var x=y,I=v;I.l(T)<=0;)x=F(x),I=F(I);var k=M(x,1),N=M(I,1);for(I=M(I,2),x=M(x,2);!b(I);){var _=N.add(I);_.l(T)<=0&&(k=k.add(x),N=_),I=M(I,1),x=M(x,1)}return v=E(T,k.j(v)),new A(k,v)}for(k=m;T.l(v)>=0;){for(x=Math.max(1,Math.floor(T.m()/v.m())),I=Math.ceil(Math.log(x)/Math.LN2),I=I<=48?1:Math.pow(2,I-48),N=h(x),_=N.j(v);P(_)||_.l(T)>0;)x-=I,N=h(x),_=N.j(v);b(N)&&(N=y),k=k.add(N),T=E(T,_)}return new A(k,T)}t.B=function(T){return R(this,T).h},t.and=function(T){const v=Math.max(this.g.length,T.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)&T.i(I);return new o(x,this.h&T.h)},t.or=function(T){const v=Math.max(this.g.length,T.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)|T.i(I);return new o(x,this.h|T.h)},t.xor=function(T){const v=Math.max(this.g.length,T.g.length),x=[];for(let I=0;I<v;I++)x[I]=this.i(I)^T.i(I);return new o(x,this.h^T.h)};function F(T){const v=T.g.length+1,x=[];for(let I=0;I<v;I++)x[I]=T.i(I)<<1|T.i(I-1)>>>31;return new o(x,T.h)}function M(T,v){const x=v>>5;v%=32;const I=T.g.length-x,k=[];for(let N=0;N<I;N++)k[N]=v>0?T.i(N+x)>>>v|T.i(N+x+1)<<32-v:T.i(N+x);return new o(k,T.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,J0=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=h,o.fromString=p,ir=o}).apply(typeof ig<"u"?ig:typeof self<"u"?self:typeof window<"u"?window:{});var Sa=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var X0,Fs,Z0,Wa,Rh,e_,t_,n_;(function(){var t,e=Object.defineProperty;function n(a){a=[typeof globalThis=="object"&&globalThis,a,typeof window=="object"&&window,typeof self=="object"&&self,typeof Sa=="object"&&Sa];for(var c=0;c<a.length;++c){var f=a[c];if(f&&f.Math==Math)return f}throw Error("Cannot find global object")}var r=n(this);function i(a,c){if(c)e:{var f=r;a=a.split(".");for(var g=0;g<a.length-1;g++){var C=a[g];if(!(C in f))break e;f=f[C]}a=a[a.length-1],g=f[a],c=c(g),c!=g&&c!=null&&e(f,a,{configurable:!0,writable:!0,value:c})}}i("Symbol.dispose",function(a){return a||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(a){return a||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(a){return a||function(c){var f=[],g;for(g in c)Object.prototype.hasOwnProperty.call(c,g)&&f.push([g,c[g]]);return f}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function l(a){var c=typeof a;return c=="object"&&a!=null||c=="function"}function u(a,c,f){return a.call.apply(a.bind,arguments)}function h(a,c,f){return h=u,h.apply(null,arguments)}function p(a,c){var f=Array.prototype.slice.call(arguments,1);return function(){var g=f.slice();return g.push.apply(g,arguments),a.apply(this,g)}}function m(a,c){function f(){}f.prototype=c.prototype,a.Z=c.prototype,a.prototype=new f,a.prototype.constructor=a,a.Ob=function(g,C,D){for(var U=Array(arguments.length-2),Z=2;Z<arguments.length;Z++)U[Z-2]=arguments[Z];return c.prototype[C].apply(g,U)}}var y=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?a=>a&&AsyncContext.Snapshot.wrap(a):a=>a;function S(a){const c=a.length;if(c>0){const f=Array(c);for(let g=0;g<c;g++)f[g]=a[g];return f}return[]}function b(a,c){for(let g=1;g<arguments.length;g++){const C=arguments[g];var f=typeof C;if(f=f!="object"?f:C?Array.isArray(C)?"array":f:"null",f=="array"||f=="object"&&typeof C.length=="number"){f=a.length||0;const D=C.length||0;a.length=f+D;for(let U=0;U<D;U++)a[f+U]=C[U]}else a.push(C)}}class P{constructor(c,f){this.i=c,this.j=f,this.h=0,this.g=null}get(){let c;return this.h>0?(this.h--,c=this.g,this.g=c.next,c.next=null):c=this.i(),c}}function L(a){o.setTimeout(()=>{throw a},0)}function E(){var a=T;let c=null;return a.g&&(c=a.g,a.g=a.g.next,a.g||(a.h=null),c.next=null),c}class w{constructor(){this.h=this.g=null}add(c,f){const g=A.get();g.set(c,f),this.h?this.h.next=g:this.g=g,this.h=g}}var A=new P(()=>new R,a=>a.reset());class R{constructor(){this.next=this.g=this.h=null}set(c,f){this.h=c,this.g=f,this.next=null}reset(){this.next=this.g=this.h=null}}let F,M=!1,T=new w,v=()=>{const a=Promise.resolve(void 0);F=()=>{a.then(x)}};function x(){for(var a;a=E();){try{a.h.call(a.g)}catch(f){L(f)}var c=A;c.j(a),c.h<100&&(c.h++,a.next=c.g,c.g=a)}M=!1}function I(){this.u=this.u,this.C=this.C}I.prototype.u=!1,I.prototype.dispose=function(){this.u||(this.u=!0,this.N())},I.prototype[Symbol.dispose]=function(){this.dispose()},I.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function k(a,c){this.type=a,this.g=this.target=c,this.defaultPrevented=!1}k.prototype.h=function(){this.defaultPrevented=!0};var N=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var a=!1,c=Object.defineProperty({},"passive",{get:function(){a=!0}});try{const f=()=>{};o.addEventListener("test",f,c),o.removeEventListener("test",f,c)}catch{}return a}();function _(a){return/^[\s\xa0]*$/.test(a)}function ce(a,c){k.call(this,a?a.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,a&&this.init(a,c)}m(ce,k),ce.prototype.init=function(a,c){const f=this.type=a.type,g=a.changedTouches&&a.changedTouches.length?a.changedTouches[0]:null;this.target=a.target||a.srcElement,this.g=c,c=a.relatedTarget,c||(f=="mouseover"?c=a.fromElement:f=="mouseout"&&(c=a.toElement)),this.relatedTarget=c,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=a.clientX!==void 0?a.clientX:a.pageX,this.clientY=a.clientY!==void 0?a.clientY:a.pageY,this.screenX=a.screenX||0,this.screenY=a.screenY||0),this.button=a.button,this.key=a.key||"",this.ctrlKey=a.ctrlKey,this.altKey=a.altKey,this.shiftKey=a.shiftKey,this.metaKey=a.metaKey,this.pointerId=a.pointerId||0,this.pointerType=a.pointerType,this.state=a.state,this.i=a,a.defaultPrevented&&ce.Z.h.call(this)},ce.prototype.h=function(){ce.Z.h.call(this);const a=this.i;a.preventDefault?a.preventDefault():a.returnValue=!1};var tt="closure_listenable_"+(Math.random()*1e6|0),kn=0;function rs(a,c,f,g,C){this.listener=a,this.proxy=null,this.src=c,this.type=f,this.capture=!!g,this.ha=C,this.key=++kn,this.da=this.fa=!1}function B(a){a.da=!0,a.listener=null,a.proxy=null,a.src=null,a.ha=null}function Q(a,c,f){for(const g in a)c.call(f,a[g],g,a)}function X(a,c){for(const f in a)c.call(void 0,a[f],f,a)}function me(a){const c={};for(const f in a)c[f]=a[f];return c}const be="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _r(a,c){let f,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(f in g)a[f]=g[f];for(let D=0;D<be.length;D++)f=be[D],Object.prototype.hasOwnProperty.call(g,f)&&(a[f]=g[f])}}function Et(a){this.src=a,this.g={},this.h=0}Et.prototype.add=function(a,c,f,g,C){const D=a.toString();a=this.g[D],a||(a=this.g[D]=[],this.h++);const U=Dt(a,c,g,C);return U>-1?(c=a[U],f||(c.fa=!1)):(c=new rs(c,this.src,D,!!g,C),c.fa=f,a.push(c)),c};function wr(a,c){const f=c.type;if(f in a.g){var g=a.g[f],C=Array.prototype.indexOf.call(g,c,void 0),D;(D=C>=0)&&Array.prototype.splice.call(g,C,1),D&&(B(c),a.g[f].length==0&&(delete a.g[f],a.h--))}}function Dt(a,c,f,g){for(let C=0;C<a.length;++C){const D=a[C];if(!D.da&&D.listener==c&&D.capture==!!f&&D.ha==g)return C}return-1}var An="closure_lm_"+(Math.random()*1e6|0),Su={};function Uf(a,c,f,g,C){if(g&&g.once)return Hf(a,c,f,g,C);if(Array.isArray(c)){for(let D=0;D<c.length;D++)Uf(a,c[D],f,g,C);return null}return f=Cu(f),a&&a[tt]?a.J(c,f,l(g)?!!g.capture:!!g,C):Bf(a,c,f,!1,g,C)}function Bf(a,c,f,g,C,D){if(!c)throw Error("Invalid event type");const U=l(C)?!!C.capture:!!C;let Z=ku(a);if(Z||(a[An]=Z=new Et(a)),f=Z.add(c,f,g,U,D),f.proxy)return f;if(g=oT(),f.proxy=g,g.src=a,g.listener=f,a.addEventListener)N||(C=U),C===void 0&&(C=!1),a.addEventListener(c.toString(),g,C);else if(a.attachEvent)a.attachEvent($f(c.toString()),g);else if(a.addListener&&a.removeListener)a.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return f}function oT(){function a(f){return c.call(a.src,a.listener,f)}const c=aT;return a}function Hf(a,c,f,g,C){if(Array.isArray(c)){for(let D=0;D<c.length;D++)Hf(a,c[D],f,g,C);return null}return f=Cu(f),a&&a[tt]?a.K(c,f,l(g)?!!g.capture:!!g,C):Bf(a,c,f,!0,g,C)}function zf(a,c,f,g,C){if(Array.isArray(c))for(var D=0;D<c.length;D++)zf(a,c[D],f,g,C);else g=l(g)?!!g.capture:!!g,f=Cu(f),a&&a[tt]?(a=a.i,D=String(c).toString(),D in a.g&&(c=a.g[D],f=Dt(c,f,g,C),f>-1&&(B(c[f]),Array.prototype.splice.call(c,f,1),c.length==0&&(delete a.g[D],a.h--)))):a&&(a=ku(a))&&(c=a.g[c.toString()],a=-1,c&&(a=Dt(c,f,g,C)),(f=a>-1?c[a]:null)&&Iu(f))}function Iu(a){if(typeof a!="number"&&a&&!a.da){var c=a.src;if(c&&c[tt])wr(c.i,a);else{var f=a.type,g=a.proxy;c.removeEventListener?c.removeEventListener(f,g,a.capture):c.detachEvent?c.detachEvent($f(f),g):c.addListener&&c.removeListener&&c.removeListener(g),(f=ku(c))?(wr(f,a),f.h==0&&(f.src=null,c[An]=null)):B(a)}}}function $f(a){return a in Su?Su[a]:Su[a]="on"+a}function aT(a,c){if(a.da)a=!0;else{c=new ce(c,this);const f=a.listener,g=a.ha||a.src;a.fa&&Iu(a),a=f.call(g,c)}return a}function ku(a){return a=a[An],a instanceof Et?a:null}var Au="__closure_events_fn_"+(Math.random()*1e9>>>0);function Cu(a){return typeof a=="function"?a:(a[Au]||(a[Au]=function(c){return a.handleEvent(c)}),a[Au])}function qe(){I.call(this),this.i=new Et(this),this.M=this,this.G=null}m(qe,I),qe.prototype[tt]=!0,qe.prototype.removeEventListener=function(a,c,f,g){zf(this,a,c,f,g)};function nt(a,c){var f,g=a.G;if(g)for(f=[];g;g=g.G)f.push(g);if(a=a.M,g=c.type||c,typeof c=="string")c=new k(c,a);else if(c instanceof k)c.target=c.target||a;else{var C=c;c=new k(g,a),_r(c,C)}C=!0;let D,U;if(f)for(U=f.length-1;U>=0;U--)D=c.g=f[U],C=Yo(D,g,!0,c)&&C;if(D=c.g=a,C=Yo(D,g,!0,c)&&C,C=Yo(D,g,!1,c)&&C,f)for(U=0;U<f.length;U++)D=c.g=f[U],C=Yo(D,g,!1,c)&&C}qe.prototype.N=function(){if(qe.Z.N.call(this),this.i){var a=this.i;for(const c in a.g){const f=a.g[c];for(let g=0;g<f.length;g++)B(f[g]);delete a.g[c],a.h--}}this.G=null},qe.prototype.J=function(a,c,f,g){return this.i.add(String(a),c,!1,f,g)},qe.prototype.K=function(a,c,f,g){return this.i.add(String(a),c,!0,f,g)};function Yo(a,c,f,g){if(c=a.i.g[String(c)],!c)return!0;c=c.concat();let C=!0;for(let D=0;D<c.length;++D){const U=c[D];if(U&&!U.da&&U.capture==f){const Z=U.listener,Ne=U.ha||U.src;U.fa&&wr(a.i,U),C=Z.call(Ne,g)!==!1&&C}}return C&&!g.defaultPrevented}function lT(a,c){if(typeof a!="function")if(a&&typeof a.handleEvent=="function")a=h(a.handleEvent,a);else throw Error("Invalid listener argument");return Number(c)>2147483647?-1:o.setTimeout(a,c||0)}function Wf(a){a.g=lT(()=>{a.g=null,a.i&&(a.i=!1,Wf(a))},a.l);const c=a.h;a.h=null,a.m.apply(null,c)}class uT extends I{constructor(c,f){super(),this.m=c,this.l=f,this.h=null,this.i=!1,this.g=null}j(c){this.h=arguments,this.g?this.i=!0:Wf(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function is(a){I.call(this),this.h=a,this.g={}}m(is,I);var qf=[];function Kf(a){Q(a.g,function(c,f){this.g.hasOwnProperty(f)&&Iu(c)},a),a.g={}}is.prototype.N=function(){is.Z.N.call(this),Kf(this)},is.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Nu=o.JSON.stringify,cT=o.JSON.parse,hT=class{stringify(a){return o.JSON.stringify(a,void 0)}parse(a){return o.JSON.parse(a,void 0)}};function Gf(){}function Qf(){}var ss={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function Pu(){k.call(this,"d")}m(Pu,k);function Ru(){k.call(this,"c")}m(Ru,k);var Tr={},Yf=null;function Jo(){return Yf=Yf||new qe}Tr.Ia="serverreachability";function Jf(a){k.call(this,Tr.Ia,a)}m(Jf,k);function os(a){const c=Jo();nt(c,new Jf(c))}Tr.STAT_EVENT="statevent";function Xf(a,c){k.call(this,Tr.STAT_EVENT,a),this.stat=c}m(Xf,k);function rt(a){const c=Jo();nt(c,new Xf(c,a))}Tr.Ja="timingevent";function Zf(a,c){k.call(this,Tr.Ja,a),this.size=c}m(Zf,k);function as(a,c){if(typeof a!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){a()},c)}function ls(){this.g=!0}ls.prototype.ua=function(){this.g=!1};function dT(a,c,f,g,C,D){a.info(function(){if(a.g)if(D){var U="",Z=D.split("&");for(let le=0;le<Z.length;le++){var Ne=Z[le].split("=");if(Ne.length>1){const Oe=Ne[0];Ne=Ne[1];const qt=Oe.split("_");U=qt.length>=2&&qt[1]=="type"?U+(Oe+"="+Ne+"&"):U+(Oe+"=redacted&")}}}else U=null;else U=D;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+c+`
`+f+`
`+U})}function fT(a,c,f,g,C,D,U){a.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+c+`
`+f+`
`+D+" "+U})}function ti(a,c,f,g){a.info(function(){return"XMLHTTP TEXT ("+c+"): "+mT(a,f)+(g?" "+g:"")})}function pT(a,c){a.info(function(){return"TIMEOUT: "+c})}ls.prototype.info=function(){};function mT(a,c){if(!a.g)return c;if(!c)return null;try{const D=JSON.parse(c);if(D){for(a=0;a<D.length;a++)if(Array.isArray(D[a])){var f=D[a];if(!(f.length<2)){var g=f[1];if(Array.isArray(g)&&!(g.length<1)){var C=g[0];if(C!="noop"&&C!="stop"&&C!="close")for(let U=1;U<g.length;U++)g[U]=""}}}}return Nu(D)}catch{return c}}var Xo={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},ep={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},tp;function Du(){}m(Du,Gf),Du.prototype.g=function(){return new XMLHttpRequest},tp=new Du;function us(a){return encodeURIComponent(String(a))}function gT(a){var c=1;a=a.split(":");const f=[];for(;c>0&&a.length;)f.push(a.shift()),c--;return a.length&&f.push(a.join(":")),f}function Cn(a,c,f,g){this.j=a,this.i=c,this.l=f,this.S=g||1,this.V=new is(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new np}function np(){this.i=null,this.g="",this.h=!1}var rp={},Lu={};function Ou(a,c,f){a.M=1,a.A=ea(Wt(c)),a.u=f,a.R=!0,ip(a,null)}function ip(a,c){a.F=Date.now(),Zo(a),a.B=Wt(a.A);var f=a.B,g=a.S;Array.isArray(g)||(g=[String(g)]),yp(f.i,"t",g),a.C=0,f=a.j.L,a.h=new np,a.g=Op(a.j,f?c:null,!a.u),a.P>0&&(a.O=new uT(h(a.Y,a,a.g),a.P)),c=a.V,f=a.g,g=a.ba;var C="readystatechange";Array.isArray(C)||(C&&(qf[0]=C.toString()),C=qf);for(let D=0;D<C.length;D++){const U=Uf(f,C[D],g||c.handleEvent,!1,c.h||c);if(!U)break;c.g[U.key]=U}c=a.J?me(a.J):{},a.u?(a.v||(a.v="POST"),c["Content-Type"]="application/x-www-form-urlencoded",a.g.ea(a.B,a.v,a.u,c)):(a.v="GET",a.g.ea(a.B,a.v,null,c)),os(),dT(a.i,a.v,a.B,a.l,a.S,a.u)}Cn.prototype.ba=function(a){a=a.target;const c=this.O;c&&Rn(a)==3?c.j():this.Y(a)},Cn.prototype.Y=function(a){try{if(a==this.g)e:{const Z=Rn(this.g),Ne=this.g.ya(),le=this.g.ca();if(!(Z<3)&&(Z!=3||this.g&&(this.h.h||this.g.la()||bp(this.g)))){this.K||Z!=4||Ne==7||(Ne==8||le<=0?os(3):os(2)),ju(this);var c=this.g.ca();this.X=c;var f=yT(this);if(this.o=c==200,fT(this.i,this.v,this.B,this.l,this.S,Z,c),this.o){if(this.U&&!this.L){t:{if(this.g){var g,C=this.g;if((g=C.g?C.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!_(g)){var D=g;break t}}D=null}if(a=D)ti(this.i,this.l,a,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Vu(this,a);else{this.o=!1,this.m=3,rt(12),xr(this),cs(this);break e}}if(this.R){a=!0;let Oe;for(;!this.K&&this.C<f.length;)if(Oe=vT(this,f),Oe==Lu){Z==4&&(this.m=4,rt(14),a=!1),ti(this.i,this.l,null,"[Incomplete Response]");break}else if(Oe==rp){this.m=4,rt(15),ti(this.i,this.l,f,"[Invalid Chunk]"),a=!1;break}else ti(this.i,this.l,Oe,null),Vu(this,Oe);if(sp(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Z!=4||f.length!=0||this.h.h||(this.m=1,rt(16),a=!1),this.o=this.o&&a,!a)ti(this.i,this.l,f,"[Invalid Chunked Response]"),xr(this),cs(this);else if(f.length>0&&!this.W){this.W=!0;var U=this.j;U.g==this&&U.aa&&!U.P&&(U.j.info("Great, no buffering proxy detected. Bytes received: "+f.length),Wu(U),U.P=!0,rt(11))}}else ti(this.i,this.l,f,null),Vu(this,f);Z==4&&xr(this),this.o&&!this.K&&(Z==4?Pp(this.j,this):(this.o=!1,Zo(this)))}else RT(this.g),c==400&&f.indexOf("Unknown SID")>0?(this.m=3,rt(12)):(this.m=0,rt(13)),xr(this),cs(this)}}}catch{}finally{}};function yT(a){if(!sp(a))return a.g.la();const c=bp(a.g);if(c==="")return"";let f="";const g=c.length,C=Rn(a.g)==4;if(!a.h.i){if(typeof TextDecoder>"u")return xr(a),cs(a),"";a.h.i=new o.TextDecoder}for(let D=0;D<g;D++)a.h.h=!0,f+=a.h.i.decode(c[D],{stream:!(C&&D==g-1)});return c.length=0,a.h.g+=f,a.C=0,a.h.g}function sp(a){return a.g?a.v=="GET"&&a.M!=2&&a.j.Aa:!1}function vT(a,c){var f=a.C,g=c.indexOf(`
`,f);return g==-1?Lu:(f=Number(c.substring(f,g)),isNaN(f)?rp:(g+=1,g+f>c.length?Lu:(c=c.slice(g,g+f),a.C=g+f,c)))}Cn.prototype.cancel=function(){this.K=!0,xr(this)};function Zo(a){a.T=Date.now()+a.H,op(a,a.H)}function op(a,c){if(a.D!=null)throw Error("WatchDog timer not null");a.D=as(h(a.aa,a),c)}function ju(a){a.D&&(o.clearTimeout(a.D),a.D=null)}Cn.prototype.aa=function(){this.D=null;const a=Date.now();a-this.T>=0?(pT(this.i,this.B),this.M!=2&&(os(),rt(17)),xr(this),this.m=2,cs(this)):op(this,this.T-a)};function cs(a){a.j.I==0||a.K||Pp(a.j,a)}function xr(a){ju(a);var c=a.O;c&&typeof c.dispose=="function"&&c.dispose(),a.O=null,Kf(a.V),a.g&&(c=a.g,a.g=null,c.abort(),c.dispose())}function Vu(a,c){try{var f=a.j;if(f.I!=0&&(f.g==a||Fu(f.h,a))){if(!a.L&&Fu(f.h,a)&&f.I==3){try{var g=f.Ba.g.parse(c)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){e:if(!f.v){if(f.g)if(f.g.F+3e3<a.F)sa(f),ra(f);else break e;$u(f),rt(18)}}else f.xa=C[1],0<f.xa-f.K&&C[2]<37500&&f.F&&f.A==0&&!f.C&&(f.C=as(h(f.Va,f),6e3));up(f.h)<=1&&f.ta&&(f.ta=void 0)}else br(f,11)}else if((a.L||f.g==a)&&sa(f),!_(c))for(C=f.Ba.g.parse(c),c=0;c<C.length;c++){let le=C[c];const Oe=le[0];if(!(Oe<=f.K))if(f.K=Oe,le=le[1],f.I==2)if(le[0]=="c"){f.M=le[1],f.ba=le[2];const qt=le[3];qt!=null&&(f.ka=qt,f.j.info("VER="+f.ka));const Sr=le[4];Sr!=null&&(f.za=Sr,f.j.info("SVER="+f.za));const Dn=le[5];Dn!=null&&typeof Dn=="number"&&Dn>0&&(g=1.5*Dn,f.O=g,f.j.info("backChannelRequestTimeoutMs_="+g)),g=f;const Ln=a.g;if(Ln){const aa=Ln.g?Ln.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(aa){var D=g.h;D.g||aa.indexOf("spdy")==-1&&aa.indexOf("quic")==-1&&aa.indexOf("h2")==-1||(D.j=D.l,D.g=new Set,D.h&&(Mu(D,D.h),D.h=null))}if(g.G){const qu=Ln.g?Ln.g.getResponseHeader("X-HTTP-Session-Id"):null;qu&&(g.wa=qu,he(g.J,g.G,qu))}}f.I=3,f.l&&f.l.ra(),f.aa&&(f.T=Date.now()-a.F,f.j.info("Handshake RTT: "+f.T+"ms")),g=f;var U=a;if(g.na=Lp(g,g.L?g.ba:null,g.W),U.L){cp(g.h,U);var Z=U,Ne=g.O;Ne&&(Z.H=Ne),Z.D&&(ju(Z),Zo(Z)),g.g=U}else Cp(g);f.i.length>0&&ia(f)}else le[0]!="stop"&&le[0]!="close"||br(f,7);else f.I==3&&(le[0]=="stop"||le[0]=="close"?le[0]=="stop"?br(f,7):zu(f):le[0]!="noop"&&f.l&&f.l.qa(le),f.A=0)}}os(4)}catch{}}var _T=class{constructor(a,c){this.g=a,this.map=c}};function ap(a){this.l=a||10,o.PerformanceNavigationTiming?(a=o.performance.getEntriesByType("navigation"),a=a.length>0&&(a[0].nextHopProtocol=="hq"||a[0].nextHopProtocol=="h2")):a=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=a?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function lp(a){return a.h?!0:a.g?a.g.size>=a.j:!1}function up(a){return a.h?1:a.g?a.g.size:0}function Fu(a,c){return a.h?a.h==c:a.g?a.g.has(c):!1}function Mu(a,c){a.g?a.g.add(c):a.h=c}function cp(a,c){a.h&&a.h==c?a.h=null:a.g&&a.g.has(c)&&a.g.delete(c)}ap.prototype.cancel=function(){if(this.i=hp(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const a of this.g.values())a.cancel();this.g.clear()}};function hp(a){if(a.h!=null)return a.i.concat(a.h.G);if(a.g!=null&&a.g.size!==0){let c=a.i;for(const f of a.g.values())c=c.concat(f.G);return c}return S(a.i)}var dp=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function wT(a,c){if(a){a=a.split("&");for(let f=0;f<a.length;f++){const g=a[f].indexOf("=");let C,D=null;g>=0?(C=a[f].substring(0,g),D=a[f].substring(g+1)):C=a[f],c(C,D?decodeURIComponent(D.replace(/\+/g," ")):"")}}}function Nn(a){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let c;a instanceof Nn?(this.l=a.l,hs(this,a.j),this.o=a.o,this.g=a.g,ds(this,a.u),this.h=a.h,Uu(this,vp(a.i)),this.m=a.m):a&&(c=String(a).match(dp))?(this.l=!1,hs(this,c[1]||"",!0),this.o=fs(c[2]||""),this.g=fs(c[3]||"",!0),ds(this,c[4]),this.h=fs(c[5]||"",!0),Uu(this,c[6]||"",!0),this.m=fs(c[7]||"")):(this.l=!1,this.i=new ms(null,this.l))}Nn.prototype.toString=function(){const a=[];var c=this.j;c&&a.push(ps(c,fp,!0),":");var f=this.g;return(f||c=="file")&&(a.push("//"),(c=this.o)&&a.push(ps(c,fp,!0),"@"),a.push(us(f).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),f=this.u,f!=null&&a.push(":",String(f))),(f=this.h)&&(this.g&&f.charAt(0)!="/"&&a.push("/"),a.push(ps(f,f.charAt(0)=="/"?ET:xT,!0))),(f=this.i.toString())&&a.push("?",f),(f=this.m)&&a.push("#",ps(f,ST)),a.join("")},Nn.prototype.resolve=function(a){const c=Wt(this);let f=!!a.j;f?hs(c,a.j):f=!!a.o,f?c.o=a.o:f=!!a.g,f?c.g=a.g:f=a.u!=null;var g=a.h;if(f)ds(c,a.u);else if(f=!!a.h){if(g.charAt(0)!="/")if(this.g&&!this.h)g="/"+g;else{var C=c.h.lastIndexOf("/");C!=-1&&(g=c.h.slice(0,C+1)+g)}if(C=g,C==".."||C==".")g="";else if(C.indexOf("./")!=-1||C.indexOf("/.")!=-1){g=C.lastIndexOf("/",0)==0,C=C.split("/");const D=[];for(let U=0;U<C.length;){const Z=C[U++];Z=="."?g&&U==C.length&&D.push(""):Z==".."?((D.length>1||D.length==1&&D[0]!="")&&D.pop(),g&&U==C.length&&D.push("")):(D.push(Z),g=!0)}g=D.join("/")}else g=C}return f?c.h=g:f=a.i.toString()!=="",f?Uu(c,vp(a.i)):f=!!a.m,f&&(c.m=a.m),c};function Wt(a){return new Nn(a)}function hs(a,c,f){a.j=f?fs(c,!0):c,a.j&&(a.j=a.j.replace(/:$/,""))}function ds(a,c){if(c){if(c=Number(c),isNaN(c)||c<0)throw Error("Bad port number "+c);a.u=c}else a.u=null}function Uu(a,c,f){c instanceof ms?(a.i=c,IT(a.i,a.l)):(f||(c=ps(c,bT)),a.i=new ms(c,a.l))}function he(a,c,f){a.i.set(c,f)}function ea(a){return he(a,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),a}function fs(a,c){return a?c?decodeURI(a.replace(/%25/g,"%2525")):decodeURIComponent(a):""}function ps(a,c,f){return typeof a=="string"?(a=encodeURI(a).replace(c,TT),f&&(a=a.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),a):null}function TT(a){return a=a.charCodeAt(0),"%"+(a>>4&15).toString(16)+(a&15).toString(16)}var fp=/[#\/\?@]/g,xT=/[#\?:]/g,ET=/[#\?]/g,bT=/[#\?@]/g,ST=/#/g;function ms(a,c){this.h=this.g=null,this.i=a||null,this.j=!!c}function Er(a){a.g||(a.g=new Map,a.h=0,a.i&&wT(a.i,function(c,f){a.add(decodeURIComponent(c.replace(/\+/g," ")),f)}))}t=ms.prototype,t.add=function(a,c){Er(this),this.i=null,a=ni(this,a);let f=this.g.get(a);return f||this.g.set(a,f=[]),f.push(c),this.h+=1,this};function pp(a,c){Er(a),c=ni(a,c),a.g.has(c)&&(a.i=null,a.h-=a.g.get(c).length,a.g.delete(c))}function mp(a,c){return Er(a),c=ni(a,c),a.g.has(c)}t.forEach=function(a,c){Er(this),this.g.forEach(function(f,g){f.forEach(function(C){a.call(c,C,g,this)},this)},this)};function gp(a,c){Er(a);let f=[];if(typeof c=="string")mp(a,c)&&(f=f.concat(a.g.get(ni(a,c))));else for(a=Array.from(a.g.values()),c=0;c<a.length;c++)f=f.concat(a[c]);return f}t.set=function(a,c){return Er(this),this.i=null,a=ni(this,a),mp(this,a)&&(this.h-=this.g.get(a).length),this.g.set(a,[c]),this.h+=1,this},t.get=function(a,c){return a?(a=gp(this,a),a.length>0?String(a[0]):c):c};function yp(a,c,f){pp(a,c),f.length>0&&(a.i=null,a.g.set(ni(a,c),S(f)),a.h+=f.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const a=[],c=Array.from(this.g.keys());for(let g=0;g<c.length;g++){var f=c[g];const C=us(f);f=gp(this,f);for(let D=0;D<f.length;D++){let U=C;f[D]!==""&&(U+="="+us(f[D])),a.push(U)}}return this.i=a.join("&")};function vp(a){const c=new ms;return c.i=a.i,a.g&&(c.g=new Map(a.g),c.h=a.h),c}function ni(a,c){return c=String(c),a.j&&(c=c.toLowerCase()),c}function IT(a,c){c&&!a.j&&(Er(a),a.i=null,a.g.forEach(function(f,g){const C=g.toLowerCase();g!=C&&(pp(this,g),yp(this,C,f))},a)),a.j=c}function kT(a,c){const f=new ls;if(o.Image){const g=new Image;g.onload=p(Pn,f,"TestLoadImage: loaded",!0,c,g),g.onerror=p(Pn,f,"TestLoadImage: error",!1,c,g),g.onabort=p(Pn,f,"TestLoadImage: abort",!1,c,g),g.ontimeout=p(Pn,f,"TestLoadImage: timeout",!1,c,g),o.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=a}else c(!1)}function AT(a,c){const f=new ls,g=new AbortController,C=setTimeout(()=>{g.abort(),Pn(f,"TestPingServer: timeout",!1,c)},1e4);fetch(a,{signal:g.signal}).then(D=>{clearTimeout(C),D.ok?Pn(f,"TestPingServer: ok",!0,c):Pn(f,"TestPingServer: server error",!1,c)}).catch(()=>{clearTimeout(C),Pn(f,"TestPingServer: error",!1,c)})}function Pn(a,c,f,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(f)}catch{}}function CT(){this.g=new hT}function Bu(a){this.i=a.Sb||null,this.h=a.ab||!1}m(Bu,Gf),Bu.prototype.g=function(){return new ta(this.i,this.h)};function ta(a,c){qe.call(this),this.H=a,this.o=c,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}m(ta,qe),t=ta.prototype,t.open=function(a,c){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=a,this.D=c,this.readyState=1,ys(this)},t.send=function(a){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const c={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};a&&(c.body=a),(this.H||o).fetch(new Request(this.D,c)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,gs(this)),this.readyState=0},t.Pa=function(a){if(this.g&&(this.l=a,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=a.headers,this.readyState=2,ys(this)),this.g&&(this.readyState=3,ys(this),this.g)))if(this.responseType==="arraybuffer")a.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in a){if(this.j=a.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;_p(this)}else a.text().then(this.Oa.bind(this),this.ga.bind(this))};function _p(a){a.j.read().then(a.Ma.bind(a)).catch(a.ga.bind(a))}t.Ma=function(a){if(this.g){if(this.o&&a.value)this.response.push(a.value);else if(!this.o){var c=a.value?a.value:new Uint8Array(0);(c=this.B.decode(c,{stream:!a.done}))&&(this.response=this.responseText+=c)}a.done?gs(this):ys(this),this.readyState==3&&_p(this)}},t.Oa=function(a){this.g&&(this.response=this.responseText=a,gs(this))},t.Na=function(a){this.g&&(this.response=a,gs(this))},t.ga=function(){this.g&&gs(this)};function gs(a){a.readyState=4,a.l=null,a.j=null,a.B=null,ys(a)}t.setRequestHeader=function(a,c){this.A.append(a,c)},t.getResponseHeader=function(a){return this.h&&this.h.get(a.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const a=[],c=this.h.entries();for(var f=c.next();!f.done;)f=f.value,a.push(f[0]+": "+f[1]),f=c.next();return a.join(`\r
`)};function ys(a){a.onreadystatechange&&a.onreadystatechange.call(a)}Object.defineProperty(ta.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(a){this.m=a?"include":"same-origin"}});function wp(a){let c="";return Q(a,function(f,g){c+=g,c+=":",c+=f,c+=`\r
`}),c}function Hu(a,c,f){e:{for(g in f){var g=!1;break e}g=!0}g||(f=wp(f),typeof a=="string"?f!=null&&us(f):he(a,c,f))}function xe(a){qe.call(this),this.headers=new Map,this.L=a||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}m(xe,qe);var NT=/^https?$/i,PT=["POST","PUT"];t=xe.prototype,t.Fa=function(a){this.H=a},t.ea=function(a,c,f,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+a);c=c?c.toUpperCase():"GET",this.D=a,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():tp.g(),this.g.onreadystatechange=y(h(this.Ca,this));try{this.B=!0,this.g.open(c,String(a),!0),this.B=!1}catch(D){Tp(this,D);return}if(a=f||"",f=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)f.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const D of g.keys())f.set(D,g.get(D));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(f.keys()).find(D=>D.toLowerCase()=="content-type"),C=o.FormData&&a instanceof o.FormData,!(Array.prototype.indexOf.call(PT,c,void 0)>=0)||g||C||f.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[D,U]of f)this.g.setRequestHeader(D,U);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(a),this.v=!1}catch(D){Tp(this,D)}};function Tp(a,c){a.h=!1,a.g&&(a.j=!0,a.g.abort(),a.j=!1),a.l=c,a.o=5,xp(a),na(a)}function xp(a){a.A||(a.A=!0,nt(a,"complete"),nt(a,"error"))}t.abort=function(a){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=a||7,nt(this,"complete"),nt(this,"abort"),na(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),na(this,!0)),xe.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Ep(this):this.Xa())},t.Xa=function(){Ep(this)};function Ep(a){if(a.h&&typeof s<"u"){if(a.v&&Rn(a)==4)setTimeout(a.Ca.bind(a),0);else if(nt(a,"readystatechange"),Rn(a)==4){a.h=!1;try{const D=a.ca();e:switch(D){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var c=!0;break e;default:c=!1}var f;if(!(f=c)){var g;if(g=D===0){let U=String(a.D).match(dp)[1]||null;!U&&o.self&&o.self.location&&(U=o.self.location.protocol.slice(0,-1)),g=!NT.test(U?U.toLowerCase():"")}f=g}if(f)nt(a,"complete"),nt(a,"success");else{a.o=6;try{var C=Rn(a)>2?a.g.statusText:""}catch{C=""}a.l=C+" ["+a.ca()+"]",xp(a)}}finally{na(a)}}}}function na(a,c){if(a.g){a.m&&(clearTimeout(a.m),a.m=null);const f=a.g;a.g=null,c||nt(a,"ready");try{f.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function Rn(a){return a.g?a.g.readyState:0}t.ca=function(){try{return Rn(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(a){if(this.g){var c=this.g.responseText;return a&&c.indexOf(a)==0&&(c=c.substring(a.length)),cT(c)}};function bp(a){try{if(!a.g)return null;if("response"in a.g)return a.g.response;switch(a.F){case"":case"text":return a.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in a.g)return a.g.mozResponseArrayBuffer}return null}catch{return null}}function RT(a){const c={};a=(a.g&&Rn(a)>=2&&a.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<a.length;g++){if(_(a[g]))continue;var f=gT(a[g]);const C=f[0];if(f=f[1],typeof f!="string")continue;f=f.trim();const D=c[C]||[];c[C]=D,D.push(f)}X(c,function(g){return g.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function vs(a,c,f){return f&&f.internalChannelParams&&f.internalChannelParams[a]||c}function Sp(a){this.za=0,this.i=[],this.j=new ls,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=vs("failFast",!1,a),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=vs("baseRetryDelayMs",5e3,a),this.Za=vs("retryDelaySeedMs",1e4,a),this.Ta=vs("forwardChannelMaxRetries",2,a),this.va=vs("forwardChannelRequestTimeoutMs",2e4,a),this.ma=a&&a.xmlHttpFactory||void 0,this.Ua=a&&a.Rb||void 0,this.Aa=a&&a.useFetchStreams||!1,this.O=void 0,this.L=a&&a.supportsCrossDomainXhr||!1,this.M="",this.h=new ap(a&&a.concurrentRequestLimit),this.Ba=new CT,this.S=a&&a.fastHandshake||!1,this.R=a&&a.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=a&&a.Pb||!1,a&&a.ua&&this.j.ua(),a&&a.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&a&&a.detectBufferingProxy||!1,this.ia=void 0,a&&a.longPollingTimeout&&a.longPollingTimeout>0&&(this.ia=a.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Sp.prototype,t.ka=8,t.I=1,t.connect=function(a,c,f,g){rt(0),this.W=a,this.H=c||{},f&&g!==void 0&&(this.H.OSID=f,this.H.OAID=g),this.F=this.X,this.J=Lp(this,null,this.W),ia(this)};function zu(a){if(Ip(a),a.I==3){var c=a.V++,f=Wt(a.J);if(he(f,"SID",a.M),he(f,"RID",c),he(f,"TYPE","terminate"),_s(a,f),c=new Cn(a,a.j,c),c.M=2,c.A=ea(Wt(f)),f=!1,o.navigator&&o.navigator.sendBeacon)try{f=o.navigator.sendBeacon(c.A.toString(),"")}catch{}!f&&o.Image&&(new Image().src=c.A,f=!0),f||(c.g=Op(c.j,null),c.g.ea(c.A)),c.F=Date.now(),Zo(c)}Dp(a)}function ra(a){a.g&&(Wu(a),a.g.cancel(),a.g=null)}function Ip(a){ra(a),a.v&&(o.clearTimeout(a.v),a.v=null),sa(a),a.h.cancel(),a.m&&(typeof a.m=="number"&&o.clearTimeout(a.m),a.m=null)}function ia(a){if(!lp(a.h)&&!a.m){a.m=!0;var c=a.Ea;F||v(),M||(F(),M=!0),T.add(c,a),a.D=0}}function DT(a,c){return up(a.h)>=a.h.j-(a.m?1:0)?!1:a.m?(a.i=c.G.concat(a.i),!0):a.I==1||a.I==2||a.D>=(a.Sa?0:a.Ta)?!1:(a.m=as(h(a.Ea,a,c),Rp(a,a.D)),a.D++,!0)}t.Ea=function(a){if(this.m)if(this.m=null,this.I==1){if(!a){this.V=Math.floor(Math.random()*1e5),a=this.V++;const C=new Cn(this,this.j,a);let D=this.o;if(this.U&&(D?(D=me(D),_r(D,this.U)):D=this.U),this.u!==null||this.R||(C.J=D,D=null),this.S)e:{for(var c=0,f=0;f<this.i.length;f++){t:{var g=this.i[f];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break t}g=void 0}if(g===void 0)break;if(c+=g,c>4096){c=f;break e}if(c===4096||f===this.i.length-1){c=f+1;break e}}c=1e3}else c=1e3;c=Ap(this,C,c),f=Wt(this.J),he(f,"RID",a),he(f,"CVER",22),this.G&&he(f,"X-HTTP-Session-Id",this.G),_s(this,f),D&&(this.R?c="headers="+us(wp(D))+"&"+c:this.u&&Hu(f,this.u,D)),Mu(this.h,C),this.Ra&&he(f,"TYPE","init"),this.S?(he(f,"$req",c),he(f,"SID","null"),C.U=!0,Ou(C,f,null)):Ou(C,f,c),this.I=2}}else this.I==3&&(a?kp(this,a):this.i.length==0||lp(this.h)||kp(this))};function kp(a,c){var f;c?f=c.l:f=a.V++;const g=Wt(a.J);he(g,"SID",a.M),he(g,"RID",f),he(g,"AID",a.K),_s(a,g),a.u&&a.o&&Hu(g,a.u,a.o),f=new Cn(a,a.j,f,a.D+1),a.u===null&&(f.J=a.o),c&&(a.i=c.G.concat(a.i)),c=Ap(a,f,1e3),f.H=Math.round(a.va*.5)+Math.round(a.va*.5*Math.random()),Mu(a.h,f),Ou(f,g,c)}function _s(a,c){a.H&&Q(a.H,function(f,g){he(c,g,f)}),a.l&&Q({},function(f,g){he(c,g,f)})}function Ap(a,c,f){f=Math.min(a.i.length,f);const g=a.l?h(a.l.Ka,a.l,a):null;e:{var C=a.i;let Z=-1;for(;;){const Ne=["count="+f];Z==-1?f>0?(Z=C[0].g,Ne.push("ofs="+Z)):Z=0:Ne.push("ofs="+Z);let le=!0;for(let Oe=0;Oe<f;Oe++){var D=C[Oe].g;const qt=C[Oe].map;if(D-=Z,D<0)Z=Math.max(0,C[Oe].g-100),le=!1;else try{D="req"+D+"_"||"";try{var U=qt instanceof Map?qt:Object.entries(qt);for(const[Sr,Dn]of U){let Ln=Dn;l(Dn)&&(Ln=Nu(Dn)),Ne.push(D+Sr+"="+encodeURIComponent(Ln))}}catch(Sr){throw Ne.push(D+"type="+encodeURIComponent("_badmap")),Sr}}catch{g&&g(qt)}}if(le){U=Ne.join("&");break e}}U=void 0}return a=a.i.splice(0,f),c.G=a,U}function Cp(a){if(!a.g&&!a.v){a.Y=1;var c=a.Da;F||v(),M||(F(),M=!0),T.add(c,a),a.A=0}}function $u(a){return a.g||a.v||a.A>=3?!1:(a.Y++,a.v=as(h(a.Da,a),Rp(a,a.A)),a.A++,!0)}t.Da=function(){if(this.v=null,Np(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var a=4*this.T;this.j.info("BP detection timer enabled: "+a),this.B=as(h(this.Wa,this),a)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,rt(10),ra(this),Np(this))};function Wu(a){a.B!=null&&(o.clearTimeout(a.B),a.B=null)}function Np(a){a.g=new Cn(a,a.j,"rpc",a.Y),a.u===null&&(a.g.J=a.o),a.g.P=0;var c=Wt(a.na);he(c,"RID","rpc"),he(c,"SID",a.M),he(c,"AID",a.K),he(c,"CI",a.F?"0":"1"),!a.F&&a.ia&&he(c,"TO",a.ia),he(c,"TYPE","xmlhttp"),_s(a,c),a.u&&a.o&&Hu(c,a.u,a.o),a.O&&(a.g.H=a.O);var f=a.g;a=a.ba,f.M=1,f.A=ea(Wt(c)),f.u=null,f.R=!0,ip(f,a)}t.Va=function(){this.C!=null&&(this.C=null,ra(this),$u(this),rt(19))};function sa(a){a.C!=null&&(o.clearTimeout(a.C),a.C=null)}function Pp(a,c){var f=null;if(a.g==c){sa(a),Wu(a),a.g=null;var g=2}else if(Fu(a.h,c))f=c.G,cp(a.h,c),g=1;else return;if(a.I!=0){if(c.o)if(g==1){f=c.u?c.u.length:0,c=Date.now()-c.F;var C=a.D;g=Jo(),nt(g,new Zf(g,f)),ia(a)}else Cp(a);else if(C=c.m,C==3||C==0&&c.X>0||!(g==1&&DT(a,c)||g==2&&$u(a)))switch(f&&f.length>0&&(c=a.h,c.i=c.i.concat(f)),C){case 1:br(a,5);break;case 4:br(a,10);break;case 3:br(a,6);break;default:br(a,2)}}}function Rp(a,c){let f=a.Qa+Math.floor(Math.random()*a.Za);return a.isActive()||(f*=2),f*c}function br(a,c){if(a.j.info("Error code "+c),c==2){var f=h(a.bb,a),g=a.Ua;const C=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||hs(g,"https"),ea(g),C?kT(g.toString(),f):AT(g.toString(),f)}else rt(2);a.I=0,a.l&&a.l.pa(c),Dp(a),Ip(a)}t.bb=function(a){a?(this.j.info("Successfully pinged google.com"),rt(2)):(this.j.info("Failed to ping google.com"),rt(1))};function Dp(a){if(a.I=0,a.ja=[],a.l){const c=hp(a.h);(c.length!=0||a.i.length!=0)&&(b(a.ja,c),b(a.ja,a.i),a.h.i.length=0,S(a.i),a.i.length=0),a.l.oa()}}function Lp(a,c,f){var g=f instanceof Nn?Wt(f):new Nn(f);if(g.g!="")c&&(g.g=c+"."+g.g),ds(g,g.u);else{var C=o.location;g=C.protocol,c=c?c+"."+C.hostname:C.hostname,C=+C.port;const D=new Nn(null);g&&hs(D,g),c&&(D.g=c),C&&ds(D,C),f&&(D.h=f),g=D}return f=a.G,c=a.wa,f&&c&&he(g,f,c),he(g,"VER",a.ka),_s(a,g),g}function Op(a,c,f){if(c&&!a.L)throw Error("Can't create secondary domain capable XhrIo object.");return c=a.Aa&&!a.ma?new xe(new Bu({ab:f})):new xe(a.ma),c.Fa(a.L),c}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function jp(){}t=jp.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function oa(){}oa.prototype.g=function(a,c){return new mt(a,c)};function mt(a,c){qe.call(this),this.g=new Sp(c),this.l=a,this.h=c&&c.messageUrlParams||null,a=c&&c.messageHeaders||null,c&&c.clientProtocolHeaderRequired&&(a?a["X-Client-Protocol"]="webchannel":a={"X-Client-Protocol":"webchannel"}),this.g.o=a,a=c&&c.initMessageHeaders||null,c&&c.messageContentType&&(a?a["X-WebChannel-Content-Type"]=c.messageContentType:a={"X-WebChannel-Content-Type":c.messageContentType}),c&&c.sa&&(a?a["X-WebChannel-Client-Profile"]=c.sa:a={"X-WebChannel-Client-Profile":c.sa}),this.g.U=a,(a=c&&c.Qb)&&!_(a)&&(this.g.u=a),this.A=c&&c.supportsCrossDomainXhr||!1,this.v=c&&c.sendRawJson||!1,(c=c&&c.httpSessionIdParam)&&!_(c)&&(this.g.G=c,a=this.h,a!==null&&c in a&&(a=this.h,c in a&&delete a[c])),this.j=new ri(this)}m(mt,qe),mt.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},mt.prototype.close=function(){zu(this.g)},mt.prototype.o=function(a){var c=this.g;if(typeof a=="string"){var f={};f.__data__=a,a=f}else this.v&&(f={},f.__data__=Nu(a),a=f);c.i.push(new _T(c.Ya++,a)),c.I==3&&ia(c)},mt.prototype.N=function(){this.g.l=null,delete this.j,zu(this.g),delete this.g,mt.Z.N.call(this)};function Vp(a){Pu.call(this),a.__headers__&&(this.headers=a.__headers__,this.statusCode=a.__status__,delete a.__headers__,delete a.__status__);var c=a.__sm__;if(c){e:{for(const f in c){a=f;break e}a=void 0}(this.i=a)&&(a=this.i,c=c!==null&&a in c?c[a]:void 0),this.data=c}else this.data=a}m(Vp,Pu);function Fp(){Ru.call(this),this.status=1}m(Fp,Ru);function ri(a){this.g=a}m(ri,jp),ri.prototype.ra=function(){nt(this.g,"a")},ri.prototype.qa=function(a){nt(this.g,new Vp(a))},ri.prototype.pa=function(a){nt(this.g,new Fp)},ri.prototype.oa=function(){nt(this.g,"b")},oa.prototype.createWebChannel=oa.prototype.g,mt.prototype.send=mt.prototype.o,mt.prototype.open=mt.prototype.m,mt.prototype.close=mt.prototype.close,n_=function(){return new oa},t_=function(){return Jo()},e_=Tr,Rh={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Xo.NO_ERROR=0,Xo.TIMEOUT=8,Xo.HTTP_ERROR=6,Wa=Xo,ep.COMPLETE="complete",Z0=ep,Qf.EventType=ss,ss.OPEN="a",ss.CLOSE="b",ss.ERROR="c",ss.MESSAGE="d",qe.prototype.listen=qe.prototype.J,Fs=Qf,xe.prototype.listenOnce=xe.prototype.K,xe.prototype.getLastError=xe.prototype.Ha,xe.prototype.getLastErrorCode=xe.prototype.ya,xe.prototype.getStatus=xe.prototype.ca,xe.prototype.getResponseJson=xe.prototype.La,xe.prototype.getResponseText=xe.prototype.la,xe.prototype.send=xe.prototype.ea,xe.prototype.setWithCredentials=xe.prototype.Fa,X0=xe}).apply(typeof Sa<"u"?Sa:typeof self<"u"?self:typeof window<"u"?window:{});/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ye{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ye.UNAUTHENTICATED=new Ye(null),Ye.GOOGLE_CREDENTIALS=new Ye("google-credentials-uid"),Ye.FIRST_PARTY=new Ye("first-party-uid"),Ye.MOCK_USER=new Ye("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xi="12.9.0";function Wb(t){Xi=t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $r=new Kd("@firebase/firestore");function oi(){return $r.logLevel}function H(t,...e){if($r.logLevel<=te.DEBUG){const n=e.map(Yd);$r.debug(`Firestore (${Xi}): ${t}`,...n)}}function Tn(t,...e){if($r.logLevel<=te.ERROR){const n=e.map(Yd);$r.error(`Firestore (${Xi}): ${t}`,...n)}}function Wr(t,...e){if($r.logLevel<=te.WARN){const n=e.map(Yd);$r.warn(`Firestore (${Xi}): ${t}`,...n)}}function Yd(t){if(typeof t=="string")return t;try{return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function G(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,r_(t,r,n)}function r_(t,e,n){let r=`FIRESTORE (${Xi}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Tn(r),new Error(r)}function oe(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||r_(e,i,r)}function J(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class W extends Sn{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i_{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class qb{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ye.UNAUTHENTICATED))}shutdown(){}}class Kb{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Gb{constructor(e){this.t=e,this.currentUser=Ye.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){oe(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new sr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new sr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},l=u=>{H("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>l(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?l(u):(H("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new sr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(H("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(oe(typeof r.accessToken=="string",31837,{l:r}),new i_(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return oe(e===null||typeof e=="string",2055,{h:e}),new Ye(e)}}class Qb{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=Ye.FIRST_PARTY,this.R=new Map}A(){return this.I?this.I():null}get headers(){this.R.set("X-Goog-AuthUser",this.P);const e=this.A();return e&&this.R.set("Authorization",e),this.T&&this.R.set("X-Goog-Iam-Authorization-Token",this.T),this.R}}class Yb{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new Qb(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(Ye.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class sg{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Jb{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,yt(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){oe(this.o===void 0,3512);const r=s=>{s.error!=null&&H("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,H("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{H("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):H("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new sg(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(oe(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new sg(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xb(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jd{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=Xb(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ne(t,e){return t<e?-1:t>e?1:0}function Dh(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return bc(i)===bc(s)?ne(i,s):bc(i)?1:-1}return ne(t.length,e.length)}const Zb=55296,eS=57343;function bc(t){const e=t.charCodeAt(0);return e>=Zb&&e<=eS}function Bi(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const og="__name__";class Qt{constructor(e,n,r){n===void 0?n=0:n>e.length&&G(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&G(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return Qt.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof Qt?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=Qt.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ne(e.length,n.length)}static compareSegments(e,n){const r=Qt.isNumericId(e),i=Qt.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?Qt.extractNumericId(e).compare(Qt.extractNumericId(n)):Dh(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return ir.fromString(e.substring(4,e.length-2))}}class ve extends Qt{construct(e,n,r){return new ve(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new W(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new ve(n)}static emptyPath(){return new ve([])}}const tS=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class He extends Qt{construct(e,n,r){return new He(e,n,r)}static isValidIdentifier(e){return tS.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),He.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===og}static keyField(){return new He([og])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new W(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new W(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new W(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new W(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new He(n)}static emptyPath(){return new He([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q{constructor(e){this.path=e}static fromPath(e){return new q(ve.fromString(e))}static fromName(e){return new q(ve.fromString(e).popFirst(5))}static empty(){return new q(ve.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ve.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return ve.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new q(new ve(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nS(t,e,n){if(!n)throw new W(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function rS(t,e,n,r){if(e===!0&&r===!0)throw new W(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function ag(t){if(!q.isDocumentKey(t))throw new W(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function s_(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function Xd(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":G(12329,{type:typeof t})}function Eo(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new W(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Xd(t);throw new W(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ce(t,e){const n={typeString:t};return e&&(n.value=e),n}function Mo(t,e){if(!s_(t))throw new W(j.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new W(j.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lg=-62135596800,ug=1e6;class fe{static now(){return fe.fromMillis(Date.now())}static fromDate(e){return fe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*ug);return new fe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new W(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<lg)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new W(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/ug}_compareTo(e){return this.seconds===e.seconds?ne(this.nanoseconds,e.nanoseconds):ne(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:fe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Mo(e,fe._jsonSchema))return new fe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-lg;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}fe._jsonSchemaVersion="firestore/timestamp/1.0",fe._jsonSchema={type:Ce("string",fe._jsonSchemaVersion),seconds:Ce("number"),nanoseconds:Ce("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y{static fromTimestamp(e){return new Y(e)}static min(){return new Y(new fe(0,0))}static max(){return new Y(new fe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bo=-1;function iS(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=Y.fromTimestamp(r===1e9?new fe(n+1,0):new fe(n,r));return new lr(i,q.empty(),e)}function sS(t){return new lr(t.readTime,t.key,bo)}class lr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new lr(Y.min(),q.empty(),bo)}static max(){return new lr(Y.max(),q.empty(),bo)}}function oS(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=q.comparator(t.documentKey,e.documentKey),n!==0?n:ne(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aS="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class lS{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Zi(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==aS)throw t;H("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&G(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new O((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof O?n:O.resolve(n)}catch(n){return O.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):O.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):O.reject(n)}static resolve(e){return new O((n,r)=>{n(e)})}static reject(e){return new O((n,r)=>{r(e)})}static waitFor(e){return new O((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=O.resolve(!1);for(const r of e)n=n.next(i=>i?O.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new O((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let u=0;u<s;u++){const h=u;n(e[h]).next(p=>{o[h]=p,++l,l===s&&r(o)},p=>i(p))}})}static doWhile(e,n){return new O((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function uS(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function es(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lu{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}lu.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zd=-1;function uu(t){return t==null}function kl(t){return t===0&&1/t==-1/0}function cS(t){return typeof t=="number"&&Number.isInteger(t)&&!kl(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o_="";function hS(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=cg(e)),e=dS(t.get(n),e);return cg(e)}function dS(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case o_:n+="";break;default:n+=s}}return n}function cg(t){return t+o_+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hg(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Jr(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function a_(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Te{constructor(e,n){this.comparator=e,this.root=n||Be.EMPTY}insert(e,n){return new Te(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Be.BLACK,null,null))}remove(e){return new Te(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Be.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Ia(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Ia(this.root,e,this.comparator,!1)}getReverseIterator(){return new Ia(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Ia(this.root,e,this.comparator,!0)}}class Ia{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Be{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Be.RED,this.left=i??Be.EMPTY,this.right=s??Be.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Be(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Be.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Be.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Be.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Be.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw G(43730,{key:this.key,value:this.value});if(this.right.isRed())throw G(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw G(27949);return e+(this.isRed()?0:1)}}Be.EMPTY=null,Be.RED=!0,Be.BLACK=!1;Be.EMPTY=new class{constructor(){this.size=0}get key(){throw G(57766)}get value(){throw G(16141)}get color(){throw G(16727)}get left(){throw G(29726)}get right(){throw G(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Be(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.comparator=e,this.data=new Te(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new dg(this.data.getIterator())}getIteratorFrom(e){return new dg(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Le)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Le(this.comparator);return n.data=e,n}}class dg{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ft{constructor(e){this.fields=e,e.sort(He.comparator)}static empty(){return new Ft([])}unionWith(e){let n=new Le(He.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Ft(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Bi(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l_ extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class We{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new l_("Invalid base64 string: "+s):s}}(e);return new We(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new We(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ne(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}We.EMPTY_BYTE_STRING=new We("");const fS=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ur(t){if(oe(!!t,39018),typeof t=="string"){let e=0;const n=fS.exec(t);if(oe(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:Se(t.seconds),nanos:Se(t.nanos)}}function Se(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function cr(t){return typeof t=="string"?We.fromBase64String(t):We.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u_="server_timestamp",c_="__type__",h_="__previous_value__",d_="__local_write_time__";function ef(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[c_])==null?void 0:r.stringValue)===u_}function cu(t){const e=t.mapValue.fields[h_];return ef(e)?cu(e):e}function So(t){const e=ur(t.mapValue.fields[d_].timestampValue);return new fe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pS{constructor(e,n,r,i,s,o,l,u,h,p,m){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=u,this.useFetchStreams=h,this.isUsingEmulator=p,this.apiKey=m}}const Al="(default)";class Io{constructor(e,n){this.projectId=e,this.database=n||Al}static empty(){return new Io("","")}get isDefaultDatabase(){return this.database===Al}isEqual(e){return e instanceof Io&&e.projectId===this.projectId&&e.database===this.database}}function mS(t,e){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new W(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Io(t.options.projectId,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f_="__type__",p_="__max__",ka={mapValue:{fields:{__type__:{stringValue:p_}}}},m_="__vector__",Cl="value";function hr(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ef(t)?4:yS(t)?9007199254740991:gS(t)?10:11:G(28295,{value:t})}function rn(t,e){if(t===e)return!0;const n=hr(t);if(n!==hr(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return So(t).isEqual(So(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ur(i.timestampValue),l=ur(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return cr(i.bytesValue).isEqual(cr(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return Se(i.geoPointValue.latitude)===Se(s.geoPointValue.latitude)&&Se(i.geoPointValue.longitude)===Se(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return Se(i.integerValue)===Se(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=Se(i.doubleValue),l=Se(s.doubleValue);return o===l?kl(o)===kl(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Bi(t.arrayValue.values||[],e.arrayValue.values||[],rn);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(hg(o)!==hg(l))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(l[u]===void 0||!rn(o[u],l[u])))return!1;return!0}(t,e);default:return G(52216,{left:t})}}function ko(t,e){return(t.values||[]).find(n=>rn(n,e))!==void 0}function Hi(t,e){if(t===e)return 0;const n=hr(t),r=hr(e);if(n!==r)return ne(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ne(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=Se(s.integerValue||s.doubleValue),u=Se(o.integerValue||o.doubleValue);return l<u?-1:l>u?1:l===u?0:isNaN(l)?isNaN(u)?0:-1:1}(t,e);case 3:return fg(t.timestampValue,e.timestampValue);case 4:return fg(So(t),So(e));case 5:return Dh(t.stringValue,e.stringValue);case 6:return function(s,o){const l=cr(s),u=cr(o);return l.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),u=o.split("/");for(let h=0;h<l.length&&h<u.length;h++){const p=ne(l[h],u[h]);if(p!==0)return p}return ne(l.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ne(Se(s.latitude),Se(o.latitude));return l!==0?l:ne(Se(s.longitude),Se(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return pg(t.arrayValue,e.arrayValue);case 10:return function(s,o){var y,S,b,P;const l=s.fields||{},u=o.fields||{},h=(y=l[Cl])==null?void 0:y.arrayValue,p=(S=u[Cl])==null?void 0:S.arrayValue,m=ne(((b=h==null?void 0:h.values)==null?void 0:b.length)||0,((P=p==null?void 0:p.values)==null?void 0:P.length)||0);return m!==0?m:pg(h,p)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===ka.mapValue&&o===ka.mapValue)return 0;if(s===ka.mapValue)return 1;if(o===ka.mapValue)return-1;const l=s.fields||{},u=Object.keys(l),h=o.fields||{},p=Object.keys(h);u.sort(),p.sort();for(let m=0;m<u.length&&m<p.length;++m){const y=Dh(u[m],p[m]);if(y!==0)return y;const S=Hi(l[u[m]],h[p[m]]);if(S!==0)return S}return ne(u.length,p.length)}(t.mapValue,e.mapValue);default:throw G(23264,{he:n})}}function fg(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ne(t,e);const n=ur(t),r=ur(e),i=ne(n.seconds,r.seconds);return i!==0?i:ne(n.nanos,r.nanos)}function pg(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=Hi(n[i],r[i]);if(s)return s}return ne(n.length,r.length)}function zi(t){return Lh(t)}function Lh(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ur(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return cr(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return q.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Lh(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Lh(n.fields[o])}`;return i+"}"}(t.mapValue):G(61005,{value:t})}function qa(t){switch(hr(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=cu(t);return e?16+qa(e):16;case 5:return 2*t.stringValue.length;case 6:return cr(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+qa(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Jr(r.fields,(s,o)=>{i+=s.length+qa(o)}),i}(t.mapValue);default:throw G(13486,{value:t})}}function Oh(t){return!!t&&"integerValue"in t}function tf(t){return!!t&&"arrayValue"in t}function mg(t){return!!t&&"nullValue"in t}function gg(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ka(t){return!!t&&"mapValue"in t}function gS(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[f_])==null?void 0:r.stringValue)===m_}function Xs(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Jr(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Xs(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Xs(t.arrayValue.values[n]);return e}return{...t}}function yS(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===p_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class It{constructor(e){this.value=e}static empty(){return new It({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Ka(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Xs(n)}setAll(e){let n=He.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Xs(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Ka(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return rn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Ka(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Jr(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new It(Xs(this.value))}}function g_(t){const e=[];return Jr(t.fields,(n,r)=>{const i=new He([n]);if(Ka(r)){const s=g_(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Ft(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Xe(e,0,Y.min(),Y.min(),Y.min(),It.empty(),0)}static newFoundDocument(e,n,r,i){return new Xe(e,1,n,Y.min(),r,i,0)}static newNoDocument(e,n){return new Xe(e,2,n,Y.min(),Y.min(),It.empty(),0)}static newUnknownDocument(e,n){return new Xe(e,3,n,Y.min(),Y.min(),It.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(Y.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=It.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=It.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Y.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Xe&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Xe(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nl{constructor(e,n){this.position=e,this.inclusive=n}}function yg(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=q.comparator(q.fromName(o.referenceValue),n.key):r=Hi(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function vg(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!rn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function vS(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class y_{}class Re extends y_{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new wS(e,n,r):n==="array-contains"?new ES(e,r):n==="in"?new bS(e,r):n==="not-in"?new SS(e,r):n==="array-contains-any"?new IS(e,r):new Re(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new TS(e,r):new xS(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Hi(n,this.value)):n!==null&&hr(this.value)===hr(n)&&this.matchesComparison(Hi(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return G(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class sn extends y_{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new sn(e,n)}matches(e){return v_(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function v_(t){return t.op==="and"}function __(t){return _S(t)&&v_(t)}function _S(t){for(const e of t.filters)if(e instanceof sn)return!1;return!0}function jh(t){if(t instanceof Re)return t.field.canonicalString()+t.op.toString()+zi(t.value);if(__(t))return t.filters.map(e=>jh(e)).join(",");{const e=t.filters.map(n=>jh(n)).join(",");return`${t.op}(${e})`}}function w_(t,e){return t instanceof Re?function(r,i){return i instanceof Re&&r.op===i.op&&r.field.isEqual(i.field)&&rn(r.value,i.value)}(t,e):t instanceof sn?function(r,i){return i instanceof sn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&w_(o,i.filters[l]),!0):!1}(t,e):void G(19439)}function T_(t){return t instanceof Re?function(n){return`${n.field.canonicalString()} ${n.op} ${zi(n.value)}`}(t):t instanceof sn?function(n){return n.op.toString()+" {"+n.getFilters().map(T_).join(" ,")+"}"}(t):"Filter"}class wS extends Re{constructor(e,n,r){super(e,n,r),this.key=q.fromName(r.referenceValue)}matches(e){const n=q.comparator(e.key,this.key);return this.matchesComparison(n)}}class TS extends Re{constructor(e,n){super(e,"in",n),this.keys=x_("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class xS extends Re{constructor(e,n){super(e,"not-in",n),this.keys=x_("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function x_(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>q.fromName(r.referenceValue))}class ES extends Re{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return tf(n)&&ko(n.arrayValue,this.value)}}class bS extends Re{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&ko(this.value.arrayValue,n)}}class SS extends Re{constructor(e,n){super(e,"not-in",n)}matches(e){if(ko(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!ko(this.value.arrayValue,n)}}class IS extends Re{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!tf(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>ko(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kS{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.Te=null}}function _g(t,e=null,n=[],r=[],i=null,s=null,o=null){return new kS(t,e,n,r,i,s,o)}function nf(t){const e=J(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>jh(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),uu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>zi(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>zi(r)).join(",")),e.Te=n}return e.Te}function rf(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!vS(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!w_(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!vg(t.startAt,e.startAt)&&vg(t.endAt,e.endAt)}function Vh(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hu{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=u,this.Ie=null,this.Ee=null,this.Re=null,this.startAt,this.endAt}}function AS(t,e,n,r,i,s,o,l){return new hu(t,e,n,r,i,s,o,l)}function sf(t){return new hu(t)}function wg(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function CS(t){return q.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}function NS(t){return t.collectionGroup!==null}function Zs(t){const e=J(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let l=new Le(He.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(h=>{h.isInequality()&&(l=l.add(h.field))})}),l})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new Pl(s,r))}),n.has(He.keyField().canonicalString())||e.Ie.push(new Pl(He.keyField(),r))}return e.Ie}function Zt(t){const e=J(t);return e.Ee||(e.Ee=PS(e,Zs(t))),e.Ee}function PS(t,e){if(t.limitType==="F")return _g(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Pl(i.field,s)});const n=t.endAt?new Nl(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Nl(t.startAt.position,t.startAt.inclusive):null;return _g(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Fh(t,e,n){return new hu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function du(t,e){return rf(Zt(t),Zt(e))&&t.limitType===e.limitType}function E_(t){return`${nf(Zt(t))}|lt:${t.limitType}`}function ai(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>T_(i)).join(", ")}]`),uu(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>zi(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>zi(i)).join(",")),`Target(${r})`}(Zt(t))}; limitType=${t.limitType})`}function fu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):q.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of Zs(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,u){const h=yg(o,l,u);return o.inclusive?h<=0:h<0}(r.startAt,Zs(r),i)||r.endAt&&!function(o,l,u){const h=yg(o,l,u);return o.inclusive?h>=0:h>0}(r.endAt,Zs(r),i))}(t,e)}function RS(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function b_(t){return(e,n)=>{let r=!1;for(const i of Zs(t)){const s=DS(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function DS(t,e,n){const r=t.field.isKeyField()?q.comparator(e.key,n.key):function(s,o,l){const u=o.data.field(s),h=l.data.field(s);return u!==null&&h!==null?Hi(u,h):G(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return G(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Jr(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return a_(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LS=new Te(q.comparator);function xn(){return LS}const S_=new Te(q.comparator);function Ms(...t){let e=S_;for(const n of t)e=e.insert(n.key,n);return e}function I_(t){let e=S_;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Rr(){return eo()}function k_(){return eo()}function eo(){return new Xr(t=>t.toString(),(t,e)=>t.isEqual(e))}const OS=new Te(q.comparator),jS=new Le(q.comparator);function re(...t){let e=jS;for(const n of t)e=e.add(n);return e}const VS=new Le(ne);function FS(){return VS}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function of(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:kl(e)?"-0":e}}function A_(t){return{integerValue:""+t}}function MS(t,e){return cS(e)?A_(e):of(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pu{constructor(){this._=void 0}}function US(t,e,n){return t instanceof Rl?function(i,s){const o={fields:{[c_]:{stringValue:u_},[d_]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&ef(s)&&(s=cu(s)),s&&(o.fields[h_]=s),{mapValue:o}}(n,e):t instanceof Ao?N_(t,e):t instanceof Co?P_(t,e):function(i,s){const o=C_(i,s),l=Tg(o)+Tg(i.Ae);return Oh(o)&&Oh(i.Ae)?A_(l):of(i.serializer,l)}(t,e)}function BS(t,e,n){return t instanceof Ao?N_(t,e):t instanceof Co?P_(t,e):n}function C_(t,e){return t instanceof Dl?function(r){return Oh(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Rl extends pu{}class Ao extends pu{constructor(e){super(),this.elements=e}}function N_(t,e){const n=R_(e);for(const r of t.elements)n.some(i=>rn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Co extends pu{constructor(e){super(),this.elements=e}}function P_(t,e){let n=R_(e);for(const r of t.elements)n=n.filter(i=>!rn(i,r));return{arrayValue:{values:n}}}class Dl extends pu{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function Tg(t){return Se(t.integerValue||t.doubleValue)}function R_(t){return tf(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function HS(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Ao&&i instanceof Ao||r instanceof Co&&i instanceof Co?Bi(r.elements,i.elements,rn):r instanceof Dl&&i instanceof Dl?rn(r.Ae,i.Ae):r instanceof Rl&&i instanceof Rl}(t.transform,e.transform)}class zS{constructor(e,n){this.version=e,this.transformResults=n}}class pn{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new pn}static exists(e){return new pn(void 0,e)}static updateTime(e){return new pn(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Ga(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class mu{}function D_(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new O_(t.key,pn.none()):new Uo(t.key,t.data,pn.none());{const n=t.data,r=It.empty();let i=new Le(He.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Zr(t.key,r,new Ft(i.toArray()),pn.none())}}function $S(t,e,n){t instanceof Uo?function(i,s,o){const l=i.value.clone(),u=Eg(i.fieldTransforms,s,o.transformResults);l.setAll(u),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Zr?function(i,s,o){if(!Ga(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=Eg(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(L_(i)),u.setAll(l),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function to(t,e,n,r){return t instanceof Uo?function(s,o,l,u){if(!Ga(s.precondition,o))return l;const h=s.value.clone(),p=bg(s.fieldTransforms,u,o);return h.setAll(p),o.convertToFoundDocument(o.version,h).setHasLocalMutations(),null}(t,e,n,r):t instanceof Zr?function(s,o,l,u){if(!Ga(s.precondition,o))return l;const h=bg(s.fieldTransforms,u,o),p=o.data;return p.setAll(L_(s)),p.setAll(h),o.convertToFoundDocument(o.version,p).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(m=>m.field))}(t,e,n,r):function(s,o,l){return Ga(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function WS(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=C_(r.transform,i||null);s!=null&&(n===null&&(n=It.empty()),n.set(r.field,s))}return n||null}function xg(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Bi(r,i,(s,o)=>HS(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Uo extends mu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Zr extends mu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function L_(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function Eg(t,e,n){const r=new Map;oe(t.length===n.length,32656,{Ve:n.length,de:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,BS(o,l,n[i]))}return r}function bg(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,US(s,o,e))}return r}class O_ extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class qS extends mu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KS{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&$S(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=to(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=to(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=k_();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const u=D_(o,l);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(Y.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),re())}isEqual(e){return this.batchId===e.batchId&&Bi(this.mutations,e.mutations,(n,r)=>xg(n,r))&&Bi(this.baseMutations,e.baseMutations,(n,r)=>xg(n,r))}}class af{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){oe(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return OS}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new af(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GS{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QS{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ke,ie;function YS(t){switch(t){case j.OK:return G(64938);case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0;default:return G(15467,{code:t})}}function j_(t){if(t===void 0)return Tn("GRPC error has no .code"),j.UNKNOWN;switch(t){case ke.OK:return j.OK;case ke.CANCELLED:return j.CANCELLED;case ke.UNKNOWN:return j.UNKNOWN;case ke.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case ke.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case ke.INTERNAL:return j.INTERNAL;case ke.UNAVAILABLE:return j.UNAVAILABLE;case ke.UNAUTHENTICATED:return j.UNAUTHENTICATED;case ke.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case ke.NOT_FOUND:return j.NOT_FOUND;case ke.ALREADY_EXISTS:return j.ALREADY_EXISTS;case ke.PERMISSION_DENIED:return j.PERMISSION_DENIED;case ke.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case ke.ABORTED:return j.ABORTED;case ke.OUT_OF_RANGE:return j.OUT_OF_RANGE;case ke.UNIMPLEMENTED:return j.UNIMPLEMENTED;case ke.DATA_LOSS:return j.DATA_LOSS;default:return G(39323,{code:t})}}(ie=ke||(ke={}))[ie.OK=0]="OK",ie[ie.CANCELLED=1]="CANCELLED",ie[ie.UNKNOWN=2]="UNKNOWN",ie[ie.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ie[ie.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ie[ie.NOT_FOUND=5]="NOT_FOUND",ie[ie.ALREADY_EXISTS=6]="ALREADY_EXISTS",ie[ie.PERMISSION_DENIED=7]="PERMISSION_DENIED",ie[ie.UNAUTHENTICATED=16]="UNAUTHENTICATED",ie[ie.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ie[ie.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ie[ie.ABORTED=10]="ABORTED",ie[ie.OUT_OF_RANGE=11]="OUT_OF_RANGE",ie[ie.UNIMPLEMENTED=12]="UNIMPLEMENTED",ie[ie.INTERNAL=13]="INTERNAL",ie[ie.UNAVAILABLE=14]="UNAVAILABLE",ie[ie.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function JS(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XS=new ir([4294967295,4294967295],0);function Sg(t){const e=JS().encode(t),n=new J0;return n.update(e),new Uint8Array(n.digest())}function Ig(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new ir([n,r],0),new ir([i,s],0)]}class lf{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Us(`Invalid padding: ${n}`);if(r<0)throw new Us(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new Us(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new Us(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=ir.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(ir.fromNumber(r)));return i.compare(XS)===1&&(i=new ir([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=Sg(e),[r,i]=Ig(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new lf(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.ge===0)return;const n=Sg(e),[r,i]=Ig(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.be(o)}}be(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class Us extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gu{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Bo.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new gu(Y.min(),i,new Te(ne),xn(),re())}}class Bo{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Bo(r,n,re(),re(),re())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qa{constructor(e,n,r,i){this.Se=e,this.removedTargetIds=n,this.key=r,this.De=i}}class V_{constructor(e,n){this.targetId=e,this.Ce=n}}class F_{constructor(e,n,r=We.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class kg{constructor(){this.ve=0,this.Fe=Ag(),this.Me=We.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=re(),n=re(),r=re();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:G(38017,{changeType:s})}}),new Bo(this.Me,this.xe,e,n,r)}Ke(){this.Oe=!1,this.Fe=Ag()}qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}Ue(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}$e(){this.ve+=1}We(){this.ve-=1,oe(this.ve>=0,3241,{ve:this.ve})}Qe(){this.Oe=!0,this.xe=!0}}class ZS{constructor(e){this.Ge=e,this.ze=new Map,this.je=xn(),this.He=Aa(),this.Je=Aa(),this.Ze=new Te(ne)}Xe(e){for(const n of e.Se)e.De&&e.De.isFoundDocument()?this.Ye(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.We(),r.Ne||r.Ke(),r.Le(e.resumeToken);break;case 2:r.We(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.Qe(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:G(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(Vh(s))if(r===0){const o=new q(s.path);this.et(n,o,Xe.newNoDocument(o,Y.min()))}else oe(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const l=this.ut(e),u=l?this.ct(l,e,o):1;if(u!==0){this.it(n);const h=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,h)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=cr(r).toUint8Array()}catch(u){if(u instanceof l_)return Wr("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{l=new lf(o,i,s)}catch(u){return Wr(u instanceof Us?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return l.ge===0?null:l}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const l=this.ot(o);if(l){if(s.current&&Vh(l.target)){const u=new q(l.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Xe.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.Ke())}});let r=re();this.Je.forEach((s,o)=>{let l=!0;o.forEachWhile(u=>{const h=this.ot(u);return!h||h.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new gu(e,n,this.Ze,this.je,r);return this.je=xn(),this.He=Aa(),this.Je=Aa(),this.Ze=new Te(ne),i}Ye(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).qe(n.key,r),this.je=this.je.insert(n.key,n),this.He=this.He.insert(n.key,this.It(n.key).add(e)),this.Je=this.Je.insert(n.key,this.Rt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.qe(n,1):i.Ue(n),this.Je=this.Je.insert(n,this.Rt(n).delete(e)),this.Je=this.Je.insert(n,this.Rt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}$e(e){this.nt(e).$e()}nt(e){let n=this.ze.get(e);return n||(n=new kg,this.ze.set(e,n)),n}Rt(e){let n=this.Je.get(e);return n||(n=new Le(ne),this.Je=this.Je.insert(e,n)),n}It(e){let n=this.He.get(e);return n||(n=new Le(ne),this.He=this.He.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||H("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new kg),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function Aa(){return new Te(q.comparator)}function Ag(){return new Te(q.comparator)}const eI=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),tI=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),nI=(()=>({and:"AND",or:"OR"}))();class rI{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Mh(t,e){return t.useProto3Json||uu(e)?e:{value:e}}function Ll(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function M_(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function iI(t,e){return Ll(t,e.toTimestamp())}function en(t){return oe(!!t,49232),Y.fromTimestamp(function(n){const r=ur(n);return new fe(r.seconds,r.nanos)}(t))}function uf(t,e){return Uh(t,e).canonicalString()}function Uh(t,e){const n=function(i){return new ve(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function U_(t){const e=ve.fromString(t);return oe(W_(e),10190,{key:e.toString()}),e}function Bh(t,e){return uf(t.databaseId,e.path)}function Sc(t,e){const n=U_(e);if(n.get(1)!==t.databaseId.projectId)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new W(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new q(H_(n))}function B_(t,e){return uf(t.databaseId,e)}function sI(t){const e=U_(t);return e.length===4?ve.emptyPath():H_(e)}function Hh(t){return new ve(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function H_(t){return oe(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function Cg(t,e,n){return{name:Bh(t,e),fields:n.value.mapValue.fields}}function oI(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(h){return h==="NO_CHANGE"?0:h==="ADD"?1:h==="REMOVE"?2:h==="CURRENT"?3:h==="RESET"?4:G(39313,{state:h})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(h,p){return h.useProto3Json?(oe(p===void 0||typeof p=="string",58123),We.fromBase64String(p||"")):(oe(p===void 0||p instanceof Buffer||p instanceof Uint8Array,16193),We.fromUint8Array(p||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(h){const p=h.code===void 0?j.UNKNOWN:j_(h.code);return new W(p,h.message||"")}(o);n=new F_(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Sc(t,r.document.name),s=en(r.document.updateTime),o=r.document.createTime?en(r.document.createTime):Y.min(),l=new It({mapValue:{fields:r.document.fields}}),u=Xe.newFoundDocument(i,s,o,l),h=r.targetIds||[],p=r.removedTargetIds||[];n=new Qa(h,p,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Sc(t,r.document),s=r.readTime?en(r.readTime):Y.min(),o=Xe.newNoDocument(i,s),l=r.removedTargetIds||[];n=new Qa([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Sc(t,r.document),s=r.removedTargetIds||[];n=new Qa([],s,i,null)}else{if(!("filter"in e))return G(11601,{Vt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new QS(i,s),l=r.targetId;n=new V_(l,o)}}return n}function aI(t,e){let n;if(e instanceof Uo)n={update:Cg(t,e.key,e.value)};else if(e instanceof O_)n={delete:Bh(t,e.key)};else if(e instanceof Zr)n={update:Cg(t,e.key,e.data),updateMask:gI(e.fieldMask)};else{if(!(e instanceof qS))return G(16599,{dt:e.type});n={verify:Bh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Rl)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof Ao)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Co)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof Dl)return{fieldPath:o.field.canonicalString(),increment:l.Ae};throw G(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:iI(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:G(27497)}(t,e.precondition)),n}function lI(t,e){return t&&t.length>0?(oe(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?en(i.updateTime):en(s);return o.isEqual(Y.min())&&(o=en(s)),new zS(o,i.transformResults||[])}(n,e))):[]}function uI(t,e){return{documents:[B_(t,e.path)]}}function cI(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=B_(t,i);const s=function(h){if(h.length!==0)return $_(sn.create(h,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(h){if(h.length!==0)return h.map(p=>function(y){return{field:li(y.field),direction:fI(y.dir)}}(p))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const l=Mh(t,e.limit);return l!==null&&(n.structuredQuery.limit=l),e.startAt&&(n.structuredQuery.startAt=function(h){return{before:h.inclusive,values:h.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(h){return{before:!h.inclusive,values:h.position}}(e.endAt)),{ft:n,parent:i}}function hI(t){let e=sI(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){oe(r===1,65062);const p=n.from[0];p.allDescendants?i=p.collectionId:e=e.child(p.collectionId)}let s=[];n.where&&(s=function(m){const y=z_(m);return y instanceof sn&&__(y)?y.getFilters():[y]}(n.where));let o=[];n.orderBy&&(o=function(m){return m.map(y=>function(b){return new Pl(ui(b.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(b.direction))}(y))}(n.orderBy));let l=null;n.limit&&(l=function(m){let y;return y=typeof m=="object"?m.value:m,uu(y)?null:y}(n.limit));let u=null;n.startAt&&(u=function(m){const y=!!m.before,S=m.values||[];return new Nl(S,y)}(n.startAt));let h=null;return n.endAt&&(h=function(m){const y=!m.before,S=m.values||[];return new Nl(S,y)}(n.endAt)),AS(e,i,o,s,l,"F",u,h)}function dI(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return G(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function z_(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ui(n.unaryFilter.field);return Re.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=ui(n.unaryFilter.field);return Re.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ui(n.unaryFilter.field);return Re.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ui(n.unaryFilter.field);return Re.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return G(61313);default:return G(60726)}}(t):t.fieldFilter!==void 0?function(n){return Re.create(ui(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return G(58110);default:return G(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return sn.create(n.compositeFilter.filters.map(r=>z_(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return G(1026)}}(n.compositeFilter.op))}(t):G(30097,{filter:t})}function fI(t){return eI[t]}function pI(t){return tI[t]}function mI(t){return nI[t]}function li(t){return{fieldPath:t.canonicalString()}}function ui(t){return He.fromServerFormat(t.fieldPath)}function $_(t){return t instanceof Re?function(n){if(n.op==="=="){if(gg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NAN"}};if(mg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(gg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NAN"}};if(mg(n.value))return{unaryFilter:{field:li(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:li(n.field),op:pI(n.op),value:n.value}}}(t):t instanceof sn?function(n){const r=n.getFilters().map(i=>$_(i));return r.length===1?r[0]:{compositeFilter:{op:mI(n.op),filters:r}}}(t):G(54877,{filter:t})}function gI(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function W_(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}function q_(t){return!!t&&typeof t._toProto=="function"&&t._protoValueType==="ProtoValue"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qn{constructor(e,n,r,i,s=Y.min(),o=Y.min(),l=We.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=u}withSequenceNumber(e){return new qn(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new qn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yI{constructor(e){this.yt=e}}function vI(t){const e=hI({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Fh(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _I{constructor(){this.Sn=new wI}addToCollectionParentIndex(e,n){return this.Sn.add(n),O.resolve()}getCollectionParents(e,n){return O.resolve(this.Sn.getEntries(n))}addFieldIndex(e,n){return O.resolve()}deleteFieldIndex(e,n){return O.resolve()}deleteAllFieldIndexes(e){return O.resolve()}createTargetIndexes(e,n){return O.resolve()}getDocumentsMatchingTarget(e,n){return O.resolve(null)}getIndexType(e,n){return O.resolve(0)}getFieldIndexes(e,n){return O.resolve([])}getNextCollectionGroupToUpdate(e){return O.resolve(null)}getMinOffset(e,n){return O.resolve(lr.min())}getMinOffsetFromCollectionGroup(e,n){return O.resolve(lr.min())}updateCollectionGroup(e,n,r){return O.resolve()}updateIndexEntries(e,n){return O.resolve()}}class wI{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Le(ve.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Le(ve.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ng={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},K_=41943040;class lt{static withCacheSize(e){return new lt(e,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */lt.DEFAULT_COLLECTION_PERCENTILE=10,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,lt.DEFAULT=new lt(K_,lt.DEFAULT_COLLECTION_PERCENTILE,lt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),lt.DISABLED=new lt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.sr=e}next(){return this.sr+=2,this.sr}static _r(){return new $i(0)}static ar(){return new $i(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pg="LruGarbageCollector",TI=1048576;function Rg([t,e],[n,r]){const i=ne(t,n);return i===0?ne(e,r):i}class xI{constructor(e){this.Pr=e,this.buffer=new Le(Rg),this.Tr=0}Ir(){return++this.Tr}Er(e){const n=[e,this.Ir()];if(this.buffer.size<this.Pr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();Rg(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class EI{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ar(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Ar(e){H(Pg,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){es(n)?H(Pg,"Ignoring IndexedDB error during garbage collection: ",n):await Zi(n)}await this.Ar(3e5)})}}class bI{constructor(e,n){this.Vr=e,this.params=n}calculateTargetCount(e,n){return this.Vr.dr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return O.resolve(lu.ce);const r=new xI(n);return this.Vr.forEachTarget(e,i=>r.Er(i.sequenceNumber)).next(()=>this.Vr.mr(e,i=>r.Er(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.Vr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.Vr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(H("LruGarbageCollector","Garbage collection skipped; disabled"),O.resolve(Ng)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(H("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Ng):this.gr(e,n))}getCacheSize(e){return this.Vr.getCacheSize(e)}gr(e,n){let r,i,s,o,l,u,h;const p=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(m=>(m>this.params.maximumSequenceNumbersToCollect?(H("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${m}`),i=this.params.maximumSequenceNumbersToCollect):i=m,o=Date.now(),this.nthSequenceNumber(e,i))).next(m=>(r=m,l=Date.now(),this.removeTargets(e,r,n))).next(m=>(s=m,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(m=>(h=Date.now(),oi()<=te.DEBUG&&H("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-p}ms
	Determined least recently used ${i} in `+(l-o)+`ms
	Removed ${s} targets in `+(u-l)+`ms
	Removed ${m} documents in `+(h-u)+`ms
Total Duration: ${h-p}ms`),O.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:m})))}}function SI(t,e){return new bI(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(){this.changes=new Xr(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Xe.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?O.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kI{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AI{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&to(r.mutation,i,Ft.empty(),fe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,re()).next(()=>r))}getLocalViewOfDocuments(e,n,r=re()){const i=Rr();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ms();return s.forEach((l,u)=>{o=o.insert(l,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Rr();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,re()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=xn();const o=eo(),l=function(){return eo()}();return n.forEach((u,h)=>{const p=r.get(h.key);i.has(h.key)&&(p===void 0||p.mutation instanceof Zr)?s=s.insert(h.key,h):p!==void 0?(o.set(h.key,p.mutation.getFieldMask()),to(p.mutation,h,p.mutation.getFieldMask(),fe.now())):o.set(h.key,Ft.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((h,p)=>o.set(h,p)),n.forEach((h,p)=>l.set(h,new kI(p,o.get(h)??null))),l))}recalculateAndSaveOverlays(e,n){const r=eo();let i=new Te((o,l)=>o-l),s=re();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(u=>{const h=n.get(u);if(h===null)return;let p=r.get(u)||Ft.empty();p=l.applyToLocalView(h,p),r.set(u,p);const m=(i.get(l.batchId)||re()).add(u);i=i.insert(l.batchId,m)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const u=l.getNext(),h=u.key,p=u.value,m=k_();p.forEach(y=>{if(!s.has(y)){const S=D_(n.get(y),r.get(y));S!==null&&m.set(y,S),s=s.add(y)}}),o.push(this.documentOverlayCache.saveOverlays(e,h,m))}return O.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return CS(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):NS(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):O.resolve(Rr());let l=bo,u=s;return o.next(h=>O.forEach(h,(p,m)=>(l<m.largestBatchId&&(l=m.largestBatchId),s.get(p)?O.resolve():this.remoteDocumentCache.getEntry(e,p).next(y=>{u=u.insert(p,y)}))).next(()=>this.populateOverlays(e,h,s)).next(()=>this.computeViews(e,u,h,re())).next(p=>({batchId:l,changes:I_(p)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new q(n)).next(r=>{let i=Ms();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ms();return this.indexManager.getCollectionParents(e,s).next(l=>O.forEach(l,u=>{const h=function(m,y){return new hu(y,null,m.explicitOrderBy.slice(),m.filters.slice(),m.limit,m.limitType,m.startAt,m.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,h,r,i).next(p=>{p.forEach((m,y)=>{o=o.insert(m,y)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,h)=>{const p=h.getKey();o.get(p)===null&&(o=o.insert(p,Xe.newInvalidDocument(p)))});let l=Ms();return o.forEach((u,h)=>{const p=s.get(u);p!==void 0&&to(p.mutation,h,Ft.empty(),fe.now()),fu(n,h)&&(l=l.insert(u,h))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CI{constructor(e){this.serializer=e,this.Nr=new Map,this.Br=new Map}getBundleMetadata(e,n){return O.resolve(this.Nr.get(n))}saveBundleMetadata(e,n){return this.Nr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:en(i.createTime)}}(n)),O.resolve()}getNamedQuery(e,n){return O.resolve(this.Br.get(n))}saveNamedQuery(e,n){return this.Br.set(n.name,function(i){return{name:i.name,query:vI(i.bundledQuery),readTime:en(i.readTime)}}(n)),O.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(){this.overlays=new Te(q.comparator),this.Lr=new Map}getOverlay(e,n){return O.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Rr();return O.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.bt(e,n,s)}),O.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.Lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.Lr.delete(r)),O.resolve()}getOverlaysForCollection(e,n,r){const i=Rr(),s=n.length+1,o=new q(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const u=l.getNext().value,h=u.getKey();if(!n.isPrefixOf(h.path))break;h.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return O.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Te((h,p)=>h-p);const o=this.overlays.getIterator();for(;o.hasNext();){const h=o.getNext().value;if(h.getKey().getCollectionGroup()===n&&h.largestBatchId>r){let p=s.get(h.largestBatchId);p===null&&(p=Rr(),s=s.insert(h.largestBatchId,p)),p.set(h.getKey(),h)}}const l=Rr(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((h,p)=>l.set(h,p)),!(l.size()>=i)););return O.resolve(l)}bt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.Lr.get(i.largestBatchId).delete(r.key);this.Lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new GS(n,r));let s=this.Lr.get(n);s===void 0&&(s=re(),this.Lr.set(n,s)),this.Lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PI{constructor(){this.sessionToken=We.EMPTY_BYTE_STRING}getSessionToken(e){return O.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,O.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cf{constructor(){this.kr=new Le(je.Kr),this.qr=new Le(je.Ur)}isEmpty(){return this.kr.isEmpty()}addReference(e,n){const r=new je(e,n);this.kr=this.kr.add(r),this.qr=this.qr.add(r)}$r(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Wr(new je(e,n))}Qr(e,n){e.forEach(r=>this.removeReference(r,n))}Gr(e){const n=new q(new ve([])),r=new je(n,e),i=new je(n,e+1),s=[];return this.qr.forEachInRange([r,i],o=>{this.Wr(o),s.push(o.key)}),s}zr(){this.kr.forEach(e=>this.Wr(e))}Wr(e){this.kr=this.kr.delete(e),this.qr=this.qr.delete(e)}jr(e){const n=new q(new ve([])),r=new je(n,e),i=new je(n,e+1);let s=re();return this.qr.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new je(e,0),r=this.kr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class je{constructor(e,n){this.key=e,this.Hr=n}static Kr(e,n){return q.comparator(e.key,n.key)||ne(e.Hr,n.Hr)}static Ur(e,n){return ne(e.Hr,n.Hr)||q.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RI{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.Yn=1,this.Jr=new Le(je.Kr)}checkEmpty(e){return O.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.Yn;this.Yn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new KS(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.Jr=this.Jr.add(new je(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return O.resolve(o)}lookupMutationBatch(e,n){return O.resolve(this.Zr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Xr(r),s=i<0?0:i;return O.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return O.resolve(this.mutationQueue.length===0?Zd:this.Yn-1)}getAllMutationBatches(e){return O.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new je(n,0),i=new je(n,Number.POSITIVE_INFINITY),s=[];return this.Jr.forEachInRange([r,i],o=>{const l=this.Zr(o.Hr);s.push(l)}),O.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Le(ne);return n.forEach(i=>{const s=new je(i,0),o=new je(i,Number.POSITIVE_INFINITY);this.Jr.forEachInRange([s,o],l=>{r=r.add(l.Hr)})}),O.resolve(this.Yr(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;q.isDocumentKey(s)||(s=s.child(""));const o=new je(new q(s),0);let l=new Le(ne);return this.Jr.forEachWhile(u=>{const h=u.key.path;return!!r.isPrefixOf(h)&&(h.length===i&&(l=l.add(u.Hr)),!0)},o),O.resolve(this.Yr(l))}Yr(e){const n=[];return e.forEach(r=>{const i=this.Zr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){oe(this.ei(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Jr;return O.forEach(n.mutations,i=>{const s=new je(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Jr=r})}nr(e){}containsKey(e,n){const r=new je(n,0),i=this.Jr.firstAfterOrEqual(r);return O.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,O.resolve()}ei(e,n){return this.Xr(e)}Xr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Zr(e){const n=this.Xr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e){this.ti=e,this.docs=function(){return new Te(q.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ti(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return O.resolve(r?r.document.mutableCopy():Xe.newInvalidDocument(n))}getEntries(e,n){let r=xn();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Xe.newInvalidDocument(i))}),O.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=xn();const o=n.path,l=new q(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(l);for(;u.hasNext();){const{key:h,value:{document:p}}=u.getNext();if(!o.isPrefixOf(h.path))break;h.path.length>o.length+1||oS(sS(p),r)<=0||(i.has(p.key)||fu(n,p))&&(s=s.insert(p.key,p.mutableCopy()))}return O.resolve(s)}getAllFromCollectionGroup(e,n,r,i){G(9500)}ni(e,n){return O.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new LI(this)}getSize(e){return O.resolve(this.size)}}class LI extends II{constructor(e){super(),this.Mr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Mr.addEntry(e,i)):this.Mr.removeEntry(r)}),O.waitFor(n)}getFromCache(e,n){return this.Mr.getEntry(e,n)}getAllFromCache(e,n){return this.Mr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OI{constructor(e){this.persistence=e,this.ri=new Xr(n=>nf(n),rf),this.lastRemoteSnapshotVersion=Y.min(),this.highestTargetId=0,this.ii=0,this.si=new cf,this.targetCount=0,this.oi=$i._r()}forEachTarget(e,n){return this.ri.forEach((r,i)=>n(i)),O.resolve()}getLastRemoteSnapshotVersion(e){return O.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return O.resolve(this.ii)}allocateTargetId(e){return this.highestTargetId=this.oi.next(),O.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ii&&(this.ii=n),O.resolve()}lr(e){this.ri.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.oi=new $i(n),this.highestTargetId=n),e.sequenceNumber>this.ii&&(this.ii=e.sequenceNumber)}addTargetData(e,n){return this.lr(n),this.targetCount+=1,O.resolve()}updateTargetData(e,n){return this.lr(n),O.resolve()}removeTargetData(e,n){return this.ri.delete(n.target),this.si.Gr(n.targetId),this.targetCount-=1,O.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.ri.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ri.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),O.waitFor(s).next(()=>i)}getTargetCount(e){return O.resolve(this.targetCount)}getTargetData(e,n){const r=this.ri.get(n)||null;return O.resolve(r)}addMatchingKeys(e,n,r){return this.si.$r(n,r),O.resolve()}removeMatchingKeys(e,n,r){this.si.Qr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),O.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.si.Gr(n),O.resolve()}getMatchingKeysForTargetId(e,n){const r=this.si.jr(n);return O.resolve(r)}containsKey(e,n){return O.resolve(this.si.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G_{constructor(e,n){this._i={},this.overlays={},this.ai=new lu(0),this.ui=!1,this.ui=!0,this.ci=new PI,this.referenceDelegate=e(this),this.li=new OI(this),this.indexManager=new _I,this.remoteDocumentCache=function(i){return new DI(i)}(r=>this.referenceDelegate.hi(r)),this.serializer=new yI(n),this.Pi=new CI(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.ui=!1,Promise.resolve()}get started(){return this.ui}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NI,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this._i[e.toKey()];return r||(r=new RI(n,this.referenceDelegate),this._i[e.toKey()]=r),r}getGlobalsCache(){return this.ci}getTargetCache(){return this.li}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Pi}runTransaction(e,n,r){H("MemoryPersistence","Starting transaction:",e);const i=new jI(this.ai.next());return this.referenceDelegate.Ti(),r(i).next(s=>this.referenceDelegate.Ii(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ei(e,n){return O.or(Object.values(this._i).map(r=>()=>r.containsKey(e,n)))}}class jI extends lS{constructor(e){super(),this.currentSequenceNumber=e}}class hf{constructor(e){this.persistence=e,this.Ri=new cf,this.Ai=null}static Vi(e){return new hf(e)}get di(){if(this.Ai)return this.Ai;throw G(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.di.delete(r.toString()),O.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.di.add(r.toString()),O.resolve()}markPotentiallyOrphaned(e,n){return this.di.add(n.toString()),O.resolve()}removeTarget(e,n){this.Ri.Gr(n.targetId).forEach(i=>this.di.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.di.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ti(){this.Ai=new Set}Ii(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return O.forEach(this.di,r=>{const i=q.fromPath(r);return this.mi(e,i).next(s=>{s||n.removeEntry(i,Y.min())})}).next(()=>(this.Ai=null,n.apply(e)))}updateLimboDocument(e,n){return this.mi(e,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}hi(e){return 0}mi(e,n){return O.or([()=>O.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ei(e,n)])}}class Ol{constructor(e,n){this.persistence=e,this.fi=new Xr(r=>hS(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=SI(this,n)}static Vi(e,n){return new Ol(e,n)}Ti(){}Ii(e){return O.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}dr(e){const n=this.pr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}pr(e){let n=0;return this.mr(e,r=>{n++}).next(()=>n)}mr(e,n){return O.forEach(this.fi,(r,i)=>this.wr(e,r,i).next(s=>s?O.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ni(e,o=>this.wr(e,o,n).next(l=>{l||(r++,s.removeEntry(o,Y.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}removeReference(e,n,r){return this.fi.set(r,e.currentSequenceNumber),O.resolve()}updateLimboDocument(e,n){return this.fi.set(n,e.currentSequenceNumber),O.resolve()}hi(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=qa(e.data.value)),n}wr(e,n,r){return O.or([()=>this.persistence.Ei(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.fi.get(n);return O.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class df{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Ts=r,this.Is=i}static Es(e,n){let r=re(),i=re();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new df(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VI{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FI{constructor(){this.Rs=!1,this.As=!1,this.Vs=100,this.ds=function(){return kE()?8:uS(et())>0?6:4}()}initialize(e,n){this.fs=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.gs(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ps(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new VI;return this.ys(e,n,o).next(l=>{if(s.result=l,this.As)return this.ws(e,n,o,l.size)})}).next(()=>s.result)}ws(e,n,r,i){return r.documentReadCount<this.Vs?(oi()<=te.DEBUG&&H("QueryEngine","SDK will not create cache indexes for query:",ai(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Vs,"documents"),O.resolve()):(oi()<=te.DEBUG&&H("QueryEngine","Query:",ai(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.ds*i?(oi()<=te.DEBUG&&H("QueryEngine","The SDK decides to create cache indexes for query:",ai(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Zt(n))):O.resolve())}gs(e,n){if(wg(n))return O.resolve(null);let r=Zt(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Fh(n,null,"F"),r=Zt(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=re(...s);return this.fs.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(u=>{const h=this.bs(n,l);return this.Ss(n,h,o,u.readTime)?this.gs(e,Fh(n,null,"F")):this.Ds(e,h,n,u)}))})))}ps(e,n,r,i){return wg(n)||i.isEqual(Y.min())?O.resolve(null):this.fs.getDocuments(e,r).next(s=>{const o=this.bs(n,s);return this.Ss(n,o,r,i)?O.resolve(null):(oi()<=te.DEBUG&&H("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),ai(n)),this.Ds(e,o,n,iS(i,bo)).next(l=>l))})}bs(e,n){let r=new Le(b_(e));return n.forEach((i,s)=>{fu(e,s)&&(r=r.add(s))}),r}Ss(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}ys(e,n,r){return oi()<=te.DEBUG&&H("QueryEngine","Using full collection scan to execute query:",ai(n)),this.fs.getDocumentsMatchingQuery(e,n,lr.min(),r)}Ds(e,n,r,i){return this.fs.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ff="LocalStore",MI=3e8;class UI{constructor(e,n,r,i){this.persistence=e,this.Cs=n,this.serializer=i,this.vs=new Te(ne),this.Fs=new Xr(s=>nf(s),rf),this.Ms=new Map,this.xs=e.getRemoteDocumentCache(),this.li=e.getTargetCache(),this.Pi=e.getBundleCache(),this.Os(r)}Os(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new AI(this.xs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.xs.setIndexManager(this.indexManager),this.Cs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.vs))}}function BI(t,e,n,r){return new UI(t,e,n,r)}async function Q_(t,e){const n=J(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Os(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let u=re();for(const h of i){o.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}for(const h of s){l.push(h.batchId);for(const p of h.mutations)u=u.add(p.key)}return n.localDocuments.getDocuments(r,u).next(h=>({Ns:h,removedBatchIds:o,addedBatchIds:l}))})})}function HI(t,e){const n=J(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.xs.newChangeBuffer({trackRemovals:!0});return function(l,u,h,p){const m=h.batch,y=m.keys();let S=O.resolve();return y.forEach(b=>{S=S.next(()=>p.getEntry(u,b)).next(P=>{const L=h.docVersions.get(b);oe(L!==null,48541),P.version.compareTo(L)<0&&(m.applyToRemoteDocument(P,h),P.isValidDocument()&&(P.setReadTime(h.commitVersion),p.addEntry(P)))})}),S.next(()=>l.mutationQueue.removeMutationBatch(u,m))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let u=re();for(let h=0;h<l.mutationResults.length;++h)l.mutationResults[h].transformResults.length>0&&(u=u.add(l.batch.mutations[h].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Y_(t){const e=J(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.li.getLastRemoteSnapshotVersion(n))}function zI(t,e){const n=J(t),r=e.snapshotVersion;let i=n.vs;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.xs.newChangeBuffer({trackRemovals:!0});i=n.vs;const l=[];e.targetChanges.forEach((p,m)=>{const y=i.get(m);if(!y)return;l.push(n.li.removeMatchingKeys(s,p.removedDocuments,m).next(()=>n.li.addMatchingKeys(s,p.addedDocuments,m)));let S=y.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(m)!==null?S=S.withResumeToken(We.EMPTY_BYTE_STRING,Y.min()).withLastLimboFreeSnapshotVersion(Y.min()):p.resumeToken.approximateByteSize()>0&&(S=S.withResumeToken(p.resumeToken,r)),i=i.insert(m,S),function(P,L,E){return P.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-P.snapshotVersion.toMicroseconds()>=MI?!0:E.addedDocuments.size+E.modifiedDocuments.size+E.removedDocuments.size>0}(y,S,p)&&l.push(n.li.updateTargetData(s,S))});let u=xn(),h=re();if(e.documentUpdates.forEach(p=>{e.resolvedLimboDocuments.has(p)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,p))}),l.push($I(s,o,e.documentUpdates).next(p=>{u=p.Bs,h=p.Ls})),!r.isEqual(Y.min())){const p=n.li.getLastRemoteSnapshotVersion(s).next(m=>n.li.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(p)}return O.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,h)).next(()=>u)}).then(s=>(n.vs=i,s))}function $I(t,e,n){let r=re(),i=re();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=xn();return n.forEach((l,u)=>{const h=s.get(l);u.isFoundDocument()!==h.isFoundDocument()&&(i=i.add(l)),u.isNoDocument()&&u.version.isEqual(Y.min())?(e.removeEntry(l,u.readTime),o=o.insert(l,u)):!h.isValidDocument()||u.version.compareTo(h.version)>0||u.version.compareTo(h.version)===0&&h.hasPendingWrites?(e.addEntry(u),o=o.insert(l,u)):H(ff,"Ignoring outdated watch update for ",l,". Current version:",h.version," Watch version:",u.version)}),{Bs:o,Ls:i}})}function WI(t,e){const n=J(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zd),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function qI(t,e){const n=J(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.li.getTargetData(r,e).next(s=>s?(i=s,O.resolve(i)):n.li.allocateTargetId(r).next(o=>(i=new qn(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.li.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.vs.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.vs=n.vs.insert(r.targetId,r),n.Fs.set(e,r.targetId)),r})}async function zh(t,e,n){const r=J(t),i=r.vs.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!es(o))throw o;H(ff,`Failed to update sequence numbers for target ${e}: ${o}`)}r.vs=r.vs.remove(e),r.Fs.delete(i.target)}function Dg(t,e,n){const r=J(t);let i=Y.min(),s=re();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,h,p){const m=J(u),y=m.Fs.get(p);return y!==void 0?O.resolve(m.vs.get(y)):m.li.getTargetData(h,p)}(r,o,Zt(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.li.getMatchingKeysForTargetId(o,l.targetId).next(u=>{s=u})}).next(()=>r.Cs.getDocumentsMatchingQuery(o,e,n?i:Y.min(),n?s:re())).next(l=>(KI(r,RS(e),l),{documents:l,ks:s})))}function KI(t,e,n){let r=t.Ms.get(e)||Y.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Ms.set(e,r)}class Lg{constructor(){this.activeTargetIds=FS()}Qs(e){this.activeTargetIds=this.activeTargetIds.add(e)}Gs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ws(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class GI{constructor(){this.vo=new Lg,this.Fo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.vo.Qs(e),this.Fo[e]||"not-current"}updateQueryState(e,n,r){this.Fo[e]=n}removeLocalQueryTarget(e){this.vo.Gs(e)}isLocalQueryTarget(e){return this.vo.activeTargetIds.has(e)}clearQueryState(e){delete this.Fo[e]}getAllActiveQueryTargets(){return this.vo.activeTargetIds}isActiveQueryTarget(e){return this.vo.activeTargetIds.has(e)}start(){return this.vo=new Lg,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QI{Mo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Og="ConnectivityMonitor";class jg{constructor(){this.xo=()=>this.Oo(),this.No=()=>this.Bo(),this.Lo=[],this.ko()}Mo(e){this.Lo.push(e)}shutdown(){window.removeEventListener("online",this.xo),window.removeEventListener("offline",this.No)}ko(){window.addEventListener("online",this.xo),window.addEventListener("offline",this.No)}Oo(){H(Og,"Network connectivity changed: AVAILABLE");for(const e of this.Lo)e(0)}Bo(){H(Og,"Network connectivity changed: UNAVAILABLE");for(const e of this.Lo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ca=null;function $h(){return Ca===null?Ca=function(){return 268435456+Math.round(2147483648*Math.random())}():Ca++,"0x"+Ca.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic="RestConnection",YI={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery",ExecutePipeline:"executePipeline"};class JI{get Ko(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.qo=n+"://"+e.host,this.Uo=`projects/${r}/databases/${i}`,this.$o=this.databaseId.database===Al?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Wo(e,n,r,i,s){const o=$h(),l=this.Qo(e,n.toUriEncodedString());H(Ic,`Sending RPC '${e}' ${o}:`,l,r);const u={"google-cloud-resource-prefix":this.Uo,"x-goog-request-params":this.$o};this.Go(u,i,s);const{host:h}=new URL(l),p=Yi(h);return this.zo(e,l,u,r,p).then(m=>(H(Ic,`Received RPC '${e}' ${o}: `,m),m),m=>{throw Wr(Ic,`RPC '${e}' ${o} failed with error: `,m,"url: ",l,"request:",r),m})}jo(e,n,r,i,s,o){return this.Wo(e,n,r,i,s)}Go(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Xi}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}Qo(e,n){const r=YI[e];let i=`${this.qo}/v1/${n}:${r}`;return this.databaseInfo.apiKey&&(i=`${i}?key=${encodeURIComponent(this.databaseInfo.apiKey)}`),i}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XI{constructor(e){this.Ho=e.Ho,this.Jo=e.Jo}Zo(e){this.Xo=e}Yo(e){this.e_=e}t_(e){this.n_=e}onMessage(e){this.r_=e}close(){this.Jo()}send(e){this.Ho(e)}i_(){this.Xo()}s_(){this.e_()}o_(e){this.n_(e)}__(e){this.r_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qe="WebChannelConnection",As=(t,e,n)=>{t.listen(e,r=>{try{n(r)}catch(i){setTimeout(()=>{throw i},0)}})};class Ai extends JI{constructor(e){super(e),this.a_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}static u_(){if(!Ai.c_){const e=t_();As(e,e_.STAT_EVENT,n=>{n.stat===Rh.PROXY?H(Qe,"STAT_EVENT: detected buffering proxy"):n.stat===Rh.NOPROXY&&H(Qe,"STAT_EVENT: detected no buffering proxy")}),Ai.c_=!0}}zo(e,n,r,i,s){const o=$h();return new Promise((l,u)=>{const h=new X0;h.setWithCredentials(!0),h.listenOnce(Z0.COMPLETE,()=>{try{switch(h.getLastErrorCode()){case Wa.NO_ERROR:const m=h.getResponseJson();H(Qe,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(m)),l(m);break;case Wa.TIMEOUT:H(Qe,`RPC '${e}' ${o} timed out`),u(new W(j.DEADLINE_EXCEEDED,"Request time out"));break;case Wa.HTTP_ERROR:const y=h.getStatus();if(H(Qe,`RPC '${e}' ${o} failed with status:`,y,"response text:",h.getResponseText()),y>0){let S=h.getResponseJson();Array.isArray(S)&&(S=S[0]);const b=S==null?void 0:S.error;if(b&&b.status&&b.message){const P=function(E){const w=E.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(w)>=0?w:j.UNKNOWN}(b.status);u(new W(P,b.message))}else u(new W(j.UNKNOWN,"Server responded with status "+h.getStatus()))}else u(new W(j.UNAVAILABLE,"Connection failed."));break;default:G(9055,{l_:e,streamId:o,h_:h.getLastErrorCode(),P_:h.getLastError()})}}finally{H(Qe,`RPC '${e}' ${o} completed.`)}});const p=JSON.stringify(i);H(Qe,`RPC '${e}' ${o} sending request:`,i),h.send(n,"POST",p,r,15)})}T_(e,n,r){const i=$h(),s=[this.qo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=this.createWebChannelTransport(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},u=this.longPollingOptions.timeoutSeconds;u!==void 0&&(l.longPollingTimeout=Math.round(1e3*u)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Go(l.initMessageHeaders,n,r),l.encodeInitMessageHeaders=!0;const h=s.join("");H(Qe,`Creating RPC '${e}' stream ${i}: ${h}`,l);const p=o.createWebChannel(h,l);this.I_(p);let m=!1,y=!1;const S=new XI({Ho:b=>{y?H(Qe,`Not sending because RPC '${e}' stream ${i} is closed:`,b):(m||(H(Qe,`Opening RPC '${e}' stream ${i} transport.`),p.open(),m=!0),H(Qe,`RPC '${e}' stream ${i} sending:`,b),p.send(b))},Jo:()=>p.close()});return As(p,Fs.EventType.OPEN,()=>{y||(H(Qe,`RPC '${e}' stream ${i} transport opened.`),S.i_())}),As(p,Fs.EventType.CLOSE,()=>{y||(y=!0,H(Qe,`RPC '${e}' stream ${i} transport closed`),S.o_(),this.E_(p))}),As(p,Fs.EventType.ERROR,b=>{y||(y=!0,Wr(Qe,`RPC '${e}' stream ${i} transport errored. Name:`,b.name,"Message:",b.message),S.o_(new W(j.UNAVAILABLE,"The operation could not be completed")))}),As(p,Fs.EventType.MESSAGE,b=>{var P;if(!y){const L=b.data[0];oe(!!L,16349);const E=L,w=(E==null?void 0:E.error)||((P=E[0])==null?void 0:P.error);if(w){H(Qe,`RPC '${e}' stream ${i} received error:`,w);const A=w.status;let R=function(T){const v=ke[T];if(v!==void 0)return j_(v)}(A),F=w.message;A==="NOT_FOUND"&&F.includes("database")&&F.includes("does not exist")&&F.includes(this.databaseId.database)&&Wr(`Database '${this.databaseId.database}' not found. Please check your project configuration.`),R===void 0&&(R=j.INTERNAL,F="Unknown error status: "+A+" with message "+w.message),y=!0,S.o_(new W(R,F)),p.close()}else H(Qe,`RPC '${e}' stream ${i} received:`,L),S.__(L)}}),Ai.u_(),setTimeout(()=>{S.s_()},0),S}terminate(){this.a_.forEach(e=>e.close()),this.a_=[]}I_(e){this.a_.push(e)}E_(e){this.a_=this.a_.filter(n=>n===e)}Go(e,n,r){super.Go(e,n,r),this.databaseInfo.apiKey&&(e["x-goog-api-key"]=this.databaseInfo.apiKey)}createWebChannelTransport(){return n_()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZI(t){return new Ai(t)}function kc(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yu(t){return new rI(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ai.c_=!1;class J_{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Ci=e,this.timerId=n,this.R_=r,this.A_=i,this.V_=s,this.d_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.d_=0}g_(){this.d_=this.V_}p_(e){this.cancel();const n=Math.floor(this.d_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&H("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.d_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Ci.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.d_*=this.A_,this.d_<this.R_&&(this.d_=this.R_),this.d_>this.V_&&(this.d_=this.V_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.d_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vg="PersistentStream";class X_{constructor(e,n,r,i,s,o,l,u){this.Ci=e,this.b_=r,this.S_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new J_(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Ci.enqueueAfterDelay(this.b_,6e4,()=>this.k_()))}K_(e){this.q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Tn(n.toString()),Tn("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.W_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.t_(n)}W_(){}auth(){this.state=1;const e=this.Q_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new W(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.Q_(this.D_);this.stream=this.j_(e,n),this.stream.Zo(()=>{r(()=>this.listener.Zo())}),this.stream.Yo(()=>{r(()=>(this.state=2,this.v_=this.Ci.enqueueAfterDelay(this.S_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.Yo()))}),this.stream.t_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.H_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return H(Vg,`close with error: ${e}`),this.stream=null,this.close(4,e)}Q_(e){return n=>{this.Ci.enqueueAndForget(()=>this.D_===e?n():(H(Vg,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ek extends X_{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}H_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=oI(this.serializer,e),r=function(s){if(!("targetChange"in s))return Y.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Y.min():o.readTime?en(o.readTime):Y.min()}(e);return this.listener.J_(n,r)}Z_(e){const n={};n.database=Hh(this.serializer),n.addTarget=function(s,o){let l;const u=o.target;if(l=Vh(u)?{documents:uI(s,u)}:{query:cI(s,u).ft},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=M_(s,o.resumeToken);const h=Mh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}else if(o.snapshotVersion.compareTo(Y.min())>0){l.readTime=Ll(s,o.snapshotVersion.toTimestamp());const h=Mh(s,o.expectedCount);h!==null&&(l.expectedCount=h)}return l}(this.serializer,e);const r=dI(this.serializer,e);r&&(n.labels=r),this.K_(n)}X_(e){const n={};n.database=Hh(this.serializer),n.removeTarget=e,this.K_(n)}}class tk extends X_{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get Y_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}W_(){this.Y_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}H_(e){return oe(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,oe(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){oe(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=lI(e.writeResults,e.commitTime),r=en(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=Hh(this.serializer),this.K_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>aI(this.serializer,r))};this.K_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk{}class rk extends nk{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.")}Wo(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Wo(e,Uh(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new W(j.UNKNOWN,s.toString())})}jo(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,l])=>this.connection.jo(e,Uh(n,r),i,o,l,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new W(j.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}function ik(t,e,n,r){return new rk(t,e,n,r)}class sk{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Tn(n),this.aa=!1):H("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qr="RemoteStore";class ok{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.Ra=[],this.Aa=s,this.Aa.Mo(o=>{r.enqueueAndForget(async()=>{ei(this)&&(H(qr,"Restarting streams for network reachability change."),await async function(u){const h=J(u);h.Ea.add(4),await Ho(h),h.Va.set("Unknown"),h.Ea.delete(4),await vu(h)}(this))})}),this.Va=new sk(r,i)}}async function vu(t){if(ei(t))for(const e of t.Ra)await e(!0)}async function Ho(t){for(const e of t.Ra)await e(!1)}function Z_(t,e){const n=J(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),yf(n)?gf(n):ts(n).O_()&&mf(n,e))}function pf(t,e){const n=J(t),r=ts(n);n.Ia.delete(e),r.O_()&&ew(n,e),n.Ia.size===0&&(r.O_()?r.L_():ei(n)&&n.Va.set("Unknown"))}function mf(t,e){if(t.da.$e(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Y.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ts(t).Z_(e)}function ew(t,e){t.da.$e(e),ts(t).X_(e)}function gf(t){t.da=new ZS({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),ts(t).start(),t.Va.ua()}function yf(t){return ei(t)&&!ts(t).x_()&&t.Ia.size>0}function ei(t){return J(t).Ea.size===0}function tw(t){t.da=void 0}async function ak(t){t.Va.set("Online")}async function lk(t){t.Ia.forEach((e,n)=>{mf(t,e)})}async function uk(t,e){tw(t),yf(t)?(t.Va.ha(e),gf(t)):t.Va.set("Unknown")}async function ck(t,e,n){if(t.Va.set("Online"),e instanceof F_&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.Ia.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.Ia.delete(l),i.da.removeTarget(l))}(t,e)}catch(r){H(qr,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await jl(t,r)}else if(e instanceof Qa?t.da.Xe(e):e instanceof V_?t.da.st(e):t.da.tt(e),!n.isEqual(Y.min()))try{const r=await Y_(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.da.Tt(o);return l.targetChanges.forEach((u,h)=>{if(u.resumeToken.approximateByteSize()>0){const p=s.Ia.get(h);p&&s.Ia.set(h,p.withResumeToken(u.resumeToken,o))}}),l.targetMismatches.forEach((u,h)=>{const p=s.Ia.get(u);if(!p)return;s.Ia.set(u,p.withResumeToken(We.EMPTY_BYTE_STRING,p.snapshotVersion)),ew(s,u);const m=new qn(p.target,u,h,p.sequenceNumber);mf(s,m)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){H(qr,"Failed to raise snapshot:",r),await jl(t,r)}}async function jl(t,e,n){if(!es(e))throw e;t.Ea.add(1),await Ho(t),t.Va.set("Offline"),n||(n=()=>Y_(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{H(qr,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await vu(t)})}function nw(t,e){return e().catch(n=>jl(t,n,e))}async function _u(t){const e=J(t),n=dr(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zd;for(;hk(e);)try{const i=await WI(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,dk(e,i)}catch(i){await jl(e,i)}rw(e)&&iw(e)}function hk(t){return ei(t)&&t.Ta.length<10}function dk(t,e){t.Ta.push(e);const n=dr(t);n.O_()&&n.Y_&&n.ea(e.mutations)}function rw(t){return ei(t)&&!dr(t).x_()&&t.Ta.length>0}function iw(t){dr(t).start()}async function fk(t){dr(t).ra()}async function pk(t){const e=dr(t);for(const n of t.Ta)e.ea(n.mutations)}async function mk(t,e,n){const r=t.Ta.shift(),i=af.from(r,e,n);await nw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await _u(t)}async function gk(t,e){e&&dr(t).Y_&&await async function(r,i){if(function(o){return YS(o)&&o!==j.ABORTED}(i.code)){const s=r.Ta.shift();dr(r).B_(),await nw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await _u(r)}}(t,e),rw(t)&&iw(t)}async function Fg(t,e){const n=J(t);n.asyncQueue.verifyOperationInProgress(),H(qr,"RemoteStore received new credentials");const r=ei(n);n.Ea.add(3),await Ho(n),r&&n.Va.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await vu(n)}async function yk(t,e){const n=J(t);e?(n.Ea.delete(2),await vu(n)):e||(n.Ea.add(2),await Ho(n),n.Va.set("Unknown"))}function ts(t){return t.ma||(t.ma=function(n,r,i){const s=J(n);return s.sa(),new ek(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:ak.bind(null,t),Yo:lk.bind(null,t),t_:uk.bind(null,t),J_:ck.bind(null,t)}),t.Ra.push(async e=>{e?(t.ma.B_(),yf(t)?gf(t):t.Va.set("Unknown")):(await t.ma.stop(),tw(t))})),t.ma}function dr(t){return t.fa||(t.fa=function(n,r,i){const s=J(n);return s.sa(),new tk(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Zo:()=>Promise.resolve(),Yo:fk.bind(null,t),t_:gk.bind(null,t),ta:pk.bind(null,t),na:mk.bind(null,t)}),t.Ra.push(async e=>{e?(t.fa.B_(),await _u(t)):(await t.fa.stop(),t.Ta.length>0&&(H(qr,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new sr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new vf(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new W(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function _f(t,e){if(Tn("AsyncQueue",`${e}: ${t}`),es(t))return new W(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ci{static emptySet(e){return new Ci(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||q.comparator(n.key,r.key):(n,r)=>q.comparator(n.key,r.key),this.keyedMap=Ms(),this.sortedSet=new Te(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Ci)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Ci;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mg{constructor(){this.ga=new Te(q.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):G(63341,{Vt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class Wi{constructor(e,n,r,i,s,o,l,u,h){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=u,this.hasCachedResults=h}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new Wi(e,n,Ci.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&du(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vk{constructor(){this.wa=void 0,this.ba=[]}Sa(){return this.ba.some(e=>e.Da())}}class _k{constructor(){this.queries=Ug(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=J(n),s=i.queries;i.queries=Ug(),s.forEach((o,l)=>{for(const u of l.ba)u.onError(r)})})(this,new W(j.ABORTED,"Firestore shutting down"))}}function Ug(){return new Xr(t=>E_(t),du)}async function wk(t,e){const n=J(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.Sa()&&e.Da()&&(r=2):(s=new vk,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const l=_f(o,`Initialization of query '${ai(e.query)}' failed`);return void e.onError(l)}n.queries.set(i,s),s.ba.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&wf(n)}async function Tk(t,e){const n=J(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.ba.indexOf(e);o>=0&&(s.ba.splice(o,1),s.ba.length===0?i=e.Da()?0:1:!s.Sa()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function xk(t,e){const n=J(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.ba)l.Fa(i)&&(r=!0);o.wa=i}}r&&wf(n)}function Ek(t,e,n){const r=J(t),i=r.queries.get(e);if(i)for(const s of i.ba)s.onError(n);r.queries.delete(e)}function wf(t){t.Ca.forEach(e=>{e.next()})}var Wh,Bg;(Bg=Wh||(Wh={})).Ma="default",Bg.Cache="cache";class bk{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new Wi(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.Ka||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=Wi.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==Wh.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sw{constructor(e){this.key=e}}class ow{constructor(e){this.key=e}}class Sk{constructor(e,n){this.query=e,this.Za=n,this.Xa=null,this.hasCachedResults=!1,this.current=!1,this.Ya=re(),this.mutatedKeys=re(),this.eu=b_(e),this.tu=new Ci(this.eu)}get nu(){return this.Za}ru(e,n){const r=n?n.iu:new Mg,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,h=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((p,m)=>{const y=i.get(p),S=fu(this.query,m)?m:null,b=!!y&&this.mutatedKeys.has(y.key),P=!!S&&(S.hasLocalMutations||this.mutatedKeys.has(S.key)&&S.hasCommittedMutations);let L=!1;y&&S?y.data.isEqual(S.data)?b!==P&&(r.track({type:3,doc:S}),L=!0):this.su(y,S)||(r.track({type:2,doc:S}),L=!0,(u&&this.eu(S,u)>0||h&&this.eu(S,h)<0)&&(l=!0)):!y&&S?(r.track({type:0,doc:S}),L=!0):y&&!S&&(r.track({type:1,doc:y}),L=!0,(u||h)&&(l=!0)),L&&(S?(o=o.add(S),s=P?s.add(p):s.delete(p)):(o=o.delete(p),s=s.delete(p)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const p=this.query.limitType==="F"?o.last():o.first();o=o.delete(p.key),s=s.delete(p.key),r.track({type:1,doc:p})}return{tu:o,iu:r,Ss:l,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((p,m)=>function(S,b){const P=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return G(20277,{Vt:L})}};return P(S)-P(b)}(p.type,m.type)||this.eu(p.doc,m.doc)),this.ou(r),i=i??!1;const l=n&&!i?this._u():[],u=this.Ya.size===0&&this.current&&!i?1:0,h=u!==this.Xa;return this.Xa=u,o.length!==0||h?{snapshot:new Wi(this.query,e.tu,s,o,e.mutatedKeys,u===0,h,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:l}:{au:l}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Mg,mutatedKeys:this.mutatedKeys,Ss:!1},!1)):{au:[]}}uu(e){return!this.Za.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Za=this.Za.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Za=this.Za.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Ya;this.Ya=re(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Ya=this.Ya.add(r.key))});const n=[];return e.forEach(r=>{this.Ya.has(r)||n.push(new ow(r))}),this.Ya.forEach(r=>{e.has(r)||n.push(new sw(r))}),n}cu(e){this.Za=e.ks,this.Ya=re();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return Wi.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Xa===0,this.hasCachedResults)}}const Tf="SyncEngine";class Ik{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class kk{constructor(e){this.key=e,this.hu=!1}}class Ak{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Xr(l=>E_(l),du),this.Iu=new Map,this.Eu=new Set,this.Ru=new Te(q.comparator),this.Au=new Map,this.Vu=new cf,this.du={},this.mu=new Map,this.fu=$i.ar(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function Ck(t,e,n=!0){const r=dw(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await aw(r,e,n,!0),i}async function Nk(t,e){const n=dw(t);await aw(n,e,!0,!1)}async function aw(t,e,n,r){const i=await qI(t.localStore,Zt(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let l;return r&&(l=await Pk(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Z_(t.remoteStore,i),l}async function Pk(t,e,n,r,i){t.pu=(m,y,S)=>async function(P,L,E,w){let A=L.view.ru(E);A.Ss&&(A=await Dg(P.localStore,L.query,!1).then(({documents:T})=>L.view.ru(T,A)));const R=w&&w.targetChanges.get(L.targetId),F=w&&w.targetMismatches.get(L.targetId)!=null,M=L.view.applyChanges(A,P.isPrimaryClient,R,F);return zg(P,L.targetId,M.au),M.snapshot}(t,m,y,S);const s=await Dg(t.localStore,e,!0),o=new Sk(e,s.ks),l=o.ru(s.documents),u=Bo.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),h=o.applyChanges(l,t.isPrimaryClient,u);zg(t,n,h.au);const p=new Ik(e,n,o);return t.Tu.set(e,p),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),h.snapshot}async function Rk(t,e,n){const r=J(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!du(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await zh(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&pf(r.remoteStore,i.targetId),qh(r,i.targetId)}).catch(Zi)):(qh(r,i.targetId),await zh(r.localStore,i.targetId,!0))}async function Dk(t,e){const n=J(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),pf(n.remoteStore,r.targetId))}async function Lk(t,e,n){const r=Bk(t);try{const i=await function(o,l){const u=J(o),h=fe.now(),p=l.reduce((S,b)=>S.add(b.key),re());let m,y;return u.persistence.runTransaction("Locally write mutations","readwrite",S=>{let b=xn(),P=re();return u.xs.getEntries(S,p).next(L=>{b=L,b.forEach((E,w)=>{w.isValidDocument()||(P=P.add(E))})}).next(()=>u.localDocuments.getOverlayedDocuments(S,b)).next(L=>{m=L;const E=[];for(const w of l){const A=WS(w,m.get(w.key).overlayedDocument);A!=null&&E.push(new Zr(w.key,A,g_(A.value.mapValue),pn.exists(!0)))}return u.mutationQueue.addMutationBatch(S,h,E,l)}).next(L=>{y=L;const E=L.applyToLocalDocumentSet(m,P);return u.documentOverlayCache.saveOverlays(S,L.batchId,E)})}).then(()=>({batchId:y.batchId,changes:I_(m)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,u){let h=o.du[o.currentUser.toKey()];h||(h=new Te(ne)),h=h.insert(l,u),o.du[o.currentUser.toKey()]=h}(r,i.batchId,n),await zo(r,i.changes),await _u(r.remoteStore)}catch(i){const s=_f(i,"Failed to persist write");n.reject(s)}}async function lw(t,e){const n=J(t);try{const r=await zI(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(oe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?oe(o.hu,14607):i.removedDocuments.size>0&&(oe(o.hu,42227),o.hu=!1))}),await zo(n,r,e)}catch(r){await Zi(r)}}function Hg(t,e,n){const r=J(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const l=o.view.va(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const u=J(o);u.onlineState=l;let h=!1;u.queries.forEach((p,m)=>{for(const y of m.ba)y.va(l)&&(h=!0)}),h&&wf(u)}(r.eventManager,e),i.length&&r.Pu.J_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function Ok(t,e,n){const r=J(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Te(q.comparator);o=o.insert(s,Xe.newNoDocument(s,Y.min()));const l=re().add(s),u=new gu(Y.min(),new Map,new Te(ne),o,l);await lw(r,u),r.Ru=r.Ru.remove(s),r.Au.delete(e),xf(r)}else await zh(r.localStore,e,!1).then(()=>qh(r,e,n)).catch(Zi)}async function jk(t,e){const n=J(t),r=e.batch.batchId;try{const i=await HI(n.localStore,e);cw(n,r,null),uw(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await zo(n,i)}catch(i){await Zi(i)}}async function Vk(t,e,n){const r=J(t);try{const i=await function(o,l){const u=J(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",h=>{let p;return u.mutationQueue.lookupMutationBatch(h,l).next(m=>(oe(m!==null,37113),p=m.keys(),u.mutationQueue.removeMutationBatch(h,m))).next(()=>u.mutationQueue.performConsistencyCheck(h)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(h,p,l)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(h,p)).next(()=>u.localDocuments.getDocuments(h,p))})}(r.localStore,e);cw(r,e,n),uw(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await zo(r,i)}catch(i){await Zi(i)}}function uw(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function cw(t,e,n){const r=J(t);let i=r.du[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.du[r.currentUser.toKey()]=i}}function qh(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Vu.Gr(e).forEach(r=>{t.Vu.containsKey(r)||hw(t,r)})}function hw(t,e){t.Eu.delete(e.path.canonicalString());const n=t.Ru.get(e);n!==null&&(pf(t.remoteStore,n),t.Ru=t.Ru.remove(e),t.Au.delete(n),xf(t))}function zg(t,e,n){for(const r of n)r instanceof sw?(t.Vu.addReference(r.key,e),Fk(t,r)):r instanceof ow?(H(Tf,"Document no longer in limbo: "+r.key),t.Vu.removeReference(r.key,e),t.Vu.containsKey(r.key)||hw(t,r.key)):G(19791,{wu:r})}function Fk(t,e){const n=e.key,r=n.path.canonicalString();t.Ru.get(n)||t.Eu.has(r)||(H(Tf,"New document in limbo: "+n),t.Eu.add(r),xf(t))}function xf(t){for(;t.Eu.size>0&&t.Ru.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new q(ve.fromString(e)),r=t.fu.next();t.Au.set(r,new kk(n)),t.Ru=t.Ru.insert(n,r),Z_(t.remoteStore,new qn(Zt(sf(n.path)),r,"TargetPurposeLimboResolution",lu.ce))}}async function zo(t,e,n){const r=J(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((l,u)=>{o.push(r.pu(u,e,n).then(h=>{var p;if((h||n)&&r.isPrimaryClient){const m=h?!h.fromCache:(p=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:p.current;r.sharedClientState.updateQueryState(u.targetId,m?"current":"not-current")}if(h){i.push(h);const m=df.Es(u.targetId,h);s.push(m)}}))}),await Promise.all(o),r.Pu.J_(i),await async function(u,h){const p=J(u);try{await p.persistence.runTransaction("notifyLocalViewChanges","readwrite",m=>O.forEach(h,y=>O.forEach(y.Ts,S=>p.persistence.referenceDelegate.addReference(m,y.targetId,S)).next(()=>O.forEach(y.Is,S=>p.persistence.referenceDelegate.removeReference(m,y.targetId,S)))))}catch(m){if(!es(m))throw m;H(ff,"Failed to update sequence numbers: "+m)}for(const m of h){const y=m.targetId;if(!m.fromCache){const S=p.vs.get(y),b=S.snapshotVersion,P=S.withLastLimboFreeSnapshotVersion(b);p.vs=p.vs.insert(y,P)}}}(r.localStore,s))}async function Mk(t,e){const n=J(t);if(!n.currentUser.isEqual(e)){H(Tf,"User change. New user:",e.toKey());const r=await Q_(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(l=>{l.forEach(u=>{u.reject(new W(j.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await zo(n,r.Ns)}}function Uk(t,e){const n=J(t),r=n.Au.get(e);if(r&&r.hu)return re().add(r.key);{let i=re();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const l=n.Tu.get(o);i=i.unionWith(l.view.nu)}return i}}function dw(t){const e=J(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=lw.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Uk.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Ok.bind(null,e),e.Pu.J_=xk.bind(null,e.eventManager),e.Pu.yu=Ek.bind(null,e.eventManager),e}function Bk(t){const e=J(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=jk.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Vk.bind(null,e),e}class Vl{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=yu(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return BI(this.persistence,new FI,e.initialUser,this.serializer)}Cu(e){return new G_(hf.Vi,this.serializer)}Du(e){return new GI}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Vl.provider={build:()=>new Vl};class Hk extends Vl{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){oe(this.persistence.referenceDelegate instanceof Ol,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new EI(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?lt.withCacheSize(this.cacheSizeBytes):lt.DEFAULT;return new G_(r=>Ol.Vi(r,n),this.serializer)}}class Kh{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Hg(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Mk.bind(null,this.syncEngine),await yk(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new _k}()}createDatastore(e){const n=yu(e.databaseInfo.databaseId),r=ZI(e.databaseInfo);return ik(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new ok(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>Hg(this.syncEngine,n,0),function(){return jg.v()?new jg:new QI}())}createSyncEngine(e,n){return function(i,s,o,l,u,h,p){const m=new Ak(i,s,o,l,u,h);return p&&(m.gu=!0),m}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=J(i);H(qr,"RemoteStore shutting down."),s.Ea.add(5),await Ho(s),s.Aa.shutdown(),s.Va.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Kh.provider={build:()=>new Kh};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zk{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Tn("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fr="FirestoreClient";class $k{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this._databaseInfo=i,this.user=Ye.UNAUTHENTICATED,this.clientId=Jd.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{H(fr,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(H(fr,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this._databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new sr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=_f(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Ac(t,e){t.asyncQueue.verifyOperationInProgress(),H(fr,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await Q_(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function $g(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Wk(t);H(fr,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>Fg(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>Fg(e.remoteStore,i)),t._onlineComponents=e}async function Wk(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){H(fr,"Using user provided OfflineComponentProvider");try{await Ac(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===j.FAILED_PRECONDITION||i.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;Wr("Error using user provided cache. Falling back to memory cache: "+n),await Ac(t,new Vl)}}else H(fr,"Using default OfflineComponentProvider"),await Ac(t,new Hk(void 0));return t._offlineComponents}async function fw(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(H(fr,"Using user provided OnlineComponentProvider"),await $g(t,t._uninitializedComponentsProvider._online)):(H(fr,"Using default OnlineComponentProvider"),await $g(t,new Kh))),t._onlineComponents}function qk(t){return fw(t).then(e=>e.syncEngine)}async function Kk(t){const e=await fw(t),n=e.eventManager;return n.onListen=Ck.bind(null,e.syncEngine),n.onUnlisten=Rk.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=Nk.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=Dk.bind(null,e.syncEngine),n}function Gk(t,e,n={}){const r=new sr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,u,h){const p=new zk({next:y=>{p.Nu(),o.enqueueAndForget(()=>Tk(s,m));const S=y.docs.has(l);!S&&y.fromCache?h.reject(new W(j.UNAVAILABLE,"Failed to get document because the client is offline.")):S&&y.fromCache&&u&&u.source==="server"?h.reject(new W(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):h.resolve(y)},error:y=>h.reject(y)}),m=new bk(sf(l.path),p,{includeMetadataChanges:!0,Ka:!0});return wk(s,m)}(await Kk(t),t.asyncQueue,e,n,r)),r.promise}function Qk(t,e){const n=new sr;return t.asyncQueue.enqueueAndForget(async()=>Lk(await qk(t),e,n)),n.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pw(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yk="ComponentProvider",Wg=new Map;function Jk(t,e,n,r,i){return new pS(t,e,n,i.host,i.ssl,i.experimentalForceLongPolling,i.experimentalAutoDetectLongPolling,pw(i.experimentalLongPollingOptions),i.useFetchStreams,i.isUsingEmulator,r)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mw="firestore.googleapis.com",qg=!0;class Kg{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new W(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=mw,this.ssl=qg}else this.host=e.host,this.ssl=e.ssl??qg;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=K_;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TI)throw new W(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}rS("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=pw(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new W(j.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ef{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Kg({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new W(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new W(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Kg(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new qb;switch(r.type){case"firstParty":return new Yb(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new W(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Wg.get(n);r&&(H(Yk,"Removing Datastore"),Wg.delete(n),r.terminate())}(this),Promise.resolve()}}function Xk(t,e,n,r={}){var h;t=Eo(t,Ef);const i=Yi(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},l=`${e}:${n}`;i&&(z0(`https://${l}`),$0("Firestore",!0)),s.host!==mw&&s.host!==l&&Wr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:l,ssl:i,emulatorOptions:r};if(!Hr(u,o)&&(t._setSettings(u),r.mockUserToken)){let p,m;if(typeof r.mockUserToken=="string")p=r.mockUserToken,m=Ye.MOCK_USER;else{p=vE(r.mockUserToken,(h=t._app)==null?void 0:h.options.projectId);const y=r.mockUserToken.sub||r.mockUserToken.user_id;if(!y)throw new W(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Ye(y)}t._authCredentials=new Kb(new i_(p,m))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bf{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new bf(this.firestore,e,this._query)}}class Fe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new No(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fe(this.firestore,e,this._key)}toJSON(){return{type:Fe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Mo(n,Fe._jsonSchema))return new Fe(e,r||null,new q(ve.fromString(n.referencePath)))}}Fe._jsonSchemaVersion="firestore/documentReference/1.0",Fe._jsonSchema={type:Ce("string",Fe._jsonSchemaVersion),referencePath:Ce("string")};class No extends bf{constructor(e,n,r){super(e,n,sf(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fe(this.firestore,null,new q(e))}withConverter(e){return new No(this.firestore,e,this._path)}}function $o(t,e,...n){if(t=pt(t),arguments.length===1&&(e=Jd.newId()),nS("doc","path",e),t instanceof Ef){const r=ve.fromString(e,...n);return ag(r),new Fe(t,null,new q(r))}{if(!(t instanceof Fe||t instanceof No))throw new W(j.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(ve.fromString(e,...n));return ag(r),new Fe(t.firestore,t instanceof No?t.converter:null,new q(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gg="AsyncQueue";class Qg{constructor(e=Promise.resolve()){this.Yu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new J_(this,"async_queue_retry"),this._c=()=>{const r=kc();r&&H(Gg,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=kc();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=kc();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new sr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Yu.push(e),this.lc()))}async lc(){if(this.Yu.length!==0){try{await this.Yu[0](),this.Yu.shift(),this.M_.reset()}catch(e){if(!es(e))throw e;H(Gg,"Operation failed with retryable error: "+e)}this.Yu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Tn("INTERNAL UNHANDLED ERROR: ",Yg(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=vf.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&G(47125,{Pc:Yg(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}Rc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Yg(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}class Sf extends Ef{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Qg,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Qg(e),this._firestoreClient=void 0,await e}}}function Zk(t,e){const n=typeof t=="object"?t:G0(),r=typeof t=="string"?t:e||Al,i=Qd(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=gE("firestore");s&&Xk(i,...s)}return i}function gw(t){if(t._terminated)throw new W(j.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||eA(t),t._firestoreClient}function eA(t){var r,i,s,o;const e=t._freezeSettings(),n=Jk(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,(i=t._app)==null?void 0:i.options.apiKey,e);t._componentsProvider||(s=e.localCache)!=null&&s._offlineComponentProvider&&((o=e.localCache)!=null&&o._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $k(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(u){const h=u==null?void 0:u._online.build();return{_offline:u==null?void 0:u._offline.build(h),_online:h}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this._byteString=e}static fromBase64String(e){try{return new kt(We.fromBase64String(e))}catch(n){throw new W(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new kt(We.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:kt._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Mo(e,kt._jsonSchema))return kt.fromBase64String(e.bytes)}}kt._jsonSchemaVersion="firestore/bytes/1.0",kt._jsonSchema={type:Ce("string",kt._jsonSchemaVersion),bytes:Ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yw{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new W(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new He(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class If{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new W(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new W(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ne(this._lat,e._lat)||ne(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:tn._jsonSchemaVersion}}static fromJSON(e){if(Mo(e,tn._jsonSchema))return new tn(e.latitude,e.longitude)}}tn._jsonSchemaVersion="firestore/geoPoint/1.0",tn._jsonSchema={type:Ce("string",tn._jsonSchemaVersion),latitude:Ce("number"),longitude:Ce("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Ht._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Mo(e,Ht._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Ht(e.vectorValues);throw new W(j.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Ht._jsonSchemaVersion="firestore/vectorValue/1.0",Ht._jsonSchema={type:Ce("string",Ht._jsonSchemaVersion),vectorValues:Ce("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tA=/^__.*__$/;class nA{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Zr(e,this.data,this.fieldMask,n,this.fieldTransforms):new Uo(e,this.data,n,this.fieldTransforms)}}function vw(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw G(40011,{dataSource:t})}}class kf{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.validatePath(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get dataSource(){return this.settings.dataSource}contextWith(e){return new kf({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}childContextForField(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePathSegment(e),r}childContextForFieldPath(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.contextWith({path:n,arrayElement:!1});return r.validatePath(),r}childContextForArray(e){return this.contextWith({path:void 0,arrayElement:!0})}createError(e){return Fl(e,this.settings.methodName,this.settings.hasConverter||!1,this.path,this.settings.targetDoc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}validatePath(){if(this.path)for(let e=0;e<this.path.length;e++)this.validatePathSegment(this.path.get(e))}validatePathSegment(e){if(e.length===0)throw this.createError("Document fields must not be empty");if(vw(this.dataSource)&&tA.test(e))throw this.createError('Document fields cannot begin and end with "__"')}}class rA{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||yu(e)}createContext(e,n,r,i=!1){return new kf({dataSource:e,methodName:n,targetDoc:r,path:He.emptyPath(),arrayElement:!1,hasConverter:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function iA(t){const e=t._freezeSettings(),n=yu(t._databaseId);return new rA(t._databaseId,!!e.ignoreUndefinedProperties,n)}function sA(t,e,n,r,i,s={}){const o=t.createContext(s.merge||s.mergeFields?2:0,e,n,i);xw("Data must be an object, but it was:",o,r);const l=ww(r,o);let u,h;if(s.merge)u=new Ft(o.fieldMask),h=o.fieldTransforms;else if(s.mergeFields){const p=[];for(const m of s.mergeFields){const y=Cf(e,m,n);if(!o.contains(y))throw new W(j.INVALID_ARGUMENT,`Field '${y}' is specified in your field mask but missing from your input data.`);lA(p,y)||p.push(y)}u=new Ft(p),h=o.fieldTransforms.filter(m=>u.covers(m.field))}else u=null,h=o.fieldTransforms;return new nA(new It(l),u,h)}class Af extends If{_toFieldTransform(e){if(e.dataSource!==2)throw e.dataSource===1?e.createError(`${this._methodName}() can only appear at the top level of your update data`):e.createError(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Af}}function _w(t,e){if(Tw(t=pt(t)))return xw("Unsupported field value:",e,t),ww(t,e);if(t instanceof If)return function(r,i){if(!vw(i.dataSource))throw i.createError(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.createError(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.arrayElement&&e.dataSource!==4)throw e.createError("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let u=_w(l,i.childContextForArray(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=pt(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return MS(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=fe.fromDate(r);return{timestampValue:Ll(i.serializer,s)}}if(r instanceof fe){const s=new fe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ll(i.serializer,s)}}if(r instanceof tn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof kt)return{bytesValue:M_(i.serializer,r._byteString)};if(r instanceof Fe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.createError(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:uf(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Ht)return function(o,l){const u=o instanceof Ht?o.toArray():o;return{mapValue:{fields:{[f_]:{stringValue:m_},[Cl]:{arrayValue:{values:u.map(p=>{if(typeof p!="number")throw l.createError("VectorValues must only contain numeric values.");return of(l.serializer,p)})}}}}}}(r,i);if(q_(r))return r._toProto(i.serializer);throw i.createError(`Unsupported field value: ${Xd(r)}`)}(t,e)}function ww(t,e){const n={};return a_(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Jr(t,(r,i)=>{const s=_w(i,e.childContextForField(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function Tw(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof fe||t instanceof tn||t instanceof kt||t instanceof Fe||t instanceof If||t instanceof Ht||q_(t))}function xw(t,e,n){if(!Tw(n)||!s_(n)){const r=Xd(n);throw r==="an object"?e.createError(t+" a custom object"):e.createError(t+" "+r)}}function Cf(t,e,n){if((e=pt(e))instanceof yw)return e._internalPath;if(typeof e=="string")return aA(t,e);throw Fl("Field path arguments must be of type string or ",t,!1,void 0,n)}const oA=new RegExp("[~\\*/\\[\\]]");function aA(t,e,n){if(e.search(oA)>=0)throw Fl(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new yw(...e.split("."))._internalPath}catch{throw Fl(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function Fl(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new W(j.INVALID_ARGUMENT,l+t+u)}function lA(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uA{convertValue(e,n="none"){switch(hr(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Se(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(cr(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw G(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Jr(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Cl].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>Se(o.doubleValue));return new Ht(n)}convertGeoPoint(e){return new tn(Se(e.latitude),Se(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=cu(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(So(e));default:return null}}convertTimestamp(e){const n=ur(e);return new fe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=ve.fromString(e);oe(W_(r),9688,{name:e});const i=new Io(r.get(1),r.get(3)),s=new q(r.popFirst(5));return i.isEqual(n)||Tn(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cA extends uA{constructor(e){super(),this.firestore=e}convertBytes(e){return new kt(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Fe(this.firestore,null,n)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hA(){return new Af("deleteField")}const Jg="@firebase/firestore",Xg="4.11.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ew{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new dA(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}_fieldsProto(){var e;return((e=this._document)==null?void 0:e.data.clone().value.mapValue.fields)??void 0}get(e){if(this._document){const n=this._document.data.field(Cf("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class dA extends Ew{data(){return super.data()}}function fA(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Bs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class jr extends Ew{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Ya(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Cf("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=jr._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}jr._jsonSchemaVersion="firestore/documentSnapshot/1.0",jr._jsonSchema={type:Ce("string",jr._jsonSchemaVersion),bundleSource:Ce("string","DocumentSnapshot"),bundleName:Ce("string"),bundle:Ce("string")};class Ya extends jr{data(e={}){return super.data(e)}}class no{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Bs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Ya(this._firestore,this._userDataWriter,r.key,r,new Bs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new W(j.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(l=>{const u=new Ya(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);return l.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(l=>s||l.type!==3).map(l=>{const u=new Ya(i._firestore,i._userDataWriter,l.doc.key,l.doc,new Bs(i._snapshot.mutatedKeys.has(l.doc.key),i._snapshot.fromCache),i.query.converter);let h=-1,p=-1;return l.type!==0&&(h=o.indexOf(l.doc.key),o=o.delete(l.doc.key)),l.type!==1&&(o=o.add(l.doc),p=o.indexOf(l.doc.key)),{type:pA(l.type),doc:u,oldIndex:h,newIndex:p}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new W(j.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=no._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=Jd.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function pA(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return G(61501,{type:t})}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */no._jsonSchemaVersion="firestore/querySnapshot/1.0",no._jsonSchema={type:Ce("string",no._jsonSchemaVersion),bundleSource:Ce("string","QuerySnapshot"),bundleName:Ce("string"),bundle:Ce("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mA(t){t=Eo(t,Fe);const e=Eo(t.firestore,Sf),n=gw(e);return Gk(n,t._key).then(r=>yA(e,t,r))}function wu(t,e,n){t=Eo(t,Fe);const r=Eo(t.firestore,Sf),i=fA(t.converter,e,n),s=iA(r);return gA(r,[sA(s,"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,pn.none())])}function gA(t,e){const n=gw(t);return Qk(n,e)}function yA(t,e,n){const r=n.docs.get(e._key),i=new cA(t);return new jr(t,i,e._key,r,new Bs(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){Wb(Ji),Ui(new zr("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new Sf(new Gb(r.getProvider("auth-internal")),new Jb(o,r.getProvider("app-check-internal")),mS(o,i),o);return s={useFetchStreams:n,...s},l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),rr(Jg,Xg,e),rr(Jg,Xg,"esm2020")})();var vA="firebase",_A="12.9.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rr(vA,_A,"app");function bw(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const wA=bw,Sw=new Vo("auth","Firebase",bw());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ml=new Kd("@firebase/auth");function TA(t,...e){Ml.logLevel<=te.WARN&&Ml.warn(`Auth (${Ji}): ${t}`,...e)}function Ja(t,...e){Ml.logLevel<=te.ERROR&&Ml.error(`Auth (${Ji}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rt(t,...e){throw Pf(t,...e)}function zt(t,...e){return Pf(t,...e)}function Nf(t,e,n){const r={...wA(),[e]:n};return new Vo("auth","Firebase",r).create(e,{appName:t.name})}function mn(t){return Nf(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function xA(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&Rt(t,"argument-error"),Nf(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function Pf(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return Sw.create(t,...e)}function K(t,e,...n){if(!t)throw Pf(e,...n)}function hn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Ja(e),new Error(e)}function En(t,e){t||hn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gh(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function EA(){return Zg()==="http:"||Zg()==="https:"}function Zg(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(EA()||bE()||"connection"in navigator)?navigator.onLine:!0}function SA(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wo{constructor(e,n){this.shortDelay=e,this.longDelay=n,En(n>e,"Short delay should be less than long delay!"),this.isMobile=TE()||SE()}get(){return bA()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rf(t,e){En(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iw{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;hn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;hn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;hn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IA={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kA=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],AA=new Wo(3e4,6e4);function yr(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function In(t,e,n,r,i={}){return kw(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=Fo({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const h={method:e,headers:u,...s};return EE()||(h.referrerPolicy="no-referrer"),t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(h.credentials="include"),Iw.fetch()(await Aw(t,t.config.apiHost,n,l),h)})}async function kw(t,e,n){t._canInitEmulator=!1;const r={...IA,...e};try{const i=new NA(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Na(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[u,h]=l.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw Na(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw Na(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw Na(t,"user-disabled",o);const p=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(h)throw Nf(t,p,h);Rt(t,p)}}catch(i){if(i instanceof Sn)throw i;Rt(t,"network-request-failed",{message:String(i)})}}async function qo(t,e,n,r,i={}){const s=await In(t,e,n,r,i);return"mfaPendingCredential"in s&&Rt(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function Aw(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?Rf(t.config,i):`${t.config.apiScheme}://${i}`;return kA.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function CA(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class NA{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(zt(this.auth,"network-request-failed")),AA.get())})}}function Na(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=zt(t,e,r);return i.customData._tokenResponse=n,i}function ey(t){return t!==void 0&&t.enterprise!==void 0}class PA{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return CA(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function RA(t,e){return In(t,"GET","/v2/recaptchaConfig",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function DA(t,e){return In(t,"POST","/v1/accounts:delete",e)}async function Ul(t,e){return In(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ro(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function LA(t,e=!1){const n=pt(t),r=await n.getIdToken(e),i=Df(r);K(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:ro(Cc(i.auth_time)),issuedAtTime:ro(Cc(i.iat)),expirationTime:ro(Cc(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Cc(t){return Number(t)*1e3}function Df(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Ja("JWT malformed, contained fewer than 3 sections"),null;try{const i=M0(n);return i?JSON.parse(i):(Ja("Failed to decode base64 JWT payload"),null)}catch(i){return Ja("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function ty(t){const e=Df(t);return K(e,"internal-error"),K(typeof e.exp<"u","internal-error"),K(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function qi(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Sn&&OA(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function OA({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jA{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qh{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=ro(this.lastLoginAt),this.creationTime=ro(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Bl(t){var m;const e=t.auth,n=await t.getIdToken(),r=await qi(t,Ul(e,{idToken:n}));K(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(m=i.providerUserInfo)!=null&&m.length?Cw(i.providerUserInfo):[],o=FA(t.providerData,s),l=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),h=l?u:!1,p={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new Qh(i.createdAt,i.lastLoginAt),isAnonymous:h};Object.assign(t,p)}async function VA(t){const e=pt(t);await Bl(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function FA(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function Cw(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MA(t,e){const n=await kw(t,{},async()=>{const r=Fo({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await Aw(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();l["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:l,body:r};return t.emulatorConfig&&Yi(t.emulatorConfig.host)&&(u.credentials="include"),Iw.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function UA(t,e){return In(t,"POST","/v2/accounts:revokeToken",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ni{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){K(e.idToken,"internal-error"),K(typeof e.idToken<"u","internal-error"),K(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ty(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){K(e.length!==0,"internal-error");const n=ty(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(K(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await MA(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new Ni;return r&&(K(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(K(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(K(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ni,this.toJSON())}_performRefresh(){return hn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jn(t,e){K(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Mt{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new jA(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new Qh(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await qi(this,this.stsTokenManager.getToken(this.auth,e));return K(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return LA(this,e)}reload(){return VA(this)}_assign(e){this!==e&&(K(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Mt({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){K(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Bl(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(yt(this.auth.app))return Promise.reject(mn(this.auth));const e=await this.getIdToken();return await qi(this,DA(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,l=n.tenantId??void 0,u=n._redirectEventId??void 0,h=n.createdAt??void 0,p=n.lastLoginAt??void 0,{uid:m,emailVerified:y,isAnonymous:S,providerData:b,stsTokenManager:P}=n;K(m&&P,e,"internal-error");const L=Ni.fromJSON(this.name,P);K(typeof m=="string",e,"internal-error"),jn(r,e.name),jn(i,e.name),K(typeof y=="boolean",e,"internal-error"),K(typeof S=="boolean",e,"internal-error"),jn(s,e.name),jn(o,e.name),jn(l,e.name),jn(u,e.name),jn(h,e.name),jn(p,e.name);const E=new Mt({uid:m,auth:e,email:i,emailVerified:y,displayName:r,isAnonymous:S,photoURL:o,phoneNumber:s,tenantId:l,stsTokenManager:L,createdAt:h,lastLoginAt:p});return b&&Array.isArray(b)&&(E.providerData=b.map(w=>({...w}))),u&&(E._redirectEventId=u),E}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ni;i.updateFromServerResponse(n);const s=new Mt({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Bl(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];K(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?Cw(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),l=new Ni;l.updateFromIdToken(r);const u=new Mt({uid:i.localId,auth:e,stsTokenManager:l,isAnonymous:o}),h={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new Qh(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,h),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ny=new Map;function dn(t){En(t instanceof Function,"Expected a class definition");let e=ny.get(t);return e?(En(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,ny.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nw{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}Nw.type="NONE";const ry=Nw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xa(t,e,n){return`firebase:${t}:${e}:${n}`}class Pi{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xa(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xa("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await Ul(this.auth,{idToken:e}).catch(()=>{});return n?Mt._fromGetAccountInfoResponse(this.auth,n,e):null}return Mt._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Pi(dn(ry),e,r);const i=(await Promise.all(n.map(async h=>{if(await h._isAvailable())return h}))).filter(h=>h);let s=i[0]||dn(ry);const o=Xa(r,e.config.apiKey,e.name);let l=null;for(const h of n)try{const p=await h._get(o);if(p){let m;if(typeof p=="string"){const y=await Ul(e,{idToken:p}).catch(()=>{});if(!y)break;m=await Mt._fromGetAccountInfoResponse(e,y,p)}else m=Mt._fromJSON(e,p);h!==s&&(l=m),s=h;break}}catch{}const u=i.filter(h=>h._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new Pi(s,e,r):(s=u[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async h=>{if(h!==s)try{await h._remove(o)}catch{}})),new Pi(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iy(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Lw(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(Pw(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(jw(e))return"Blackberry";if(Vw(e))return"Webos";if(Rw(e))return"Safari";if((e.includes("chrome/")||Dw(e))&&!e.includes("edge/"))return"Chrome";if(Ow(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function Pw(t=et()){return/firefox\//i.test(t)}function Rw(t=et()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function Dw(t=et()){return/crios\//i.test(t)}function Lw(t=et()){return/iemobile/i.test(t)}function Ow(t=et()){return/android/i.test(t)}function jw(t=et()){return/blackberry/i.test(t)}function Vw(t=et()){return/webos/i.test(t)}function Lf(t=et()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function BA(t=et()){var e;return Lf(t)&&!!((e=window.navigator)!=null&&e.standalone)}function HA(){return IE()&&document.documentMode===10}function Fw(t=et()){return Lf(t)||Ow(t)||Vw(t)||jw(t)||/windows phone/i.test(t)||Lw(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t,e=[]){let n;switch(t){case"Browser":n=iy(et());break;case"Worker":n=`${iy(et())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ji}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zA{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const u=e(s);o(u)}catch(u){l(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $A(t,e={}){return In(t,"GET","/v2/passwordPolicy",yr(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WA=6;class qA{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??WA,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KA{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new sy(this),this.idTokenSubscription=new sy(this),this.beforeStateQueue=new zA(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Sw,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=dn(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await Pi.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await Ul(this,{idToken:e}),r=await Mt._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(yt(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(l=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(l,l))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,l=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===l)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return K(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Bl(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=SA()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(yt(this.app))return Promise.reject(mn(this));const n=e?pt(e):null;return n&&K(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&K(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return yt(this.app)?Promise.reject(mn(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return yt(this.app)?Promise.reject(mn(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(dn(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await $A(this),n=new qA(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Vo("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await UA(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&dn(e)||this._popupRedirectResolver;K(n,this,"argument-error"),this.redirectPersistenceManager=await Pi.create(this,[dn(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(K(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return K(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mw(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(yt(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&TA(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vr(t){return pt(t)}class sy{constructor(e){this.auth=e,this.observer=null,this.addObserver=LE(n=>this.observer=n)}get next(){return K(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Tu={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function GA(t){Tu=t}function Uw(t){return Tu.loadJS(t)}function QA(){return Tu.recaptchaEnterpriseScript}function YA(){return Tu.gapiScript}function JA(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class XA{constructor(){this.enterprise=new ZA}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class ZA{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const eC="recaptcha-enterprise",Bw="NO_RECAPTCHA";class tC{constructor(e){this.type=eC,this.auth=vr(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{RA(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const h=new PA(u);return s.tenantId==null?s._agentRecaptchaConfig=h:s._tenantRecaptchaConfigs[s.tenantId]=h,o(h.siteKey)}}).catch(u=>{l(u)})})}function i(s,o,l){const u=window.grecaptcha;ey(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(h=>{o(h)}).catch(()=>{o(Bw)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new XA().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&ey(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=QA();u.length!==0&&(u+=l),Uw(u).then(()=>{i(l,s,o)}).catch(h=>{o(h)})}}).catch(l=>{o(l)})})}}async function Cs(t,e,n,r=!1,i=!1){const s=new tC(t);let o;if(i)o=Bw;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const l={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in l){const u=l.phoneEnrollmentInfo.phoneNumber,h=l.phoneEnrollmentInfo.recaptchaToken;Object.assign(l,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:h,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in l){const u=l.phoneSignInInfo.recaptchaToken;Object.assign(l,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return l}return r?Object.assign(l,{captchaResp:o}):Object.assign(l,{captchaResponse:o}),Object.assign(l,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(l,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),l}async function Yh(t,e,n,r,i){var s,o;if(i==="EMAIL_PASSWORD_PROVIDER")if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const l=await Cs(t,e,n,n==="getOobCode");return r(t,l)}else return r(t,e).catch(async l=>{if(l.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const u=await Cs(t,e,n,n==="getOobCode");return r(t,u)}else return Promise.reject(l)});else if(i==="PHONE_PROVIDER")if((o=t._getRecaptchaConfig())!=null&&o.isProviderEnabled("PHONE_PROVIDER")){const l=await Cs(t,e,n);return r(t,l).catch(async u=>{var h;if(((h=t._getRecaptchaConfig())==null?void 0:h.getProviderEnforcementState("PHONE_PROVIDER"))==="AUDIT"&&(u.code==="auth/missing-recaptcha-token"||u.code==="auth/invalid-app-credential")){console.log(`Failed to verify with reCAPTCHA Enterprise. Automatically triggering the reCAPTCHA v2 flow to complete the ${n} flow.`);const p=await Cs(t,e,n,!1,!0);return r(t,p)}return Promise.reject(u)})}else{const l=await Cs(t,e,n,!1,!0);return r(t,l)}else return Promise.reject(i+" provider is not supported.")}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nC(t,e){const n=Qd(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Hr(s,e??{}))return i;Rt(i,"already-initialized")}return n.initialize({options:e})}function rC(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(dn);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function iC(t,e,n){const r=vr(t);K(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=Hw(e),{host:o,port:l}=sC(e),u=l===null?"":`:${l}`,h={url:`${s}//${o}${u}/`},p=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){K(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),K(Hr(h,r.config.emulator)&&Hr(p,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=h,r.emulatorConfig=p,r.settings.appVerificationDisabledForTesting=!0,Yi(o)?(z0(`${s}//${o}${u}`),$0("Auth",!0)):i||oC()}function Hw(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function sC(t){const e=Hw(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:oy(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:oy(o)}}}function oy(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function oC(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Of{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return hn("not implemented")}_getIdTokenResponse(e){return hn("not implemented")}_linkToIdToken(e,n){return hn("not implemented")}_getReauthenticationResolver(e){return hn("not implemented")}}async function aC(t,e){return In(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function lC(t,e){return qo(t,"POST","/v1/accounts:signInWithPassword",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function uC(t,e){return qo(t,"POST","/v1/accounts:signInWithEmailLink",yr(t,e))}async function cC(t,e){return qo(t,"POST","/v1/accounts:signInWithEmailLink",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po extends Of{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Po(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Po(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,n,"signInWithPassword",lC,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return uC(e,{email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return Yh(e,r,"signUpPassword",aC,"EMAIL_PASSWORD_PROVIDER");case"emailLink":return cC(e,{idToken:n,email:this._email,oobCode:this._password});default:Rt(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ri(t,e){return qo(t,"POST","/v1/accounts:signInWithIdp",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hC="http://localhost";class Kr extends Of{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Kr(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Rt("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new Kr(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return Ri(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Ri(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Ri(e,n)}buildRequest(){const e={requestUri:hC,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Fo(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dC(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function fC(t){const e=js(Vs(t)).link,n=e?js(Vs(e)).deep_link_id:null,r=js(Vs(t)).deep_link_id;return(r?js(Vs(r)).link:null)||r||n||e||t}class jf{constructor(e){const n=js(Vs(e)),r=n.apiKey??null,i=n.oobCode??null,s=dC(n.mode??null);K(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=fC(e);try{return new jf(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ns{constructor(){this.providerId=ns.PROVIDER_ID}static credential(e,n){return Po._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=jf.parseLink(n);return K(r,"argument-error"),Po._fromEmailAndCode(e,r.code,r.tenantId)}}ns.PROVIDER_ID="password";ns.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ns.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vf{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ko extends Vf{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bn extends Ko{constructor(){super("facebook.com")}static credential(e){return Kr._fromParams({providerId:Bn.PROVIDER_ID,signInMethod:Bn.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Bn.credentialFromTaggedObject(e)}static credentialFromError(e){return Bn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Bn.credential(e.oauthAccessToken)}catch{return null}}}Bn.FACEBOOK_SIGN_IN_METHOD="facebook.com";Bn.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ln extends Ko{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Kr._fromParams({providerId:ln.PROVIDER_ID,signInMethod:ln.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return ln.credentialFromTaggedObject(e)}static credentialFromError(e){return ln.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return ln.credential(n,r)}catch{return null}}}ln.GOOGLE_SIGN_IN_METHOD="google.com";ln.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn extends Ko{constructor(){super("github.com")}static credential(e){return Kr._fromParams({providerId:Hn.PROVIDER_ID,signInMethod:Hn.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Hn.credentialFromTaggedObject(e)}static credentialFromError(e){return Hn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Hn.credential(e.oauthAccessToken)}catch{return null}}}Hn.GITHUB_SIGN_IN_METHOD="github.com";Hn.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zn extends Ko{constructor(){super("twitter.com")}static credential(e,n){return Kr._fromParams({providerId:zn.PROVIDER_ID,signInMethod:zn.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return zn.credentialFromTaggedObject(e)}static credentialFromError(e){return zn.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return zn.credential(n,r)}catch{return null}}}zn.TWITTER_SIGN_IN_METHOD="twitter.com";zn.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function pC(t,e){return qo(t,"POST","/v1/accounts:signUp",yr(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gr{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await Mt._fromIdTokenResponse(e,r,i),o=ay(r);return new Gr({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=ay(r);return new Gr({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function ay(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl extends Sn{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Hl.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Hl(e,n,r,i)}}function zw(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Hl._fromErrorAndOperation(t,s,e,r):s})}async function mC(t,e,n=!1){const r=await qi(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Gr._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gC(t,e,n=!1){const{auth:r}=t;if(yt(r.app))return Promise.reject(mn(r));const i="reauthenticate";try{const s=await qi(t,zw(r,i,e,t),n);K(s.idToken,r,"internal-error");const o=Df(s.idToken);K(o,r,"internal-error");const{sub:l}=o;return K(t.uid===l,r,"user-mismatch"),Gr._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Rt(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $w(t,e,n=!1){if(yt(t.app))return Promise.reject(mn(t));const r="signIn",i=await zw(t,r,e),s=await Gr._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function yC(t,e){return $w(vr(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ww(t){const e=vr(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function vC(t,e,n){if(yt(t.app))return Promise.reject(mn(t));const r=vr(t),o=await Yh(r,{returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",pC,"EMAIL_PASSWORD_PROVIDER").catch(u=>{throw u.code==="auth/password-does-not-meet-requirements"&&Ww(t),u}),l=await Gr._fromIdTokenResponse(r,"signIn",o);return await r._updateCurrentUser(l.user),l}function _C(t,e,n){return yt(t.app)?Promise.reject(mn(t)):yC(pt(t),ns.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&Ww(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function wC(t,e){return In(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TC(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=pt(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await qi(r,wC(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:u})=>u==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function xC(t,e,n,r){return pt(t).onIdTokenChanged(e,n,r)}function EC(t,e,n){return pt(t).beforeAuthStateChanged(e,n)}function bC(t,e,n,r){return pt(t).onAuthStateChanged(e,n,r)}function SC(t){return pt(t).signOut()}const zl="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(zl,"1"),this.storage.removeItem(zl),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IC=1e3,kC=10;class Kw extends qw{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Fw(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);HA()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,kC):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},IC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}Kw.type="LOCAL";const AC=Kw;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends qw{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}Gw.type="SESSION";const Qw=Gw;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CC(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new xu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async h=>h(n.origin,s)),u=await CC(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}xu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ff(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,u)=>{const h=Ff("",20);i.port1.start();const p=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(m){const y=m;if(y.data.eventId===h)switch(y.data.status){case"ack":clearTimeout(p),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(y.data.response);break;default:clearTimeout(p),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:h,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nn(){return window}function PC(t){nn().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yw(){return typeof nn().WorkerGlobalScope<"u"&&typeof nn().importScripts=="function"}async function RC(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function DC(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function LC(){return Yw()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jw="firebaseLocalStorageDb",OC=1,$l="firebaseLocalStorage",Xw="fbase_key";class Go{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Eu(t,e){return t.transaction([$l],e?"readwrite":"readonly").objectStore($l)}function jC(){const t=indexedDB.deleteDatabase(Jw);return new Go(t).toPromise()}function Jh(){const t=indexedDB.open(Jw,OC);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore($l,{keyPath:Xw})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains($l)?e(r):(r.close(),await jC(),e(await Jh()))})})}async function ly(t,e,n){const r=Eu(t,!0).put({[Xw]:e,value:n});return new Go(r).toPromise()}async function VC(t,e){const n=Eu(t,!1).get(e),r=await new Go(n).toPromise();return r===void 0?null:r.value}function uy(t,e){const n=Eu(t,!0).delete(e);return new Go(n).toPromise()}const FC=800,MC=3;class Zw{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await Jh(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>MC)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Yw()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=xu._getInstance(LC()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await RC(),!this.activeServiceWorker)return;this.sender=new NC(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||DC()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await Jh();return await ly(e,zl,"1"),await uy(e,zl),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>ly(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>VC(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>uy(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Eu(i,!1).getAll();return new Go(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),FC)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Zw.type="LOCAL";const UC=Zw;new Wo(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eT(t,e){return e?dn(e):(K(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mf extends Of{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Ri(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Ri(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Ri(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function BC(t){return $w(t.auth,new Mf(t),t.bypassAuthState)}function HC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),gC(n,new Mf(t),t.bypassAuthState)}async function zC(t){const{auth:e,user:n}=t;return K(n,e,"internal-error"),mC(n,new Mf(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tT{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(u))}catch(h){this.reject(h)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return BC;case"linkViaPopup":case"linkViaRedirect":return zC;case"reauthViaPopup":case"reauthViaRedirect":return HC;default:Rt(this.auth,"internal-error")}}resolve(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){En(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $C=new Wo(2e3,1e4);async function WC(t,e,n){if(yt(t.app))return Promise.reject(zt(t,"operation-not-supported-in-this-environment"));const r=vr(t);xA(t,e,Vf);const i=eT(r,n);return new Dr(r,"signInViaPopup",e,i).executeNotNull()}class Dr extends tT{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Dr.currentPopupAction&&Dr.currentPopupAction.cancel(),Dr.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return K(e,this.auth,"internal-error"),e}async onExecution(){En(this.filter.length===1,"Popup operations only handle one event");const e=Ff();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(zt(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(zt(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Dr.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(zt(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,$C.get())};e()}}Dr.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC="pendingRedirect",Za=new Map;class KC extends tT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Za.get(this.auth._key());if(!e){try{const r=await GC(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Za.set(this.auth._key(),e)}return this.bypassAuthState||Za.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function GC(t,e){const n=JC(e),r=YC(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function QC(t,e){Za.set(t._key(),e)}function YC(t){return dn(t._redirectPersistence)}function JC(t){return Xa(qC,t.config.apiKey,t.name)}async function XC(t,e,n=!1){if(yt(t.app))return Promise.reject(mn(t));const r=vr(t),i=eT(r,e),o=await new KC(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZC=10*60*1e3;class eN{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!tN(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!nT(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(zt(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=ZC&&this.cachedEventUids.clear(),this.cachedEventUids.has(cy(e))}saveEventToCache(e){this.cachedEventUids.add(cy(e)),this.lastProcessedEventTime=Date.now()}}function cy(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function nT({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function tN(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return nT(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function nN(t,e={}){return In(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rN=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,iN=/^https?/;async function sN(t){if(t.config.emulator)return;const{authorizedDomains:e}=await nN(t);for(const n of e)try{if(oN(n))return}catch{}Rt(t,"unauthorized-domain")}function oN(t){const e=Gh(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!iN.test(n))return!1;if(rN.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aN=new Wo(3e4,6e4);function hy(){const t=nn().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function lN(t){return new Promise((e,n)=>{var i,s,o;function r(){hy(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{hy(),n(zt(t,"network-request-failed"))},timeout:aN.get()})}if((s=(i=nn().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=nn().gapi)!=null&&o.load)r();else{const l=JA("iframefcb");return nn()[l]=()=>{gapi.load?r():n(zt(t,"network-request-failed"))},Uw(`${YA()}?onload=${l}`).catch(u=>n(u))}}).catch(e=>{throw el=null,e})}let el=null;function uN(t){return el=el||lN(t),el}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cN=new Wo(5e3,15e3),hN="__/auth/iframe",dN="emulator/auth/iframe",fN={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},pN=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function mN(t){const e=t.config;K(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Rf(e,dN):`https://${t.config.authDomain}/${hN}`,r={apiKey:e.apiKey,appName:t.name,v:Ji},i=pN.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Fo(r).slice(1)}`}async function gN(t){const e=await uN(t),n=nn().gapi;return K(n,t,"internal-error"),e.open({where:document.body,url:mN(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:fN,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=zt(t,"network-request-failed"),l=nn().setTimeout(()=>{s(o)},cN.get());function u(){nn().clearTimeout(l),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yN={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},vN=500,_N=600,wN="_blank",TN="http://localhost";class dy{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function xN(t,e,n,r=vN,i=_N){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const u={...yN,width:r.toString(),height:i.toString(),top:s,left:o},h=et().toLowerCase();n&&(l=Dw(h)?wN:n),Pw(h)&&(e=e||TN,u.scrollbars="yes");const p=Object.entries(u).reduce((y,[S,b])=>`${y}${S}=${b},`,"");if(BA(h)&&l!=="_self")return EN(e||"",l),new dy(null);const m=window.open(e||"",l,p);K(m,t,"popup-blocked");try{m.focus()}catch{}return new dy(m)}function EN(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN="__/auth/handler",SN="emulator/auth/handler",IN=encodeURIComponent("fac");async function fy(t,e,n,r,i,s){K(t.config.authDomain,t,"auth-domain-config-required"),K(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ji,eventId:i};if(e instanceof Vf){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",DE(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[p,m]of Object.entries(s||{}))o[p]=m}if(e instanceof Ko){const p=e.getScopes().filter(m=>m!=="");p.length>0&&(o.scopes=p.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const p of Object.keys(l))l[p]===void 0&&delete l[p];const u=await t._getAppCheckToken(),h=u?`#${IN}=${encodeURIComponent(u)}`:"";return`${kN(t)}?${Fo(l).slice(1)}${h}`}function kN({config:t}){return t.emulator?Rf(t,SN):`https://${t.authDomain}/${bN}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nc="webStorageSupport";class AN{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Qw,this._completeRedirectFn=XC,this._overrideRedirectResult=QC}async _openPopup(e,n,r,i){var o;En((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await fy(e,n,r,Gh(),i);return xN(e,s,Ff())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await fy(e,n,r,Gh(),i);return PC(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(En(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await gN(e),r=new eN(e);return n.register("authEvent",i=>(K(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Nc,{type:Nc},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[Nc];s!==void 0&&n(!!s),Rt(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=sN(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return Fw()||Rw()||Lf()}}const CN=AN;var py="@firebase/auth",my="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NN{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){K(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PN(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function RN(t){Ui(new zr("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;K(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mw(t)},h=new KA(r,i,s,u);return rC(h,n),h},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ui(new zr("auth-internal",e=>{const n=vr(e.getProvider("auth").getImmediate());return(r=>new NN(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),rr(py,my,PN(t)),rr(py,my,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const DN=5*60,LN=H0("authIdTokenMaxAge")||DN;let gy=null;const ON=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>LN)return;const i=n==null?void 0:n.token;gy!==i&&(gy=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function jN(t=G0()){const e=Qd(t,"auth");if(e.isInitialized())return e.getImmediate();const n=nC(t,{popupRedirectResolver:CN,persistence:[UC,AC,Qw]}),r=H0("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=ON(s.toString());EC(n,o,()=>o(n.currentUser)),xC(n,l=>o(l))}}const i=U0("auth");return i&&iC(n,`http://${i}`),n}function VN(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}GA({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=zt("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",VN().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});RN("Browser");const FN={apiKey:"AIzaSyC9qMnp4Atxm4t9UsXm6UgLHZ1K-7bEEtE",authDomain:"pawmatch-967a7.firebaseapp.com",projectId:"pawmatch-967a7",storageBucket:"pawmatch-967a7.firebasestorage.app",messagingSenderId:"966667874213",appId:"1:966667874213:web:a73961006f533275b0024c"},rT=K0(FN),Ns=jN(rT),Qo=Zk(rT),iT=$.createContext(null);function bu(){return $.useContext(iT)}function MN({children:t}){const[e,n]=$.useState(null),[r,i]=$.useState(!0);$.useEffect(()=>bC(Ns,m=>{n(m),i(!1)}),[]);async function s(p,m,y){const S=await vC(Ns,p,m);return await TC(S.user,{displayName:y}),n({...S.user,displayName:y}),S}function o(p,m){return _C(Ns,p,m)}function l(){const p=new ln;return WC(Ns,p)}function u(){return SC(Ns)}const h={currentUser:e,authLoading:r,signup:s,login:o,loginWithGoogle:l,logout:u};return d.jsx(iT.Provider,{value:h,children:t})}function UN({onSwitchToSignup:t}){const{login:e,loginWithGoogle:n}=bu(),[r,i]=$.useState(""),[s,o]=$.useState(""),[l,u]=$.useState(""),[h,p]=$.useState(!1);async function m(S){S.preventDefault(),u(""),p(!0);try{await e(r,s)}catch(b){u(yy(b.code))}finally{p(!1)}}async function y(){u(""),p(!0);try{await n()}catch(S){S.code!=="auth/popup-closed-by-user"&&u(yy(S.code))}finally{p(!1)}}return d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex justify-center items-center px-5",children:d.jsxs("div",{className:"w-full max-w-[430px]",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("span",{className:"text-5xl",children:""}),d.jsx("h1",{className:"font-display text-3xl font-bold text-[#FF6B35] mt-2",children:"PawMatch"}),d.jsx("p",{className:"text-gray-500 text-sm mt-1 font-semibold",children:"Find your perfect companion"})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[d.jsx("h2",{className:"font-display text-xl font-bold text-gray-900 mb-5",children:"Welcome back"}),l&&d.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 text-sm font-semibold rounded-2xl px-4 py-3",children:l}),d.jsxs("form",{onSubmit:m,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Email"}),d.jsx("input",{type:"email",value:r,onChange:S=>i(S.target.value),required:!0,placeholder:"you@email.com",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Password"}),d.jsx("input",{type:"password",value:s,onChange:S=>o(S.target.value),required:!0,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsx("button",{type:"submit",disabled:h,className:"w-full py-3.5 rounded-2xl bg-[#FF6B35] text-white font-bold text-sm shadow-sm hover:bg-orange-500 active:scale-95 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",children:h?"Logging in":"Log in"})]}),d.jsxs("div",{className:"flex items-center gap-3 my-4",children:[d.jsx("div",{className:"flex-1 h-px bg-gray-200"}),d.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),d.jsxs("button",{onClick:y,disabled:h,className:"w-full py-3.5 rounded-2xl border-2 border-gray-200 bg-white text-gray-700 font-bold text-sm flex items-center justify-center gap-3 hover:bg-gray-50 active:scale-95 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",children:[d.jsx(BN,{}),"Continue with Google"]})]}),d.jsxs("p",{className:"text-center text-sm text-gray-500 mt-5 font-semibold",children:["New to PawMatch?"," ",d.jsx("button",{onClick:t,className:"text-[#FF6B35] font-bold hover:underline",children:"Create an account"})]})]})})}function BN(){return d.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48",children:[d.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),d.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),d.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),d.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]})}function yy(t){switch(t){case"auth/user-not-found":case"auth/wrong-password":case"auth/invalid-credential":return"Incorrect email or password.";case"auth/too-many-requests":return"Too many attempts. Please try again later.";case"auth/network-request-failed":return"Network error. Check your connection.";default:return"Something went wrong. Please try again."}}function HN({onSwitchToLogin:t}){const{signup:e,loginWithGoogle:n}=bu(),[r,i]=$.useState(""),[s,o]=$.useState(""),[l,u]=$.useState(""),[h,p]=$.useState(""),[m,y]=$.useState(""),[S,b]=$.useState(!1);async function P(E){if(E.preventDefault(),y(""),l!==h)return y("Passwords do not match.");if(l.length<6)return y("Password must be at least 6 characters.");b(!0);try{await e(s,l,r.trim())}catch(w){y(vy(w.code))}finally{b(!1)}}async function L(){y(""),b(!0);try{await n()}catch(E){E.code!=="auth/popup-closed-by-user"&&y(vy(E.code))}finally{b(!1)}}return d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex justify-center items-center px-5",children:d.jsxs("div",{className:"w-full max-w-[430px]",children:[d.jsxs("div",{className:"text-center mb-8",children:[d.jsx("span",{className:"text-5xl",children:""}),d.jsx("h1",{className:"font-display text-3xl font-bold text-[#FF6B35] mt-2",children:"PawMatch"}),d.jsx("p",{className:"text-gray-500 text-sm mt-1 font-semibold",children:"Find your perfect companion"})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6",children:[d.jsx("h2",{className:"font-display text-xl font-bold text-gray-900 mb-5",children:"Create your account"}),m&&d.jsx("div",{className:"mb-4 bg-red-50 border border-red-200 text-red-600 text-sm font-semibold rounded-2xl px-4 py-3",children:m}),d.jsxs("form",{onSubmit:P,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Your Name"}),d.jsx("input",{type:"text",value:r,onChange:E=>i(E.target.value),required:!0,placeholder:"Alex",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Email"}),d.jsx("input",{type:"email",value:s,onChange:E=>o(E.target.value),required:!0,placeholder:"you@email.com",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Password"}),d.jsx("input",{type:"password",value:l,onChange:E=>u(E.target.value),required:!0,placeholder:"Min. 6 characters",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsxs("div",{children:[d.jsx("label",{className:"block text-xs font-bold text-gray-500 mb-1.5 uppercase tracking-wider",children:"Confirm Password"}),d.jsx("input",{type:"password",value:h,onChange:E=>p(E.target.value),required:!0,placeholder:"",className:"w-full px-4 py-3 rounded-2xl border border-gray-200 bg-gray-50 text-gray-900 text-sm font-semibold placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] focus:border-transparent transition"})]}),d.jsx("button",{type:"submit",disabled:S,className:"w-full py-3.5 rounded-2xl bg-[#FF6B35] text-white font-bold text-sm shadow-sm hover:bg-orange-500 active:scale-95 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",children:S?"Creating account":"Create account"})]}),d.jsxs("div",{className:"flex items-center gap-3 my-4",children:[d.jsx("div",{className:"flex-1 h-px bg-gray-200"}),d.jsx("span",{className:"text-xs text-gray-400 font-semibold",children:"or"}),d.jsx("div",{className:"flex-1 h-px bg-gray-200"})]}),d.jsxs("button",{onClick:L,disabled:S,className:"w-full py-3.5 rounded-2xl border-2 border-gray-200 bg-white text-gray-700 font-bold text-sm flex items-center justify-center gap-3 hover:bg-gray-50 active:scale-95 transition-all duration-200 disabled:opacity-60 disabled:cursor-not-allowed",children:[d.jsx(zN,{}),"Continue with Google"]})]}),d.jsxs("p",{className:"text-center text-sm text-gray-500 mt-5 font-semibold",children:["Already have an account?"," ",d.jsx("button",{onClick:t,className:"text-[#FF6B35] font-bold hover:underline",children:"Log in"})]})]})})}function zN(){return d.jsxs("svg",{width:"18",height:"18",viewBox:"0 0 48 48",children:[d.jsx("path",{fill:"#EA4335",d:"M24 9.5c3.54 0 6.71 1.22 9.21 3.6l6.85-6.85C35.9 2.38 30.47 0 24 0 14.62 0 6.51 5.38 2.56 13.22l7.98 6.19C12.43 13.72 17.74 9.5 24 9.5z"}),d.jsx("path",{fill:"#4285F4",d:"M46.98 24.55c0-1.57-.15-3.09-.38-4.55H24v9.02h12.94c-.58 2.96-2.26 5.48-4.78 7.18l7.73 6c4.51-4.18 7.09-10.36 7.09-17.65z"}),d.jsx("path",{fill:"#FBBC05",d:"M10.53 28.59c-.48-1.45-.76-2.99-.76-4.59s.27-3.14.76-4.59l-7.98-6.19C.92 16.46 0 20.12 0 24c0 3.88.92 7.54 2.56 10.78l7.97-6.19z"}),d.jsx("path",{fill:"#34A853",d:"M24 48c6.48 0 11.93-2.13 15.89-5.81l-7.73-6c-2.15 1.45-4.92 2.3-8.16 2.3-6.26 0-11.57-4.22-13.47-9.91l-7.98 6.19C6.51 42.62 14.62 48 24 48z"})]})}function vy(t){switch(t){case"auth/email-already-in-use":return"An account with this email already exists.";case"auth/invalid-email":return"Please enter a valid email address.";case"auth/weak-password":return"Password must be at least 6 characters.";case"auth/network-request-failed":return"Network error. Check your connection.";default:return"Something went wrong. Please try again."}}const Ps=[{id:1,question:"How do you recharge?",subtitle:"Think about what energizes you most.",options:[{label:"Alone time",value:"I",emoji:"",desc:"I need quiet time to feel like myself again"},{label:"With others",value:"E",emoji:"",desc:"Being around people fills me with energy"}]},{id:2,question:"How do you make decisions?",subtitle:"When it really matters, what guides you?",options:[{label:"Logic & facts",value:"T",emoji:"",desc:"I weigh the evidence and decide rationally"},{label:"Feelings & values",value:"F",emoji:"",desc:"I listen to my heart and consider everyone"}]},{id:3,question:"How do you prefer your day?",subtitle:"Picture your ideal Tuesday.",options:[{label:"Planned & structured",value:"J",emoji:"",desc:"I love a good schedule and checking boxes"},{label:"Go with the flow",value:"P",emoji:"",desc:"I like seeing where the day takes me"}]},{id:4,question:"How do you take in information?",subtitle:"What do you naturally focus on?",options:[{label:"Details & routine",value:"S",emoji:"",desc:"I notice specifics and trust what I know works"},{label:"Big picture & ideas",value:"N",emoji:"",desc:"I love patterns, possibilities, and new concepts"}]},{id:5,question:"How active is your lifestyle?",subtitle:"Be honest  your future pet will thank you.",options:[{label:"Very active",value:"very_active",emoji:"",desc:"Hikes, runs, and outdoor adventures daily"},{label:"Moderately active",value:"moderately_active",emoji:"",desc:"Regular walks and weekend outings"},{label:"Homebody",value:"homebody",emoji:"",desc:"I prefer cozy indoor time over outdoor adventures"}]},{id:6,question:"Where do you live?",subtitle:"HDB rules affect which pets you can keep.",hdbNote:"HDB only allows specific small dog breeds. We'll filter your matches so you only see pets you can legally own.",options:[{label:"HDB Flat",value:"hdb",emoji:"",desc:"Only HDB-approved breeds allowed  we'll filter for you"},{label:"Private Condo",value:"condo",emoji:"",desc:"Most pets welcome, subject to condo rules"},{label:"Landed Property",value:"landed",emoji:"",desc:"Plenty of space for dogs of any size"}]},{id:7,question:"How much time can you dedicate daily?",subtitle:"For play, walks, grooming, and bonding.",options:[{label:"12 hours",value:"1_2_hrs",emoji:"",desc:"I'm busy but committed to quality time"},{label:"34 hours",value:"3_4_hrs",emoji:"",desc:"A good chunk of my day is for my pet"},{label:"5+ hours",value:"5_plus_hrs",emoji:"",desc:"My pet is my priority and my partner"}]},{id:8,question:"Any experience with pets?",subtitle:"Honesty leads to the best match.",options:[{label:"First timer",value:"first_timer",emoji:"",desc:"This will be my very first pet  so excited!"},{label:"Some experience",value:"some_experience",emoji:"",desc:"I've had pets before and learned a lot"},{label:"Very experienced",value:"very_experienced",emoji:"",desc:"I've raised multiple pets and know the ropes"}]}];function $N(t){return`${t[1]}${t[4]}${t[2]}${t[3]}`}function WN({onComplete:t}){var S;const[e,n]=$.useState(-1),[r,i]=$.useState({}),[s,o]=$.useState(null),[l,u]=$.useState(!1),h=Ps[e],p=e>=0?(e+1)/Ps.length*100:0,m=b=>o(b),y=()=>{if(e===-1){n(0);return}if(!s||l)return;const b={...r,[h.id]:s};i(b),u(!0),setTimeout(()=>{if(u(!1),e<Ps.length-1)n(P=>P+1),o(null);else{const P=$N(b);t({mbti:P,activityLevel:b[5],livingSpace:b[6],timeAvailable:b[7],experience:b[8]})}},280)};return e===-1?d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex flex-col items-center justify-center p-6 max-w-[430px] mx-auto",children:d.jsxs("div",{className:"text-center animate-fade-scale-in",children:[d.jsx("div",{className:"text-8xl mb-6 animate-pulse-ring inline-block rounded-full",children:""}),d.jsx("h1",{className:"font-display text-5xl font-bold text-[#FF6B35] mb-3",children:"PawMatch"}),d.jsx("p",{className:"text-gray-500 text-lg font-semibold mb-2",children:"Every Singapore animal deserves a second chance"}),d.jsx("p",{className:"text-gray-400 text-sm max-w-xs mx-auto leading-relaxed",children:"Answer 8 quick questions and we'll use your personality type to match you with animals who truly complement you."}),d.jsxs("div",{className:"flex justify-center gap-6 my-8 text-4xl",children:[d.jsx("span",{children:""}),d.jsx("span",{children:""}),d.jsx("span",{children:""})]}),d.jsx("button",{onClick:y,className:"w-full bg-[#FF6B35] text-white py-4 rounded-2xl font-bold text-lg shadow-lg hover:bg-orange-600 active:scale-95 transition-all duration-200",children:"Start My Quiz "}),d.jsx("p",{className:"text-xs text-gray-400 mt-4",children:"Takes about 2 minutes"})]})}):d.jsxs("div",{className:"min-h-screen bg-[#FFF8F0] flex flex-col max-w-[430px] mx-auto",children:[d.jsxs("div",{className:"px-5 pt-10 pb-4",children:[d.jsxs("div",{className:"flex items-center justify-between mb-2",children:[d.jsxs("span",{className:"text-xs font-bold text-gray-400 uppercase tracking-wider",children:["Question ",e+1," of ",Ps.length]}),d.jsxs("span",{className:"text-xs font-bold text-[#FF6B35]",children:[Math.round(p),"%"]})]}),d.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:d.jsx("div",{className:"h-2 rounded-full bg-gradient-to-r from-[#FF6B35] to-orange-400 transition-all duration-500 ease-out",style:{width:`${p}%`}})})]}),d.jsxs("div",{className:`flex-1 flex flex-col px-5 pb-8 transition-all duration-280 ${l?"opacity-0 -translate-x-8":"opacity-100 translate-x-0"}`,style:{transition:"opacity 0.28s ease, transform 0.28s ease"},children:[d.jsxs("div",{className:"bg-white rounded-3xl shadow-md p-7 mb-4",children:[d.jsx("div",{className:"text-5xl mb-5 text-center",children:(S=h.options[0])==null?void 0:S.emoji}),d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 text-center leading-snug mb-2",children:h.question}),d.jsx("p",{className:"text-gray-400 text-sm text-center",children:h.subtitle})]}),d.jsx("div",{className:"space-y-3 flex-1",children:h.options.map(b=>{const P=s===b.value;return d.jsxs("button",{onClick:()=>m(b.value),className:`w-full text-left py-4 px-5 rounded-2xl border-2 flex items-start gap-4 transition-all duration-200 ${P?"border-[#FF6B35] bg-orange-50 shadow-md scale-[1.01]":"border-gray-200 bg-white hover:border-orange-200 hover:bg-orange-50/50"}`,children:[d.jsx("span",{className:"text-2xl mt-0.5 flex-shrink-0",children:b.emoji}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:`font-bold text-base leading-tight ${P?"text-[#FF6B35]":"text-gray-800"}`,children:b.label}),d.jsx("p",{className:`text-xs mt-0.5 leading-snug ${P?"text-orange-500/80":"text-gray-400"}`,children:b.desc})]}),d.jsx("div",{className:`flex-shrink-0 w-5 h-5 rounded-full border-2 mt-0.5 flex items-center justify-center transition-all ${P?"border-[#FF6B35] bg-[#FF6B35]":"border-gray-300"}`,children:P&&d.jsx("span",{className:"text-white text-xs font-black",children:""})})]},b.value)})}),h.hdbNote&&d.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-2xl px-4 py-3 flex items-start gap-3",children:[d.jsx("span",{className:"text-lg flex-shrink-0 mt-0.5",children:""}),d.jsx("p",{className:"text-xs text-green-800 leading-snug font-semibold",children:h.hdbNote})]}),d.jsx("button",{onClick:y,disabled:!s,className:`w-full mt-5 py-4 rounded-2xl font-bold text-lg transition-all duration-200 ${s?"bg-[#FF6B35] text-white shadow-lg hover:bg-orange-600 active:scale-95":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:e<Ps.length-1?"Continue ":" Find My Match!"})]})]})}const Pc=90;function qN({level:t}){return d.jsxs("div",{className:"flex items-center gap-1.5",children:[d.jsx("span",{className:"text-xs font-bold text-gray-500",children:"Energy"}),d.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>d.jsx("div",{className:`w-4 h-1.5 rounded-full transition-colors ${e<=t?"bg-[#FF6B35]":"bg-gray-200"}`},e))})]})}const KN=$.forwardRef(function({animal:e,isTop:n,behindIndex:r=0,onSwipe:i,onTap:s},o){const l=$.useRef({active:!1,startX:0,startY:0,x:0,y:0}),[u,h]=$.useState({x:0,y:0,active:!1}),[p,m]=$.useState(null);$.useImperativeHandle(o,()=>({triggerSwipe(R){p||(m(R),setTimeout(()=>i(R),360))}}));const y=(R,F)=>{!n||p||(l.current={active:!0,startX:R,startY:F,x:0,y:0},h({x:0,y:0,active:!0}))},S=(R,F)=>{if(!l.current.active)return;const M=R-l.current.startX,T=F-l.current.startY;l.current.x=M,l.current.y=T,h({x:M,y:T,active:!0})},b=()=>{if(!l.current.active)return;l.current.active=!1;const{x:R,y:F}=l.current;if(Math.abs(R)<10&&Math.abs(F)<15){h({x:0,y:0,active:!1}),s==null||s();return}R>Pc?(m("right"),setTimeout(()=>i("right"),360)):R<-Pc?(m("left"),setTimeout(()=>i("left"),360)):(l.current.x=0,l.current.y=0,h({x:0,y:0,active:!1}))},P=()=>{if(p==="right")return"translateX(130%) rotate(25deg)";if(p==="left")return"translateX(-130%) rotate(-25deg)";if(u.active){const R=u.x*.07;return`translateX(${u.x}px) translateY(${u.y*.25}px) rotate(${R}deg)`}if(!n&&r>0){const R=1-r*.04,F=r*14;return`scale(${R}) translateY(${F}px)`}return"scale(1) translateY(0)"},L=Math.abs(u.x),E=Math.min(L/Pc,1),w=u.x>15,A=u.x<-15;return d.jsx("div",{className:"swipe-card absolute inset-0",style:{transform:P(),transition:u.active?"none":"transform 0.35s cubic-bezier(0.25, 0.46, 0.45, 0.94)",zIndex:n?10:10-r,cursor:n?u.active?"grabbing":"grab":"default"},onMouseDown:n?R=>{R.preventDefault(),y(R.clientX,R.clientY)}:void 0,onMouseMove:u.active?R=>S(R.clientX,R.clientY):void 0,onMouseUp:u.active?b:void 0,onMouseLeave:u.active?b:void 0,onTouchStart:n?R=>y(R.touches[0].clientX,R.touches[0].clientY):void 0,onTouchMove:u.active?R=>{R.preventDefault(),S(R.touches[0].clientX,R.touches[0].clientY)}:void 0,onTouchEnd:u.active?b:void 0,children:d.jsxs("div",{className:"w-full h-full bg-white rounded-[28px] overflow-hidden shadow-[0_8px_40px_rgba(0,0,0,0.12)]",children:[d.jsxs("div",{className:"relative",style:{height:"58%"},children:[d.jsx("img",{src:e.photo,alt:e.name,className:"w-full h-full object-cover",draggable:!1,onError:R=>{R.target.onerror=null,e.species==="cat"?R.target.src="https://placekitten.com/500/600":e.species==="rabbit"?R.target.src="https://picsum.photos/seed/rabbit/500/600":R.target.src=`https://placedog.net/500/600?id=${e.id}`}}),d.jsx("div",{className:"absolute inset-0 photo-gradient"}),d.jsxs("div",{className:"absolute top-4 left-4 flex items-center gap-1.5 bg-amber-500 text-white px-3 py-1.5 rounded-full shadow-lg",children:[d.jsx("span",{className:"text-sm",children:""}),d.jsxs("span",{className:"text-xs font-extrabold tracking-wide",children:[e.daysInShelter,"d waiting"]})]}),d.jsx("div",{className:"absolute top-4 right-4 text-2xl drop-shadow-lg",children:e.species==="dog"?"":""}),e.specialNeeds&&d.jsx("div",{className:"absolute bottom-3 left-4 bg-purple-500 text-white px-2.5 py-1 rounded-full text-xs font-bold shadow",children:" Special Care"})]}),d.jsxs("div",{className:"flex flex-col justify-between px-5 py-3.5",style:{height:"42%"},children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-start justify-between gap-2 mb-2",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsxs("h2",{className:"font-display text-xl font-bold text-gray-900 leading-tight",children:[e.name,", ",e.age]}),d.jsx("p",{className:"text-gray-600 text-xs font-semibold mt-0.5",children:e.breed})]}),d.jsx("span",{className:"flex-shrink-0 bg-orange-50 border border-orange-200 text-[#FF6B35] px-2.5 py-1 rounded-full text-[11px] font-bold text-center leading-tight max-w-[130px]",children:e.personalityTag})]}),d.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[d.jsx(qN,{level:e.energyLevel}),e.hdbApproved!==void 0&&d.jsx("span",{className:`text-[10px] font-bold px-2 py-0.5 rounded-full ${e.hdbApproved?"bg-green-100 text-green-700":"bg-gray-100 text-gray-500"}`,children:e.hdbApproved?" HDB":"Private only"})]})]}),d.jsx("p",{className:"text-[13px] text-gray-700 leading-snug line-clamp-2",children:e.bio})]}),d.jsx("div",{className:"absolute inset-0 rounded-[28px] flex items-center justify-start pl-7",style:{backgroundColor:`rgba(76,175,120,${.65*(w?E:0)})`,opacity:w?1:0,transition:"opacity 0.08s"},children:d.jsx("div",{className:"border-[3px] border-white px-5 py-2 rounded-xl",style:{transform:"rotate(-22deg)"},children:d.jsx("span",{className:"text-white text-3xl font-black tracking-[0.15em]",children:"ADOPT"})})}),d.jsx("div",{className:"absolute inset-0 rounded-[28px] flex items-center justify-end pr-7",style:{backgroundColor:`rgba(239,68,68,${.65*(A?E:0)})`,opacity:A?1:0,transition:"opacity 0.08s"},children:d.jsx("div",{className:"border-[3px] border-white px-5 py-2 rounded-xl",style:{transform:"rotate(22deg)"},children:d.jsx("span",{className:"text-white text-3xl font-black tracking-[0.15em]",children:"PASS"})})})]})})});function GN({level:t}){return d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-xs font-bold text-gray-400",children:"Energy"}),d.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(e=>d.jsx("div",{className:`w-5 h-2 rounded-full ${e<=t?"bg-[#FF6B35]":"bg-gray-200"}`},e))})]})}function sT({animal:t,onClose:e}){const[n,r]=$.useState(!1);$.useEffect(()=>{const l=setTimeout(()=>r(!0),30);return()=>clearTimeout(l)},[]);const i=()=>{r(!1),setTimeout(e,320)},s=()=>{var l;(l=t.shelter)!=null&&l.url&&window.open(t.shelter.url,"_blank","noopener,noreferrer")},o=t.score>=80?"#4CAF78":t.score>=60?"#FF6B35":"#94a3b8";return d.jsx(d.Fragment,{children:d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center",style:{zIndex:200},onClick:i,children:d.jsxs("div",{className:`w-full max-w-[430px] bg-white rounded-t-[32px] overflow-hidden transition-all duration-320 ${n?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,style:{maxHeight:"94vh",overflowY:"auto",transition:"transform 0.32s cubic-bezier(0.32,0.72,0,1), opacity 0.32s ease"},onClick:l=>l.stopPropagation(),children:[d.jsx("div",{className:"flex justify-center pt-3 pb-1",children:d.jsx("div",{className:"w-10 h-1 bg-gray-200 rounded-full"})}),d.jsxs("div",{className:"relative mx-4 mt-2 rounded-2xl overflow-hidden",style:{height:230},children:[d.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover",onError:l=>{l.target.onerror=null,t.species==="cat"?l.target.src="https://placekitten.com/500/400":t.species==="rabbit"?l.target.src="https://picsum.photos/seed/rabbit/500/400":l.target.src=`https://placedog.net/500/400?id=${t.id}`}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),d.jsxs("div",{className:"absolute bottom-3 left-3 flex items-center gap-1.5 bg-amber-500 text-white px-3 py-1.5 rounded-full shadow",children:[d.jsx("span",{className:"text-xs",children:""}),d.jsxs("span",{className:"text-xs font-extrabold",children:[t.daysInShelter," days waiting"]})]}),d.jsx("div",{className:"absolute bottom-3 right-3 text-2xl drop-shadow-lg",children:t.species==="dog"?"":t.species==="cat"?"":""})]}),d.jsxs("div",{className:"px-5 pt-4 pb-8",children:[d.jsxs("div",{className:"flex items-start justify-between gap-3 mb-3",children:[d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 leading-tight",children:t.name}),d.jsxs("p",{className:"text-gray-500 text-sm font-semibold",children:[t.breed,"  ",t.age," ",t.age===1?"year":"years"," old"]})]}),t.score!==void 0&&d.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-16 h-16 rounded-full border-[3px] shadow",style:{borderColor:o,backgroundColor:`${o}18`},children:d.jsxs("span",{className:"font-bold text-sm",style:{color:o},children:[t.score,"%"]})})]}),d.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[d.jsx("span",{className:"bg-orange-50 border border-orange-200 text-[#FF6B35] px-3 py-1 rounded-full text-xs font-bold",children:t.personalityTag}),t.hdbApproved!==void 0&&d.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-bold ${t.hdbApproved?"bg-green-50 border border-green-200 text-green-700":"bg-gray-100 border border-gray-200 text-gray-500"}`,children:t.hdbApproved?" HDB Approved":"Private Housing Only"}),t.specialNeeds&&d.jsx("span",{className:"bg-purple-50 border border-purple-200 text-purple-700 px-3 py-1 rounded-full text-xs font-bold",children:" Special Care"})]}),d.jsx("div",{className:"mb-4",children:d.jsx(GN,{level:t.energyLevel})}),d.jsxs("div",{className:"bg-gray-50 rounded-2xl px-4 py-3 mb-4 flex items-center gap-3",children:[d.jsx("div",{className:"text-2xl",children:""}),d.jsxs("div",{children:[d.jsx("p",{className:"text-xs text-gray-400 font-bold uppercase tracking-wider",children:"Personality type"}),d.jsx("p",{className:"font-display font-bold text-gray-900 text-base",children:t.mbtiType})]})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-2",children:["About ",t.name]}),d.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.bio})]}),t.shelter&&d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4 border border-gray-100",children:[d.jsxs("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-3",children:["Ready to meet ",t.name,"?"]}),d.jsxs("button",{onClick:s,className:"w-full py-3.5 rounded-xl font-bold text-sm bg-[#4CAF78] text-white shadow hover:bg-green-600 active:scale-95 transition-all duration-200 mb-2.5",children:["Contact ",t.shelter.name," "]}),d.jsxs("p",{className:"text-xs text-gray-400 text-center leading-snug",children:[" ",t.shelter.address]}),t.shelter.email&&!t.shelter.email.startsWith("Contact")&&d.jsxs("a",{href:`mailto:${t.shelter.email}`,className:"block text-center text-xs text-[#FF6B35] font-semibold mt-1.5 hover:underline",children:[" ",t.shelter.email]}),t.daysInShelter>90&&d.jsxs("p",{className:"text-xs text-amber-600 font-bold text-center mt-2 leading-snug",children:[" ",t.name," has been waiting ",t.daysInShelter," days. Please reach out today."]})]}),d.jsx("button",{onClick:i,className:"w-full py-3.5 rounded-2xl font-bold text-sm border-2 border-gray-200 text-gray-500 hover:bg-gray-50 active:scale-95 transition-all duration-200",children:"Close"})]})]})})})}const _y=["Singapore Specials are mixed-breed dogs rescued from our local streets and kampungs. They're resilient, street-smart, and deeply loyal.","Singapore Specials are NOT HDB-approved, so they need private housing. But they make up for it with unconditional love and adaptability.","Studies show mixed-breed dogs often have fewer genetic health issues than purebreds  Singapore Specials tend to live long, healthy lives.","Many Singapore Specials were saved by volunteers who trap, neuter, and rehome them. Adopting one directly supports this vital community work."];function QN({swipeCount:t,onDismiss:e}){const n=_y[(Math.floor(t/5)-1)%_y.length];return d.jsx("div",{className:"absolute inset-0 z-20",children:d.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-[#2d7a4f] to-[#4CAF78] rounded-[28px] overflow-hidden shadow-[0_8px_40px_rgba(0,0,0,0.2)] flex flex-col",children:[d.jsxs("div",{className:"relative flex-1 flex flex-col items-center justify-center px-7 text-center",children:[d.jsx("div",{className:"text-7xl mb-4",children:""}),d.jsx("div",{className:"bg-white/20 rounded-full px-4 py-1.5 mb-4",children:d.jsx("span",{className:"text-white text-xs font-extrabold uppercase tracking-widest",children:"Did you know?"})}),d.jsx("h2",{className:"font-display text-2xl font-bold text-white leading-snug mb-4",children:"About Singapore Specials"}),d.jsx("p",{className:"text-white/90 text-sm leading-relaxed font-medium",children:n})]}),d.jsxs("div",{className:"px-6 pb-8 flex flex-col gap-3",children:[d.jsx("button",{onClick:e,className:"w-full py-4 rounded-2xl font-bold text-base bg-white text-[#2d7a4f] shadow-lg hover:bg-green-50 active:scale-95 transition-all duration-200",children:"Got it! Keep swiping "}),d.jsx("p",{className:"text-white/70 text-xs text-center font-semibold",children:"Singapore Specials need private housing (not HDB)"})]})]})})}function YN({animals:t,onSwipeRight:e,onSwipeLeft:n}){const[r,i]=$.useState(0),[s,o]=$.useState(0),[l,u]=$.useState(!1),[h,p]=$.useState(null),m=$.useRef(null),y=t.slice(r,r+3),S=y.length>0,b=(L,E)=>{L==="right"?e(E):n(E);const w=s+1;o(w),i(A=>A+1),w%5===0&&u(!0)},P=L=>{m.current&&S&&!l&&m.current.triggerSwipe(L)};return!S&&!l?d.jsxs("div",{className:"flex flex-col h-full items-center justify-center px-8 text-center",children:[d.jsx("div",{className:"text-7xl mb-5",children:""}),d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-800 mb-3",children:"You've seen everyone!"}),d.jsx("p",{className:"text-gray-400 text-sm leading-relaxed max-w-xs",children:"You've reviewed all the animals in our shelter. Check your matches tab to revisit the ones you liked, or retake the quiz for a fresh start."}),d.jsxs("div",{className:"flex gap-2 mt-6 text-3xl",children:[d.jsx("span",{children:""}),d.jsx("span",{children:""}),d.jsx("span",{children:""})]})]}):d.jsxs("div",{className:"flex flex-col h-full px-4 pb-4",children:[d.jsxs("div",{className:"relative flex-1 mb-4",children:[[...y].reverse().map((L,E)=>{const w=y.length-1-E,A=w===0;return d.jsx(KN,{ref:A?m:null,animal:L,isTop:A&&!l,behindIndex:w,onSwipe:R=>b(R,L),onTap:A&&!l?()=>p(L):void 0},L.id)}),l&&d.jsx(QN,{swipeCount:s,onDismiss:()=>u(!1)})]}),d.jsxs("div",{className:"flex items-center justify-center gap-6 pt-1 pb-2",children:[d.jsx("button",{onClick:()=>P("left"),disabled:l,className:"w-16 h-16 rounded-full bg-white shadow-lg border-2 border-gray-100 flex items-center justify-center text-2xl transition-all duration-200 hover:scale-110 hover:shadow-xl active:scale-95 disabled:opacity-40","aria-label":"Pass",children:""}),d.jsx("button",{onClick:()=>P("right"),disabled:l,className:"w-20 h-20 rounded-full flex items-center justify-center text-3xl transition-all duration-200 hover:scale-110 active:scale-95 shadow-xl disabled:opacity-40",style:{background:"linear-gradient(135deg, #FF6B35, #ff8c5a)"},"aria-label":"Like",children:""}),d.jsx("button",{onClick:()=>P("left"),disabled:l,className:"w-16 h-16 rounded-full bg-white shadow-lg border-2 border-gray-100 flex items-center justify-center text-xl transition-all duration-200 hover:scale-110 hover:shadow-xl active:scale-95 disabled:opacity-40","aria-label":"Skip",children:""})]}),d.jsx("p",{className:"text-center text-[11px] text-gray-400 font-semibold pb-1",children:"Tap card for details  Swipe right to adopt  Swipe left to pass"}),h&&d.jsx(sT,{animal:h,onClose:()=>p(null)})]})}function JN(t){return t==="dog"?"":t==="cat"?"":t==="rabbit"?"":""}function XN({likedAnimals:t,onViewDiscover:e}){const[n,r]=$.useState(null);return t.length===0?d.jsxs("div",{className:"flex flex-col h-full items-center justify-center px-8 text-center",children:[d.jsx("div",{className:"text-6xl mb-4",children:""}),d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-800 mb-2",children:"No matches yet"}),d.jsx("p",{className:"text-gray-400 text-sm leading-relaxed mb-6 max-w-xs",children:"Start swiping to find animals you connect with. Your liked profiles will appear here."}),d.jsx("button",{onClick:e,className:"bg-[#FF6B35] text-white px-8 py-3.5 rounded-2xl font-bold shadow-lg hover:bg-orange-600 active:scale-95 transition-all duration-200",children:" Start Discovering"})]}):d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"h-full flex flex-col",children:[d.jsxs("div",{className:"px-5 pt-2 pb-3",children:[d.jsxs("p",{className:"text-gray-400 text-sm font-semibold",children:[t.length," ",t.length===1?"animal":"animals"," you loved "]}),d.jsx("p",{className:"text-gray-400 text-xs mt-0.5",children:"Tap a card to see full details"})]}),d.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4 space-y-3",children:t.map((i,s)=>d.jsx(ZN,{animal:i,index:s,onTap:()=>r(i)},i.id))})]}),n&&d.jsx(sT,{animal:n,onClose:()=>r(null)})]})}function ZN({animal:t,index:e,onTap:n}){var s;const r=t.score>=80?"#4CAF78":t.score>=60?"#FF6B35":"#94a3b8",i=o=>{var l;o.stopPropagation(),(l=t.shelter)!=null&&l.url&&window.open(t.shelter.url,"_blank","noopener,noreferrer")};return d.jsxs("div",{className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden animate-slide-up-fade active:scale-[0.98] transition-transform duration-150 cursor-pointer",style:{animationDelay:`${e*.06}s`,opacity:0},onClick:n,children:[d.jsxs("div",{className:"flex",children:[d.jsxs("div",{className:"relative flex-shrink-0 w-24",children:[d.jsx("img",{src:t.photo,alt:t.name,className:"w-24 h-full object-cover",style:{minHeight:110},onError:o=>{o.target.onerror=null,t.species==="cat"?o.target.src="https://placekitten.com/200/200":t.species==="rabbit"?o.target.src="https://picsum.photos/seed/rabbit/200/200":o.target.src=`https://placedog.net/200/200?id=${t.id}`}}),d.jsx("div",{className:"absolute top-2 left-2 text-sm drop-shadow",children:JN(t.species)})]}),d.jsxs("div",{className:"flex-1 p-3.5 flex flex-col justify-between min-w-0",children:[d.jsxs("div",{children:[d.jsxs("div",{className:"flex items-start justify-between gap-2",children:[d.jsxs("div",{className:"min-w-0",children:[d.jsx("h3",{className:"font-display font-bold text-gray-900 text-base leading-tight truncate",children:t.name}),d.jsxs("p",{className:"text-gray-500 text-xs truncate",children:[t.breed,"  ",t.age,"yr"]})]}),d.jsx("div",{className:"flex-shrink-0 flex items-center justify-center w-12 h-12 rounded-full border-2 shadow-sm",style:{borderColor:r,backgroundColor:`${r}18`},children:d.jsxs("span",{className:"font-bold text-xs",style:{color:r},children:[t.score,"%"]})})]}),d.jsxs("div",{className:"flex flex-wrap items-center gap-1.5 mt-1.5",children:[d.jsx("p",{className:"text-xs text-gray-500 leading-snug line-clamp-1 flex-shrink-0",children:t.personalityTag}),t.hdbApproved!==void 0&&d.jsx("span",{className:`text-[9px] font-bold px-1.5 py-0.5 rounded-full flex-shrink-0 ${t.hdbApproved?"bg-green-50 text-green-700":"bg-gray-100 text-gray-500"}`,children:t.hdbApproved?" HDB":"Private"})]})]}),d.jsxs("div",{className:"flex items-center justify-between mt-2 gap-2",children:[d.jsxs("span",{className:"text-[10px] text-amber-600 font-bold bg-amber-50 px-2 py-0.5 rounded-full flex-shrink-0",children:[" ",t.daysInShelter,"d"]}),d.jsxs("button",{onClick:i,className:"bg-[#4CAF78] text-white text-xs font-bold px-3 py-1.5 rounded-full shadow hover:bg-green-600 active:scale-95 transition-all duration-200 truncate",children:["Contact ",((s=t.shelter)==null?void 0:s.name)??"Shelter"]})]})]})]}),t.shelter&&d.jsxs("div",{className:"px-4 pb-3 pt-0 border-t border-gray-50 mt-1",children:[d.jsxs("p",{className:"text-[11px] text-gray-400 truncate",children:[" ",t.shelter.address]}),t.shelter.email&&!t.shelter.email.startsWith("Contact")&&d.jsxs("a",{href:`mailto:${t.shelter.email}`,className:"text-[11px] text-[#FF6B35] font-semibold hover:underline",onClick:o=>o.stopPropagation(),children:[" ",t.shelter.email]}),t.shelter.email&&t.shelter.email.startsWith("Contact")&&d.jsx("p",{className:"text-[11px] text-gray-400",children:t.shelter.email})]}),d.jsx("div",{className:"flex justify-end px-4 pb-2",children:d.jsx("span",{className:"text-[10px] text-gray-300 font-semibold",children:"Tap for details "})})]})}function Xh(t,e){var l;if(!t||!e)return 0;let n=0;if(t.mbti&&e.mbtiType){const u=t.mbti,h=e.mbtiType;u[0]===h[0]&&(n+=12.5),u[1]===h[1]&&(n+=12.5),u[2]===h[2]&&(n+=12.5),u[3]===h[3]&&(n+=12.5)}const i={very_active:5,moderately_active:3,homebody:1}[t.activityLevel]??3,s=Math.abs(i-e.energyLevel);return n+=Math.max(0,25-s*6.25),n+=((l={first_timer:{beginner:15,intermediate:5,experienced:0},some_experience:{beginner:10,intermediate:15,experienced:5},very_experienced:{beginner:8,intermediate:12,experienced:15}}[t.experience])==null?void 0:l[e.experienceLevelNeeded])??0,(e.age>=7||e.specialNeeds)&&n>60&&(n+=10),Math.min(100,Math.round(n))}function e2(t,e){return[...t].sort((n,r)=>Xh(e,r)-Xh(e,n))}function t2(t,e){const n=[];if(t.mbti&&e.mbtiType){const o=t.mbti,l=e.mbtiType;o[0]===l[0]&&n.push(o[0]==="E"?"You both recharge in similar ways  social energy and shared adventures":"You both recharge in similar ways  quiet evenings and meaningful one-on-one time"),o[1]===l[1]&&n.push(o[1]==="S"?"You share the same approach to the world  grounded in routine and the present moment":"You share the same approach to the world  curious, adaptable, and always exploring"),o[2]===l[2]&&n.push(o[2]==="T"?"Your bonding style aligns  built on trust and respect rather than constant reassurance":"Your bonding style aligns  deep emotional attunement and loyalty"),o[3]===l[3]&&n.push(o[3]==="J"?"Your lifestyle fits  you both thrive with structure and predictability":"Your lifestyle fits  you both love spontaneity and going wherever the day takes you")}if(n.length<3){const l={very_active:5,moderately_active:3,homebody:1}[t.activityLevel]??3;if(Math.abs(l-e.energyLevel)<=1){const u={1:"relaxed",2:"gentle",3:"balanced",4:"active",5:"high-energy"};n.push(`Your ${u[l]??"balanced"} lifestyle is a perfect fit for ${e.name}'s energy level`)}}n.length<3&&(t.experience==="first_timer"&&e.experienceLevelNeeded==="beginner"||t.experience==="some_experience"&&e.experienceLevelNeeded==="intermediate"||t.experience==="very_experienced"&&e.experienceLevelNeeded==="experienced")&&n.push(`${e.name}'s care needs align perfectly with your experience level`);const r=[`${e.name}'s personality complements yours in a meaningful way`,`You have the lifestyle that ${e.name} needs to truly thrive`,`${e.name} has been waiting for someone just like you`];let i=0;for(;n.length<3&&i<r.length;)n.push(r[i++]);const s=e.daysInShelter>90||e.specialNeeds?`${e.name} has been waiting ${e.daysInShelter} days. You might be exactly who they've been hoping for.`:null;return{bullets:n.slice(0,3),waitingNote:s}}function n2(t){return{INTJ:"The Architect",INTP:"The Logician",ENTJ:"The Commander",ENTP:"The Debater",INFJ:"The Advocate",INFP:"The Mediator",ENFJ:"The Protagonist",ENFP:"The Campaigner",ISTJ:"The Logistician",ISFJ:"The Defender",ESTJ:"The Executive",ESFJ:"The Consul",ISTP:"The Virtuoso",ISFP:"The Adventurer",ESTP:"The Entrepreneur",ESFP:"The Entertainer"}[t]??"The Unique One"}const r2={very_active:{label:"Very Active",emoji:"",color:"#FF6B35"},moderately_active:{label:"Moderately Active",emoji:"",color:"#4CAF78"},homebody:{label:"Homebody",emoji:"",color:"#94a3b8"}},i2={hdb:{label:"HDB Flat",emoji:""},condo:{label:"Private Condo",emoji:""},landed:{label:"Landed Property",emoji:""},house_yard:{label:"House with Yard",emoji:""},apartment:{label:"Apartment",emoji:""},house_no_yard:{label:"Large Home, No Yard",emoji:""}},s2={"1_2_hrs":{label:"12 hours / day",emoji:""},"3_4_hrs":{label:"34 hours / day",emoji:""},"5_plus_hrs":{label:"5+ hours / day",emoji:""}},o2={first_timer:{label:"First-time Owner",emoji:"",color:"#94a3b8"},some_experience:{label:"Some Experience",emoji:"",color:"#4CAF78"},very_experienced:{label:"Very Experienced",emoji:"",color:"#FF6B35"}};function a2({userProfile:t,onRetakeQuiz:e}){var S;const{logout:n,currentUser:r}=bu(),i=n2(t.mbti),s=(r==null?void 0:r.displayName)||"",o=(r==null?void 0:r.email)||"",l=s?s[0].toUpperCase():((S=o[0])==null?void 0:S.toUpperCase())??"?",u=r2[t.activityLevel]??{label:t.activityLevel,emoji:"",color:"#94a3b8"},h=i2[t.livingSpace]??{label:t.livingSpace,emoji:""},p=s2[t.timeAvailable]??{label:t.timeAvailable,emoji:""},m=o2[t.experience]??{label:t.experience,emoji:"",color:"#94a3b8"},y={E:"#FF6B35",I:"#94a3b8",N:"#4CAF78",S:"#f59e0b",T:"#3b82f6",F:"#ec4899",J:"#8b5cf6",P:"#14b8a6"};return d.jsxs("div",{className:"h-full overflow-y-auto px-5 pb-6",children:[d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-6 mb-4 text-center animate-fade-scale-in",children:[d.jsx("div",{className:"w-16 h-16 rounded-full bg-[#FF6B35] flex items-center justify-center text-white text-2xl font-black shadow-md mx-auto mb-3",children:l}),s&&d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 mb-0.5",children:s}),d.jsx("p",{className:"text-sm text-gray-400 font-semibold mb-1",children:o}),d.jsx("p",{className:"text-gray-400 text-xs mb-1",children:"Your personality type shapes your ideal pet match"}),d.jsx("div",{className:"inline-flex items-center gap-2 bg-orange-50 border border-orange-200 px-5 py-2.5 rounded-full mt-2 mb-3",children:d.jsx("span",{className:"font-display font-bold text-2xl text-[#FF6B35] tracking-widest",children:t.mbti})}),d.jsx("p",{className:"font-display text-lg font-semibold text-gray-700 mb-1",children:i}),d.jsx("div",{className:"flex justify-center gap-3 mt-4",children:t.mbti.split("").map((b,P)=>d.jsxs("div",{className:"flex flex-col items-center gap-1",children:[d.jsx("div",{className:"w-11 h-11 rounded-xl flex items-center justify-center font-black text-white text-lg shadow",style:{backgroundColor:y[b]??"#94a3b8"},children:b}),d.jsx("span",{className:"text-[9px] font-bold text-gray-400 uppercase tracking-wider",children:["E/I","S/N","T/F","J/P"][P]})]},P))})]}),d.jsxs("div",{className:"bg-white rounded-3xl shadow-sm border border-gray-100 p-5 mb-4 animate-slide-up-fade",children:[d.jsx("h3",{className:"font-display font-bold text-lg text-gray-800 mb-4",children:"Lifestyle Summary"}),d.jsxs("div",{className:"space-y-3",children:[d.jsx(Pa,{emoji:u.emoji,label:"Activity Level",value:u.label,color:u.color}),d.jsx(Pa,{emoji:h.emoji,label:"Living Space",value:h.label}),d.jsx(Pa,{emoji:p.emoji,label:"Daily Time",value:p.label}),d.jsx(Pa,{emoji:m.emoji,label:"Experience",value:m.label,color:m.color})]})]}),d.jsxs("div",{className:"bg-[#FFF8F0] rounded-3xl border border-orange-100 p-5 mb-5 animate-slide-up-fade",children:[d.jsx("h3",{className:"font-display font-bold text-base text-gray-800 mb-3",children:" Best matches for you"}),d.jsxs("p",{className:"text-sm text-gray-600 leading-relaxed",children:["Based on your ",d.jsx("strong",{children:t.mbti})," type and"," ",d.jsx("strong",{children:u.label.toLowerCase()})," lifestyle, you'll do best with animals that share your ",t.mbti[0]==="E"?"social, energetic nature":"love of quiet, deep connection"," and"," ",t.mbti[3]==="J"?" appreciate structure and routine":" enjoy spontaneity and flexibility","."]})]}),d.jsx("button",{onClick:e,className:"w-full py-4 rounded-2xl font-bold text-[#FF6B35] border-2 border-[#FF6B35] bg-white hover:bg-orange-50 active:scale-95 transition-all duration-200 shadow-sm",children:" Retake Quiz"}),d.jsx("p",{className:"text-center text-xs text-gray-400 mt-2 mb-4",children:"This will reset your matches and profile"}),d.jsx("button",{onClick:n,className:"w-full py-4 rounded-2xl font-bold text-gray-500 border-2 border-gray-200 bg-white hover:bg-gray-50 active:scale-95 transition-all duration-200 shadow-sm",children:" Log out"})]})}function Pa({emoji:t,label:e,value:n,color:r}){return d.jsxs("div",{className:"flex items-center gap-3",children:[d.jsx("div",{className:"w-9 h-9 bg-gray-50 rounded-xl flex items-center justify-center text-lg flex-shrink-0",children:t}),d.jsxs("div",{className:"flex-1 min-w-0",children:[d.jsx("p",{className:"text-xs text-gray-400 font-semibold",children:e}),d.jsx("p",{className:"text-sm font-bold truncate",style:{color:r??"#374151"},children:n})]})]})}function l2({activeTab:t,onTabChange:e}){const n=[{id:"discover",icon:"",label:"Discover"},{id:"matches",icon:"",label:"My Matches"},{id:"profile",icon:"",label:"My Profile"},{id:"guide",icon:"",label:"Guide"}];return d.jsx("nav",{className:"bg-white border-t border-gray-100 shadow-[0_-4px_16px_rgba(0,0,0,0.06)] safe-area-bottom",children:d.jsx("div",{className:"flex",children:n.map(r=>{const i=t===r.id;return d.jsxs("button",{onClick:()=>e(r.id),className:`flex-1 flex flex-col items-center justify-center py-3 gap-0.5 transition-all duration-200 ${i?"text-[#FF6B35]":"text-gray-400 hover:text-gray-600"}`,children:[d.jsx("span",{className:`text-xl transition-transform duration-200 ${i?"scale-110":"scale-100"}`,children:r.icon}),d.jsx("span",{className:`text-[10px] font-bold tracking-wide ${i?"text-[#FF6B35]":"text-gray-400"}`,children:r.label}),i&&d.jsx("div",{className:"w-1 h-1 rounded-full bg-[#FF6B35] mt-0.5"})]},r.id)})})})}const u2=[{id:"singapore-special",name:"Singapore Special",category:"featured",hdbApproved:!1,notHdbReason:"Singapore Specials are mixed-breed dogs of varying sizes  many exceed HDB's approved breed weight and height limits. They are not on the AVS approved list. They need private housing such as a condo or landed property, but make incredibly loyal and resilient companions.",photo:"https://images.unsplash.com/photo-1587300003388-59208cc962cb?w=400&h=400&fit=crop",temperament:["Loyal","Street-smart","Resilient","Affectionate","Adaptable"],energyLevel:3,trainability:4,groomingNeeds:1,heatTolerance:5,firstTimeFriendly:!1,idealOwner:["Experienced owners","Active individuals","Private housing residents"],lifespan:"1215 years",weightKg:"Varies (525 kg)",healthIssues:["Generally very hardy","Occasional skin conditions","Tick fever risk (if stray history)"],summary:"Singapore Specials are the resilient mixed-breeds of our streets  descendants of the Spitz-like Canis lepus that have roamed Singapore for centuries. Street life has bred toughness, intelligence, and heat tolerance into their DNA. Rescue a Singapore Special from SOSD or ASD and you gain a deeply loyal companion who has already proven they can survive anything.",suitabilityTags:["Native heat tolerance","Low grooming","Long lifespan","Unique character","Rescue from local shelters"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"shih-tzu",name:"Shih Tzu",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/10/ShihTzu.jpg/480px-ShihTzu.jpg",temperament:["Affectionate","Loyal","Playful","Gentle"],energyLevel:2,trainability:3,groomingNeeds:5,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Seniors","Families","First-time owners","Work-from-home"],lifespan:"1016 years",weightKg:"47 kg",healthIssues:["Eye discharge","Respiratory issues (flat face)","Dental crowding","Hip dysplasia"],summary:"Bred as Chinese royalty companions, Shih Tzus are perfectly sized for HDB living. They need daily grooming and prefer air-conditioned spaces due to their flat faces  Singapore's humidity can cause breathing difficulty outdoors. One of the most popular choices for Singapore apartment dwellers.",suitabilityTags:["HDB-ideal","Low exercise needs","Great with kids","Needs A/C","Professional grooming recommended"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"maltese",name:"Maltese",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2c/Maltese_600.jpg/480px-Maltese_600.jpg",temperament:["Gentle","Affectionate","Fearless","Playful"],energyLevel:2,trainability:3,groomingNeeds:5,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Seniors","Singles","Families without young children"],lifespan:"1215 years",weightKg:"24 kg",healthIssues:["Dental issues","Tear staining","Luxating patella","Hypoglycaemia (in puppies)"],summary:"The Maltese is a classic apartment dog  tiny, elegant, and deeply devoted. Their white coat is high-maintenance but they shed very little, making them great for allergy-prone households. In Singapore's heat they prefer indoor life with occasional short walks in the cooler morning hours.",suitabilityTags:["HDB-ideal","Low shedding","Great for allergy sufferers","Minimal exercise needs"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"pomeranian",name:"Pomeranian",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/04/Spitz_adult_black.jpg/480px-Spitz_adult_black.jpg",temperament:["Bold","Lively","Friendly","Curious"],energyLevel:3,trainability:3,groomingNeeds:4,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Families","Seniors","Active individuals"],lifespan:"1216 years",weightKg:"1.53.5 kg",healthIssues:["Collapsed trachea","Dental issues","Alopecia (coat loss)","Patellar luxation"],summary:"Pomeranians are spunky little dogs with the personality of a much larger breed. Their thick double coat requires regular brushing and they need to stay cool  Singapore's heat can be hard on them. Daily exercise and mental stimulation keep their bold personalities happy in an HDB flat.",suitabilityTags:["HDB-ideal","Alert watchdog","Needs regular grooming","Keep indoors during midday heat"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"yorkshire-terrier",name:"Yorkshire Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/b1/YorkshireTerrier_tpvoa.jpg/480px-YorkshireTerrier_tpvoa.jpg",temperament:["Feisty","Affectionate","Bold","Intelligent"],energyLevel:3,trainability:3,groomingNeeds:4,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Singles","Couples","Families with older children"],lifespan:"1115 years",weightKg:"23.5 kg",healthIssues:["Collapsed trachea","Patellar luxation","Dental overcrowding","Hypoglycaemia"],summary:"Yorkshire Terriers pack a giant personality into a tiny frame  they were originally ratting dogs and still have that tenacious terrier spirit. Yorkies handle Singapore's climate reasonably well and adapt to HDB life provided they get daily walks and plenty of mental stimulation.",suitabilityTags:["HDB-ideal","Low shedding","Good watchdog","Moderate heat tolerance"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"poodle-toy",name:"Poodle (Toy)",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f8/Full_attention_%288067543690%29.jpg/480px-Full_attention_%288067543690%29.jpg",temperament:["Intelligent","Eager to please","Friendly","Active"],energyLevel:3,trainability:5,groomingNeeds:5,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["First-time owners","Families","Seniors","Allergy sufferers"],lifespan:"1018 years",weightKg:"24 kg",healthIssues:["Progressive retinal atrophy","Patellar luxation","Epilepsy","Addison's disease"],summary:"Toy Poodles are widely considered one of the most intelligent dog breeds in the world  they learn commands faster than almost any other breed. Their curly, non-shedding coat makes them excellent for allergy sufferers. They thrive in HDB flats and enjoy mental challenges as much as physical exercise.",suitabilityTags:["HDB-ideal","Hypoallergenic","Highly trainable","Great for first-timers","Long lifespan"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"poodle-miniature",name:"Poodle (Miniature)",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://placedog.net/400/400?id=120",temperament:["Intelligent","Active","Eager to please","Instinctual"],energyLevel:3,trainability:5,groomingNeeds:5,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Active families","First-time owners","Allergy sufferers"],lifespan:"1018 years",weightKg:"59 kg",healthIssues:["Progressive retinal atrophy","Patellar luxation","Hip dysplasia"],summary:"Slightly larger than the Toy Poodle but equally brilliant. Miniature Poodles excel at obedience, agility, and tricks  they need mental stimulation as much as walks. Their non-shedding coat and hypoallergenic properties make them enormously popular in Singapore's compact living spaces.",suitabilityTags:["HDB-ideal","Hypoallergenic","Highly trainable","Agility star"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"cavalier-king-charles-spaniel",name:"Cavalier King Charles Spaniel",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/71/Cavalier_King_Charles_Spaniel_blenheim_2.jpg/480px-Cavalier_King_Charles_Spaniel_blenheim_2.jpg",temperament:["Gentle","Sociable","Patient","Affectionate"],energyLevel:2,trainability:3,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Families","Seniors","First-time owners","Multi-pet households"],lifespan:"914 years",weightKg:"58 kg",healthIssues:["Heart conditions (MVD)","Syringomyelia","Hip dysplasia","Eye problems"],summary:"Cavaliers are among the most gentle and sociable dogs in the world  they rarely show aggression and get along with children, cats, and other dogs. Their flat faces mean Singapore's heat requires careful management. Always buy or adopt from health-tested parents due to their hereditary heart conditions.",suitabilityTags:["HDB-ideal","Excellent family dog","Good with cats","Needs A/C","Vet check important"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"pug",name:"Pug",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/f/f0/Mops_oct09_cropped2.jpg/480px-Mops_oct09_cropped2.jpg",temperament:["Charming","Mischievous","Loving","Sociable"],energyLevel:2,trainability:2,groomingNeeds:2,heatTolerance:1,firstTimeFriendly:!0,idealOwner:["Families","Seniors","First-time owners (with A/C commitment)"],lifespan:"1315 years",weightKg:"68 kg",healthIssues:["Breathing difficulties (BOAS)","Eye ulcers","Skin fold infections","Obesity"],summary:"Pugs are lovable comedians but Singapore's heat is a serious risk for them. Their flat faces (brachycephalic) cause significant breathing restriction  they can overheat and collapse in our humidity. Pugs need full-time air-conditioning, extremely short outdoor walks, and a committed owner who understands their health limitations.",suitabilityTags:["HDB-ideal","Full-time A/C required","No outdoor midday walks","High vet commitment","Low exercise tolerance"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"chihuahua",name:"Chihuahua",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/40/Chihuahua1_bvdb.jpg/480px-Chihuahua1_bvdb.jpg",temperament:["Bold","Loyal","Alert","Spirited"],energyLevel:2,trainability:2,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Singles","Couples","Experienced small-dog owners"],lifespan:"1220 years",weightKg:"1.53 kg",healthIssues:["Patellar luxation","Heart issues","Hypoglycaemia","Dental disease"],summary:"The world's smallest dog breed handles Singapore's heat surprisingly well thanks to their desert-bred origins. Chihuahuas are fiercely loyal to their person but can be snappy with strangers and children  they need early, consistent socialisation. Their tiny size makes them ideal for the smallest HDB flat.",suitabilityTags:["HDB-ideal","Handles heat well","Very low exercise needs","One-person dog","Long lifespan"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"miniature-schnauzer",name:"Miniature Schnauzer",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d3/Zwergschnauzer_3x.jpg/480px-Zwergschnauzer_3x.jpg",temperament:["Intelligent","Energetic","Friendly","Obedient"],energyLevel:3,trainability:4,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Active families","First-time owners","Those wanting a trainable dog"],lifespan:"1215 years",weightKg:"59 kg",healthIssues:["Pancreatitis","Bladder stones","Eye problems","Skin conditions"],summary:"Miniature Schnauzers are alert, friendly, and highly trainable  one of the best all-around HDB dogs. They have low shedding and adapt well to Singapore's climate. Their double coat needs professional trimming every 68 weeks but they don't require intense grooming at home.",suitabilityTags:["HDB-ideal","Low shedding","Highly trainable","Good watchdog","Moderate heat tolerance"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"jack-russell-terrier",name:"Jack Russell Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/JRT_roxy.jpg/480px-JRT_roxy.jpg",temperament:["Energetic","Alert","Stubborn","Clever","Fearless"],energyLevel:4,trainability:3,groomingNeeds:1,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active individuals","Experienced dog owners","Those with outdoor access"],lifespan:"1316 years",weightKg:"68 kg",healthIssues:["Patellar luxation","Eye disease (lens luxation)","Deafness (in white-coated dogs)"],summary:"Jack Russells are high-energy hunting terriers in a small package. They need significantly more exercise than their size suggests  a bored Jack Russell in an HDB flat will redecorate your home. Best suited for active owners who can commit to 60+ minutes of exercise daily and consistent training.",suitabilityTags:["HDB-approved (but high exercise needs)","High mental stimulation required","Not for first-timers","Needs structured training"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"dachshund",name:"Dachshund",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/27/Short-haired-Dachshund.jpg/480px-Short-haired-Dachshund.jpg",temperament:["Curious","Friendly","Stubborn","Playful","Brave"],energyLevel:2,trainability:2,groomingNeeds:1,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Patient owners","Families","Those living without stairs"],lifespan:"1216 years",weightKg:"45 kg (miniature)",healthIssues:["Intervertebral disc disease (IVDD  avoid stairs)","Obesity","Dental disease"],summary:"Dachshunds are charming, curious dogs but their long spines make Singapore's multi-storey HDB blocks a risk  repeated stair climbing can cause IVDD. Keep ramps available and maintain a healthy weight. Their stubbornness makes training challenging but their affectionate nature wins you over completely.",suitabilityTags:["HDB-ideal (avoid stairs)","Moderate heat tolerance","Strong scenting instinct","Avoid obesity"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"bichon-frise",name:"Bichon Frise",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Bichon_frise_bij_giethoorn.jpg/480px-Bichon_frise_bij_giethoorn.jpg",temperament:["Cheerful","Gentle","Playful","Affectionate"],energyLevel:2,trainability:3,groomingNeeds:5,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Families","Allergy sufferers","Seniors","First-time owners"],lifespan:"1215 years",weightKg:"510 kg",healthIssues:["Allergies","Bladder stones","Ear infections","Cataracts"],summary:"The Bichon Frise is a perpetually cheerful companion  they rarely bark excessively and get along with everyone, including cats and children. Their white, curly coat is hypoallergenic but requires professional grooming every 46 weeks. One of the safest choices for first-time dog owners in Singapore.",suitabilityTags:["HDB-ideal","Hypoallergenic","Gentle with children","Great first-time dog","Regular grooming required"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"lhasa-apso",name:"Lhasa Apso",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/ec/Lhasa_Apso_600.jpg/480px-Lhasa_Apso_600.jpg",temperament:["Independent","Assertive","Loyal","Alert"],energyLevel:2,trainability:2,groomingNeeds:5,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Patient owners","Experienced small-dog owners","Quieter households"],lifespan:"1215 years",weightKg:"58 kg",healthIssues:["Eye problems (keratoconjunctivitis sicca)","Kidney disease","Skin infections under coat"],summary:"Originally bred as Tibetan monastery watchdogs, Lhasa Apsos are independent and opinionated  they are not people-pleasers by nature. Their magnificent long coat needs significant daily attention. They handle Singapore's indoor environment well but can be territorial with strangers, requiring early socialisation.",suitabilityTags:["HDB-ideal","Independent nature","High grooming commitment","Good watchdog","Early socialisation essential"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"papillon",name:"Papillon",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a0/A_Papillon_Dog.jpg/480px-A_Papillon_Dog.jpg",temperament:["Alert","Friendly","Energetic","Intelligent"],energyLevel:3,trainability:5,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Those who want an agility or trick dog","Experienced small-dog owners"],lifespan:"1315 years",weightKg:"35 kg",healthIssues:["Patellar luxation","Dental issues","Progressive retinal atrophy"],summary:"Named for their butterfly-shaped ears, Papillons are the most athletic and intelligent of all the toy breeds. They excel at agility and learn new tricks in minutes. Singapore's climate suits them reasonably well  their single, fine coat doesn't trap heat like double-coated breeds.",suitabilityTags:["HDB-ideal","Agility star","Highly trainable","Moderate heat tolerance","Single coat (heat-friendly)"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"miniature-pinscher",name:"Miniature Pinscher",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e8/Miniature_pinscher.jpg/480px-Miniature_pinscher.jpg",temperament:["Fearless","Energetic","Independent","Proud"],energyLevel:3,trainability:2,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Experienced owners","Active individuals","Those comfortable with strong-willed dogs"],lifespan:"1216 years",weightKg:"45 kg",healthIssues:["Patellar luxation","Legg-Perthes disease","Progressive retinal atrophy"],summary:`The Min Pin is often called the "King of Toys"  and they act the part. These spirited, fearless dogs handle Singapore's heat well due to their short coats and lean build, but they require an owner who can match their strong will. Not recommended for first-time owners.`,suitabilityTags:["HDB-ideal","Handles heat well","Minimal grooming","Strong-willed","Experienced owners only"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"havanese",name:"Havanese",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/26/Havanese_TAN.jpg/480px-Havanese_TAN.jpg",temperament:["Sociable","Gentle","Playful","Intelligent"],energyLevel:2,trainability:4,groomingNeeds:4,heatTolerance:4,firstTimeFriendly:!0,idealOwner:["Families","Seniors","Work-from-home owners","Multi-pet households"],lifespan:"1416 years",weightKg:"36 kg",healthIssues:["Luxating patella","Hip dysplasia","Eye conditions","Chondrodysplasia"],summary:"Cuba's national dog, the Havanese, is surprisingly heat-tolerant for a long-coated breed. Their silky coat insulates against heat (as well as cold), and their Caribbean heritage gives them good tropical adaptability. They are velcro dogs  they follow their owners everywhere and do poorly left alone for long hours.",suitabilityTags:["HDB-ideal","Better heat tolerance than most small breeds","Velcro dog","Good for work-from-home","Long lifespan"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"japanese-spitz",name:"Japanese Spitz",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a9/JapaneseSpitz.jpg/480px-JapaneseSpitz.jpg",temperament:["Playful","Obedient","Loyal","Affectionate"],energyLevel:2,trainability:3,groomingNeeds:4,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Families","First-time owners","Those who want a loyal companion"],lifespan:"1016 years",weightKg:"510 kg",healthIssues:["Patellar luxation","Tear staining","Allergies"],summary:"Japanese Spitz are popular in Singapore for their striking white coats and gentle temperament. Their thick double coat means they struggle with Singapore's heat and should live in air-conditioned environments. Regular brushing prevents matting  despite appearances, they shed less than expected.",suitabilityTags:["HDB-ideal","Gentle family dog","Needs A/C","Regular brushing required","Good with children"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"pekingese",name:"Pekingese",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/ba/Pekingese_2_club_allenamento.jpg/480px-Pekingese_2_club_allenamento.jpg",temperament:["Dignified","Stubborn","Loyal","Opinionated"],energyLevel:1,trainability:2,groomingNeeds:4,heatTolerance:1,firstTimeFriendly:!1,idealOwner:["Experienced owners","Quieter households","Seniors without young children"],lifespan:"1215 years",weightKg:"36 kg",healthIssues:["Breathing difficulties (BOAS)","Eye prolapse","Skin fold infections","Spinal problems"],summary:"Ancient Chinese imperial dogs, Pekingese are regal and utterly self-assured  they will not be told what to do. Their flat faces make them extremely heat-sensitive, and Singapore's climate requires full-time air-conditioning. Best suited for experienced owners who appreciate an independent, dignified companion.",suitabilityTags:["HDB-ideal","Full-time A/C required","Very low exercise needs","Independent nature","Experienced owners only"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"maltipoo",name:"Maltipoo (Maltese  Poodle)",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://placedog.net/400/400?id=131",temperament:["Affectionate","Gentle","Playful","Clever"],energyLevel:2,trainability:4,groomingNeeds:4,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Families","Allergy sufferers","First-time owners","Seniors"],lifespan:"1015 years",weightKg:"26 kg",healthIssues:["White shaker syndrome","Patellar luxation","Eye problems"],summary:"The Maltipoo combines the Maltese's gentle nature with the Poodle's intelligence and hypoallergenic coat. They are popular in Singapore for being low-shedding, easy to train, and adaptable to small spaces. Note: as a crossbreed, health and temperament can vary  always source from a responsible breeder.",suitabilityTags:["HDB-ideal","Hypoallergenic","Highly trainable","Great for first-timers","Crossbreed variability"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"west-highland-white-terrier",name:"West Highland White Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5d/Westies_2.jpg/480px-Westies_2.jpg",temperament:["Hardy","Friendly","Alert","Self-confident"],energyLevel:3,trainability:3,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active families","Experienced terrier owners"],lifespan:"1216 years",weightKg:"610 kg",healthIssues:["Skin conditions (Westie lung disease)","Patellar luxation","Addison's disease"],summary:"Westies are plucky, confident terriers who carry themselves as if they own every room. They are generally fine in Singapore's climate and their white, double coat manages heat reasonably. Their terrier independence means training requires consistency  they respond to positive reinforcement, not harsh methods.",suitabilityTags:["HDB-ideal","Moderate heat tolerance","Strong terrier personality","Consistent training needed"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"scottish-terrier",name:"Scottish Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/ScotchTerrier1.jpg/480px-ScotchTerrier1.jpg",temperament:["Independent","Loyal","Alert","Determined"],energyLevel:2,trainability:2,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Experienced owners","Those who want a dignified, independent dog"],lifespan:"1113 years",weightKg:"810 kg",healthIssues:["Scottie cramp","Von Willebrand's disease","Bladder cancer (above average risk)"],summary:"Scotties are dignified, fiercely independent dogs with a dry sense of humour. They form strong bonds with their family but are reserved with strangers. Their double coat needs professional stripping or regular trimming. They adapt well to HDB life but require daily walks and consistent, patient training.",suitabilityTags:["HDB-ideal","Moderate heat tolerance","Strong-willed","Experienced owners recommended"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"border-terrier",name:"Border Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/53/Border_Terrier_3.jpg/480px-Border_Terrier_3.jpg",temperament:["Affectionate","Alert","Energetic","Obedient"],energyLevel:3,trainability:4,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active families","Outdoor enthusiasts","Experienced terrier owners"],lifespan:"1215 years",weightKg:"57 kg",healthIssues:["Hip dysplasia","Heart defects","Progressive retinal atrophy"],summary:"Border Terriers are among the most trainable of the terrier group  they were bred to work closely with farmers and respond well to commands. Their wiry coat needs stripping twice a year. They need more outdoor time than most HDB dogs, making early morning park visits essential in Singapore's heat.",suitabilityTags:["HDB-approved (active lifestyle required)","More trainable than most terriers","Low grooming","Needs daily park time"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"italian-greyhound",name:"Italian Greyhound",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/56/Italian_Greyhound_nb.jpg/480px-Italian_Greyhound_nb.jpg",temperament:["Sensitive","Affectionate","Agile","Athletic"],energyLevel:3,trainability:2,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Gentle, experienced owners","Those comfortable with fragile, sensitive dogs"],lifespan:"1315 years",weightKg:"35 kg",healthIssues:["Bone fractures (very fragile legs)","Dental disease","Epilepsy","Hypothyroidism"],summary:"Italian Greyhounds are sleek, elegant sighthounds who handle Singapore's heat extremely well  they love basking in warmth. However, their fragile leg bones break easily (avoid rough play or jumping from height), and their thin skin means they get cold in heavily air-conditioned rooms. Best for calm, gentle households.",suitabilityTags:["HDB-ideal","Loves the heat","Minimal grooming","Very fragile bones  careful handling","Sensitive temperament"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"cairn-terrier",name:"Cairn Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0b/Cairn-Terrier-Tsavo.jpg/480px-Cairn-Terrier-Tsavo.jpg",temperament:["Curious","Loyal","Merry","Hardy"],energyLevel:3,trainability:3,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active families","Experienced terrier owners"],lifespan:"1215 years",weightKg:"68 kg",healthIssues:["Allergies (skin)","Patellar luxation","Ocular melanosis"],summary:"Made famous as Toto in The Wizard of Oz, Cairn Terriers are hardy, curious dogs who enjoy digging and chasing. Their weather-resistant double coat is low-maintenance. They adapt to HDB life but need mental stimulation to prevent destructive behaviour  puzzle toys and daily walks are essential.",suitabilityTags:["HDB-ideal","Moderate heat tolerance","Low grooming","Needs mental stimulation","Terrier personality"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"norwich-terrier",name:"Norwich Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/55/Norwich_terrier_agility.jpg/480px-Norwich_terrier_agility.jpg",temperament:["Fearless","Loyal","Affectionate","Lively"],energyLevel:3,trainability:3,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced terrier owners"],lifespan:"1215 years",weightKg:"45.5 kg",healthIssues:["Breathing issues (can occur)","Luxating patella","Epilepsy"],summary:"One of the smallest terriers, Norwich Terriers are fearless and full of personality. They love people and rarely show aggression to strangers  unusual for a terrier. Their wiry coat needs hand-stripping twice a year. Great for active HDB owners who can commit to regular outdoor exercise.",suitabilityTags:["HDB-ideal","Friendly with strangers (unusual for terriers)","Moderate heat tolerance","Low grooming"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"norfolk-terrier",name:"Norfolk Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a6/Norfolk_terrier_2.jpg/480px-Norfolk_terrier_2.jpg",temperament:["Confident","Fearless","Lovable","Spirited"],energyLevel:3,trainability:3,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced terrier owners"],lifespan:"1215 years",weightKg:"56 kg",healthIssues:["Mitral valve disease","Upper airway syndrome","Luxating patella"],summary:"The Norfolk Terrier is almost identical to the Norwich Terrier  the key difference is that Norfolk Terriers have drop ears. Equally spirited and lovable, they make wonderful companions for active owners. Their small size suits HDB living but their terrier energy needs a daily outlet.",suitabilityTags:["HDB-ideal","Moderate heat tolerance","Low grooming","Similar to Norwich Terrier"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"affenpinscher",name:"Affenpinscher",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/5/5f/Affenpinscher_2009.jpg/480px-Affenpinscher_2009.jpg",temperament:["Confident","Loyal","Curious","Amusing"],energyLevel:2,trainability:2,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Experienced small-dog owners","Those wanting an entertaining companion"],lifespan:"1215 years",weightKg:"34 kg",healthIssues:["Breathing issues (BOAS)","Hip dysplasia","Patellar luxation","Collapsed trachea"],summary:`Called the "monkey terrier" for their expressive flat face, Affenpinschers are comically self-assured. Their flat face makes Singapore's heat a concern  they need air-conditioned environments and short outdoor excursions. Bold and tenacious, they suit experienced owners who appreciate an opinionated small dog.`,suitabilityTags:["HDB-ideal","Needs A/C","Entertainment value","Experienced owners recommended"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"chinese-crested",name:"Chinese Crested Dog",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/38/Chinese_Crested_Dog_0001.jpg/480px-Chinese_Crested_Dog_0001.jpg",temperament:["Alert","Affectionate","Agile","Devoted"],energyLevel:2,trainability:3,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!0,idealOwner:["Singles","Seniors","Those wanting a unique, low-grooming dog"],lifespan:"1315 years",weightKg:"26 kg",healthIssues:["Sunburn (hairless variety)","Dental disease","Eye problems","Patellar luxation"],summary:"Chinese Crested Dogs come in two varieties: hairless and powderpuff. The hairless variety handles Singapore's heat remarkably well but needs sunscreen for outdoor time. They are one of the most unique-looking dogs you'll see, and their devoted, gentle nature makes them wonderful companions in a small HDB flat.",suitabilityTags:["HDB-ideal","Handles heat well (with sun protection)","Minimal grooming (hairless)","Unique appearance"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"coton-de-tulear",name:"Coton de Tular",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/28/Coton_de_Tulear_600.jpg/480px-Coton_de_Tulear_600.jpg",temperament:["Happy","Sociable","Gentle","Vocal"],energyLevel:2,trainability:3,groomingNeeds:4,heatTolerance:4,firstTimeFriendly:!0,idealOwner:["Families","Seniors","Social households","First-time owners"],lifespan:"1416 years",weightKg:"46 kg",healthIssues:["Hip dysplasia","Progressive retinal atrophy","Luxating patella"],summary:"From Madagascar, the Coton de Tular is accustomed to tropical climates  one of the few small breeds that genuinely handles Singapore's heat well. Their cotton-like white coat is surprisingly heat-resistant and low-shedding. A perpetually happy dog that suits almost any Singapore household.",suitabilityTags:["HDB-ideal","Better heat tolerance than most","Low shedding","Excellent temperament","Long lifespan"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"bolognese",name:"Bolognese",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://placedog.net/400/400?id=145",temperament:["Devoted","Reserved","Gentle","Loyal"],energyLevel:1,trainability:3,groomingNeeds:4,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Seniors","Homebodies","Quiet households"],lifespan:"1214 years",weightKg:"2.54 kg",healthIssues:["Patellar luxation","Hip dysplasia"],summary:"The Bolognese is a rare breed even by toy dog standards  loyal and devoted to one or two people, they prefer calm, consistent environments. They rarely bark excessively and have very low exercise needs. Their fluffy white coat requires regular maintenance but they do not shed much.",suitabilityTags:["HDB-ideal","Very low exercise needs","Rare breed","Quiet and calm","Good for seniors"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"schipperke",name:"Schipperke",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/2/2e/Schipperke_Geel.jpg/480px-Schipperke_Geel.jpg",temperament:["Curious","Mischievous","Fearless","Lively"],energyLevel:3,trainability:3,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced owners comfortable with high energy"],lifespan:"1216 years",weightKg:"39 kg",healthIssues:["MPS IIIB (genetic storage disease)","Hypothyroidism","Epilepsy"],summary:"Belgian barge dogs with boundless energy and a mischievous streak  Schipperkes are curious about everything and will investigate every corner of your flat. They shed seasonally but are low-maintenance otherwise. They need active owners who can channel their intelligence into structured activities.",suitabilityTags:["HDB-approved (high energy for size)","Low grooming","Curious and clever","Needs mental stimulation"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"king-charles-spaniel",name:"King Charles Spaniel",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/19/E_King_Charles_Spaniel1.jpg/480px-E_King_Charles_Spaniel1.jpg",temperament:["Reserved","Gentle","Quiet","Patient"],energyLevel:1,trainability:2,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Seniors","Quiet households","Those preferring a very calm companion"],lifespan:"1012 years",weightKg:"3.66.3 kg",healthIssues:["Heart disease (MVD)","Syringomyelia","Eye problems"],summary:"Not to be confused with the Cavalier King Charles Spaniel, the King Charles Spaniel (English Toy Spaniel) is a quieter, more reserved companion. They are gentle and undemanding  content to sit on your lap for hours. Their flat face requires careful heat management in Singapore's climate.",suitabilityTags:["HDB-ideal","Extremely calm","Minimal exercise needs","Needs A/C","Best for quiet households"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"australian-silky-terrier",name:"Australian Silky Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/63/Australian_Silky_Terrier.jpg/480px-Australian_Silky_Terrier.jpg",temperament:["Friendly","Alert","Quick","Responsive"],energyLevel:3,trainability:3,groomingNeeds:4,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Active families","First-time owners willing to groom regularly"],lifespan:"1215 years",weightKg:"3.54.5 kg",healthIssues:["Patellar luxation","Tracheal collapse","Diabetes"],summary:"Developed in Australia, the Silky Terrier combines the toughness of a working terrier with the refinement of a toy companion. Their long, silky coat needs daily brushing. They adapt well to Singapore's climate and are more trainable than many terrier breeds  a good choice for active first-time owners.",suitabilityTags:["HDB-ideal","Moderate heat tolerance","Daily grooming required","More trainable than most terriers"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"boston-terrier",name:"Boston Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/0/0e/Boston_Terrier.jpg/480px-Boston_Terrier.jpg",temperament:["Friendly","Bright","Amusing","Gentle"],energyLevel:2,trainability:3,groomingNeeds:1,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Families","First-time owners","City dwellers"],lifespan:"1113 years",weightKg:"4.511 kg",healthIssues:["Breathing difficulties (BOAS)","Eye injuries (prominent eyes)","Deafness","Patellar luxation"],summary:`Called the "American Gentleman" for their tuxedo markings, Boston Terriers are friendly and adaptable apartment dogs. However, their short faces make Singapore's heat a serious concern  they need air-conditioned environments and limited outdoor time during peak heat hours. One of the more sociable flat-faced breeds.`,suitabilityTags:["HDB-ideal","Needs A/C","Minimal grooming","Friendly with strangers","Good with children"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"lowchen",name:"Lwchen (Little Lion Dog)",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://placedog.net/400/400?id=151",temperament:["Friendly","Cheerful","Positive","Active"],energyLevel:2,trainability:3,groomingNeeds:4,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Families","Seniors","Those wanting a rare companion breed"],lifespan:"1315 years",weightKg:"48 kg",healthIssues:["Patellar luxation","Progressive retinal atrophy"],summary:"One of the rarest dog breeds in the world, the Lwchen was nearly extinct in the 1970s. Their traditional lion clip (long coat on the front, clipped short on the rear) makes them unmistakable. They are cheerful, adaptable, and low-shedding  a wonderful and unusual companion for Singapore flats.",suitabilityTags:["HDB-ideal","Rare breed","Low shedding","Cheerful temperament","Low exercise needs"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"german-spitz",name:"German Spitz",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e6/German_Spitz_Mittel_Kath.jpg/480px-German_Spitz_Mittel_Kath.jpg",temperament:["Devoted","Lively","Alert","Loyal"],energyLevel:3,trainability:3,groomingNeeds:4,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Experienced small-dog owners","Active households"],lifespan:"1315 years",weightKg:"711 kg",healthIssues:["Patellar luxation","Progressive retinal atrophy","Epilepsy"],summary:"The German Spitz is the ancestor of many modern spitz-type dogs including the Pomeranian. Their thick double coat insulates them but makes Singapore's heat challenging  they need regular brushing and cool indoor environments. Alert and vocal, they make excellent apartment watchdogs.",suitabilityTags:["HDB-approved","Needs A/C","Good watchdog","Heavy shedder seasonally","Experienced owners recommended"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"lakeland-terrier",name:"Lakeland Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/72/Lakeand_terrier_kamil.jpg/480px-Lakeand_terrier_kamil.jpg",temperament:["Confident","Friendly","Bold","Inquisitive"],energyLevel:3,trainability:3,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced terrier owners"],lifespan:"1215 years",weightKg:"78 kg",healthIssues:["Patellar luxation","Lens luxation","Legg-Perthes disease"],summary:"Lakeland Terriers are cheerful, confident dogs from England's Lake District  bred to work in rugged terrain. In Singapore, they adapt to flat life but need consistent daily exercise. Their wiry coat is weather-resistant and requires hand-stripping or clipping twice yearly. Generally good with families.",suitabilityTags:["HDB-approved","Moderate heat tolerance","Moderate grooming","Needs daily exercise"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"wire-fox-terrier",name:"Wire Fox Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/db/Wire_Fox_Terrier_portrait.jpg/480px-Wire_Fox_Terrier_portrait.jpg",temperament:["Alert","Lively","Playful","Independent"],energyLevel:4,trainability:3,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Very active owners","Experienced terrier owners with outdoor access"],lifespan:"1215 years",weightKg:"79 kg",healthIssues:["Shoulder dislocation","Myasthenia gravis","Lens luxation"],summary:"Wire Fox Terriers are high-octane terriers with seemingly endless energy  they were bred to bolt foxes from burrows and still carry that intensity. They need significantly more exercise than most HDB-approved dogs. Only suited for very active owners who can provide 60+ minutes of vigorous daily exercise.",suitabilityTags:["HDB-approved (very high exercise needs)","High energy for size","Needs experienced owners","Moderate heat tolerance"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"smooth-fox-terrier",name:"Smooth Fox Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6e/Smooth_fox_terrier.jpg/480px-Smooth_fox_terrier.jpg",temperament:["Alert","Playful","Inquisitive","Brave"],energyLevel:4,trainability:3,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Very active owners","Experienced terrier owners"],lifespan:"1215 years",weightKg:"79 kg",healthIssues:["Lens luxation","Deafness","Patellar luxation"],summary:"The Smooth Fox Terrier is the short-coated cousin of the Wire Fox Terrier  equally energetic but with minimal grooming needs. Their short coat handles Singapore's heat better. Still very high-energy and terrier-spirited, they are best for experienced owners who can provide vigorous daily exercise.",suitabilityTags:["HDB-approved (very high exercise needs)","Handles heat better than Wire Fox","Minimal grooming","Experienced owners only"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"manchester-terrier",name:"Manchester Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/65/ManchesterTerrier1.jpg/480px-ManchesterTerrier1.jpg",temperament:["Alert","Spirited","Loyal","Agile"],energyLevel:3,trainability:3,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced small-dog owners"],lifespan:"1416 years",weightKg:"510 kg",healthIssues:["Von Willebrand's disease","Progressive retinal atrophy","Patellar luxation"],summary:"Manchester Terriers are sleek, athletic ratters with a whippet-like build. Their short, shiny coat handles Singapore's heat very well. They are agile and fast  one of the more athletic of the HDB-approved terriers. Minimal grooming requirements make them practical for busy Singapore owners.",suitabilityTags:["HDB-ideal","Handles heat well","Minimal grooming","Athletic and agile","Long lifespan"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"skye-terrier",name:"Skye Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/4/42/Skye-Terrier-Jockeln.jpg/480px-Skye-Terrier-Jockeln.jpg",temperament:["Loyal","Reserved","Canny","Dignified"],energyLevel:2,trainability:2,groomingNeeds:5,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Patient, experienced owners","Quieter households"],lifespan:"1214 years",weightKg:"1618 kg",healthIssues:["Orthopedic issues (premature bone ossification in puppies)","Skye limp"],summary:"One of Scotland's most historic terriers, made famous by Greyfriars Bobby. Skye Terriers are deeply loyal to their family but reserved with strangers. Their long, flowing coat is high-maintenance and traps Singapore's heat  regular grooming and cool environments are essential. A rare and distinctive choice.",suitabilityTags:["HDB-approved","High grooming commitment","Needs A/C","One-family dog","Rare breed"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"sealyham-terrier",name:"Sealyham Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c6/Sealyham_Terrier_600.jpg/480px-Sealyham_Terrier_600.jpg",temperament:["Calm","Alert","Outgoing","Funny"],energyLevel:2,trainability:2,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Experienced terrier owners","Those wanting a calmer terrier"],lifespan:"1214 years",weightKg:"89 kg",healthIssues:["Eye problems (PPM, PRA)","Skin problems","Deafness"],summary:"One of the calmest and most easygoing of all the terrier breeds, the Sealyham Terrier is now rare. They are adaptable and handle flat life better than most terriers. Their distinctive white coat needs regular professional grooming. A good choice for those who want a terrier without the extreme terrier energy.",suitabilityTags:["HDB-ideal","Calmer than most terriers","Moderate heat tolerance","Professional grooming required","Rare breed"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"dandie-dinmont-terrier",name:"Dandie Dinmont Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/7/74/Dandie_Dinmont_Terrier_portrait.jpg/480px-Dandie_Dinmont_Terrier_portrait.jpg",temperament:["Independent","Dignified","Reserved","Affectionate"],energyLevel:2,trainability:2,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Experienced terrier owners","Quieter households"],lifespan:"1113 years",weightKg:"811 kg",healthIssues:["Intervertebral disc disease (long spine)","Glaucoma","Cushing's disease"],summary:"The Dandie Dinmont has a distinctive topknot and long, low body  one of the most unique-looking terriers. They are gentler and more reserved than most terriers, preferring calm environments. Their long spine requires the same care as Dachshunds  avoid stairs and maintain healthy weight.",suitabilityTags:["HDB-approved","Calmer than most terriers","Avoid stairs (long spine)","Moderate heat tolerance","Rare breed"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"griffon-bruxellois",name:"Griffon Bruxellois",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/8/83/Griffon_bruxellois_pup.jpg/480px-Griffon_bruxellois_pup.jpg",temperament:["Curious","Loyal","Alert","Sensitive"],energyLevel:2,trainability:2,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Experienced small-dog owners","Quieter households","Patient owners"],lifespan:"1215 years",weightKg:"36 kg",healthIssues:["Breathing difficulties (flat face)","Eye problems (prominent eyes)","Patellar luxation"],summary:"With a near-human expression, Griffon Bruxellois are curious and deeply devoted to their owners. Their flat faces require careful heat management in Singapore. They come in rough (wiry) and smooth coats. Sensitive and slightly stubborn  best for patient, experienced owners who enjoy bonding deeply with their dog.",suitabilityTags:["HDB-ideal","Needs A/C","Deep human-dog bond","Experienced owners recommended","Unique expression"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"welsh-terrier",name:"Welsh Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/c/c4/Welsh_Terrier_600.jpg/480px-Welsh_Terrier_600.jpg",temperament:["Alert","Friendly","Spirited","Intelligent"],energyLevel:3,trainability:3,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active families","Experienced terrier owners"],lifespan:"1215 years",weightKg:"910 kg",healthIssues:["Glaucoma","Lens luxation","Skin allergies"],summary:"Welsh Terriers are one of the more even-tempered terrier breeds  less high-strung than Wire Fox Terriers and more sociable than Scottish Terriers. They adapt to HDB life provided they get daily walks. Their wiry coat needs professional stripping or clipping twice a year.",suitabilityTags:["HDB-approved","More even-tempered than most terriers","Moderate heat tolerance","Active lifestyle required"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"toy-fox-terrier",name:"Toy Fox Terrier",category:"hdb",hdbApproved:!0,notHdbReason:null,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/e/e5/Toy_fox_terrier_2.jpg/480px-Toy_fox_terrier_2.jpg",temperament:["Alert","Intelligent","Friendly","Spirited"],energyLevel:3,trainability:4,groomingNeeds:1,heatTolerance:4,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced small-dog owners"],lifespan:"1314 years",weightKg:"1.53.5 kg",healthIssues:["Patellar luxation","Von Willebrand's disease","Legg-Perthes"],summary:"The Toy Fox Terrier combines the agility of a full-sized Fox Terrier in a tiny body. Their short coat handles Singapore's heat well. They are surprisingly trainable for a terrier and enjoy performing tricks. Active owners who want a spirited, low-maintenance small dog will find a great match.",suitabilityTags:["HDB-ideal","Handles heat well","Minimal grooming","More trainable than most terriers"],shelterSearchUrl:"https://spca.org.sg/services/adoption"},{id:"golden-retriever",name:"Golden Retriever",category:"non-hdb",hdbApproved:!1,notHdbReason:"Golden Retrievers exceed HDB's approved breed size and weight limits  they typically weigh 2534 kg and need substantial space to move and exercise. Their high energy also requires a garden or frequent access to large parks, which HDB living cannot reliably provide.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/b/bd/Golden_Retriever_Dukedestiny01_drvd.jpg/480px-Golden_Retriever_Dukedestiny01_drvd.jpg",temperament:["Friendly","Reliable","Trustworthy","Kind"],energyLevel:4,trainability:5,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!0,idealOwner:["Active families","First-time owners (with space)","Condo/landed residents"],lifespan:"1012 years",weightKg:"2534 kg",healthIssues:["Hip/elbow dysplasia","Cancer (above average rate)","Heart conditions","Eye problems"],summary:"One of the world's most beloved dogs, Golden Retrievers are gentle giants who need private housing in Singapore. Their thick coats struggle with our heat  they need frequent cool baths and air-conditioning. Goldens are exceptionally trainable and wonderful with children, but require significant daily exercise and grooming.",suitabilityTags:["Condo or landed only","Struggles in Singapore heat","Excellent family dog","High exercise commitment","High grooming needs"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"labrador-retriever",name:"Labrador Retriever",category:"non-hdb",hdbApproved:!1,notHdbReason:"Labradors are large dogs (2536 kg) far exceeding HDB's size limits. They are highly active and need space to run daily  confined to a small flat, they develop destructive behaviours and obesity. They require a condo or landed property with easy access to parks.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Labrador_on_Quantock_%282175262184%29.jpg/480px-Labrador_on_Quantock_%282175262184%29.jpg",temperament:["Friendly","Outgoing","Active","Gentle"],energyLevel:4,trainability:5,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!0,idealOwner:["Active families","Condo/landed residents","First-time large-dog owners"],lifespan:"1012 years",weightKg:"2536 kg",healthIssues:["Hip/elbow dysplasia","Obesity","Exercise-induced collapse","Eye conditions"],summary:"The world's most popular dog breed for good reason  Labradors are friendly, trainable, and endlessly good-natured. They handle Singapore's heat moderately well thanks to their shorter coat but need consistent exercise to prevent obesity. Singapore police and guide dog programmes rely heavily on Labradors.",suitabilityTags:["Condo or landed only","Moderate heat tolerance","Best family dog","Obesity risk without exercise","Used in SAF/police service"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"german-shepherd",name:"German Shepherd",category:"non-hdb",hdbApproved:!1,notHdbReason:"German Shepherds are large working dogs (2240 kg) that require significant space and structured daily exercise. They are also not on the AVS HDB-approved list as their size, strength, and working-dog temperament are considered unsuitable for high-density housing.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/d/d0/German_Shepherd_-_DSC_0346_%2810096362833%29.jpg/480px-German_Shepherd_-_DSC_0346_%2810096362833%29.jpg",temperament:["Loyal","Confident","Courageous","Intelligent"],energyLevel:4,trainability:5,groomingNeeds:3,heatTolerance:2,firstTimeFriendly:!1,idealOwner:["Experienced owners","Active households","Landed property residents"],lifespan:"913 years",weightKg:"2240 kg",healthIssues:["Hip/elbow dysplasia","Degenerative myelopathy","Bloat","Skin conditions"],summary:"One of the world's premier working dogs, German Shepherds thrive with a job to do. Singapore's heat is a significant challenge for their thick double coat. They require experienced owners, regular professional training, and considerable space. Used extensively by Singapore Police Force and the SAF.",suitabilityTags:["Landed property recommended","Struggles in Singapore heat","Requires experienced owner","High mental stimulation needed","SAF/SPF working dog"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"siberian-husky",name:"Siberian Husky",category:"non-hdb",hdbApproved:!1,notHdbReason:"Siberian Huskies are large dogs (1627 kg) that exceed HDB limits. More critically, their thick Arctic double coat makes Singapore's heat extremely dangerous for them  they are prone to heatstroke even on cool Singapore evenings. They also have very high exercise requirements incompatible with flat living.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/a/a3/Husky_portrait.jpg/480px-Husky_portrait.jpg",temperament:["Outgoing","Mischievous","Loyal","Energetic"],energyLevel:5,trainability:3,groomingNeeds:4,heatTolerance:1,firstTimeFriendly:!1,idealOwner:["Very experienced owners only","Fully air-conditioned landed property","Those who understand Arctic breed needs"],lifespan:"1215 years",weightKg:"1627 kg",healthIssues:["Hip dysplasia","Eye conditions (cataracts, PRA)","Hypothyroidism","Skin issues from heat"],summary:"Huskies are Arctic sled dogs in one of the world's hottest, most humid cities  a deeply mismatched combination. Their double coat cannot be shaved (it protects from heat AND cold). In Singapore, keeping a Husky requires full-time air-conditioning and veterinary bills from chronic heat management. Animal welfare advocates strongly caution against Huskies in Singapore.",suitabilityTags:["Strongly not recommended for Singapore","Dangerous heat risk","Full-time A/C essential","Very high exercise needs","Landed property only"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"beagle",name:"Beagle",category:"non-hdb",hdbApproved:!1,notHdbReason:`Beagles exceed HDB's size and breed restrictions (they weigh 911 kg but are not on the approved list). Their powerful scenting instinct leads to escape attempts and destructive digging in confined spaces. Their distinctive "bay" bark is extremely loud and would disturb neighbours in HDB blocks.`,photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/6/6b/000_Beagle_Mindestma%C3%9Fe.jpg/480px-000_Beagle_Mindestma%C3%9Fe.jpg",temperament:["Merry","Curious","Friendly","Determined"],energyLevel:4,trainability:2,groomingNeeds:2,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active owners","Experienced owners","Condo with outdoor space"],lifespan:"1215 years",weightKg:"911 kg",healthIssues:["Obesity","Hip dysplasia","Epilepsy","Hypothyroidism"],summary:"Beagles are lovable, merry scent hounds but notoriously difficult to recall off-leash  their nose takes over completely. Their loud baying bark is a serious concern in Singapore's dense housing. They handle our climate moderately well but need significant exercise and mental stimulation. Best with experienced owners in condo or landed housing.",suitabilityTags:["Condo or landed only","Loud bay bark (neighbour concern)","Nose-driven  difficult recall","Moderate heat tolerance","High escape risk"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"samoyed",name:"Samoyed",category:"non-hdb",hdbApproved:!1,notHdbReason:"Samoyeds are large dogs (1630 kg) with an extremely thick Arctic double coat unsuited to Singapore's climate. Their size exceeds HDB limits, and their high exercise needs and tendency to bark make them poorly suited to apartment living of any kind in Singapore.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/3/34/Samoyed_%284726430566%29.jpg/480px-Samoyed_%284726430566%29.jpg",temperament:["Friendly","Gentle","Loyal","Adaptable"],energyLevel:4,trainability:3,groomingNeeds:5,heatTolerance:1,firstTimeFriendly:!1,idealOwner:["Experienced owners","Fully air-conditioned landed property","Those aware of extreme heat risk"],lifespan:"1214 years",weightKg:"1630 kg",healthIssues:["Hip dysplasia","Diabetes mellitus","Progressive retinal atrophy","Samoyed hereditary glomerulopathy"],summary:`Known as the "smiling Sammie," Samoyeds are gorgeous but profoundly ill-suited to Singapore's climate. Their white Arctic coat traps heat dangerously  they are at high risk of heatstroke year-round here. If you love Samoyeds, please reconsider in Singapore's context  your dog's welfare may be severely compromised.`,suitabilityTags:["Strongly not recommended for Singapore","Extreme heat risk","Very high grooming needs","Full-time A/C essential","Landed property only"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"corgi",name:"Corgi (Pembroke Welsh)",category:"non-hdb",hdbApproved:!1,notHdbReason:"Pembroke Welsh Corgis exceed HDB's weight limits (1014 kg) and are not on the AVS approved list. Their herding instinct makes them want to chase and nip, requiring substantial outdoor space to manage. They also bark frequently  a consideration in HDB blocks.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/9/9b/Pembroke_Welsh_Corgi_600.jpg/480px-Pembroke_Welsh_Corgi_600.jpg",temperament:["Affectionate","Bold","Tenacious","Playful"],energyLevel:4,trainability:4,groomingNeeds:3,heatTolerance:3,firstTimeFriendly:!1,idealOwner:["Active families","Experienced owners","Condo/landed residents with outdoor access"],lifespan:"1215 years",weightKg:"1014 kg",healthIssues:["Hip dysplasia","Degenerative myelopathy","Progressive retinal atrophy","Obesity"],summary:"The Queen's favourite  Corgis are affectionate, intelligent herding dogs with surprisingly high energy. They handle Singapore's climate moderately well given their medium-length coat. Their herding instinct means they may nip at heels and bark at movement. Best for active owners in condo or landed housing with regular park access.",suitabilityTags:["Condo or landed only","Moderate heat tolerance","High exercise needs","Herding instinct (nipping)","Frequent barking"],shelterSearchUrl:"https://sosd.org.sg/adopt/"},{id:"french-bulldog",name:"French Bulldog",category:"non-hdb",hdbApproved:!1,notHdbReason:"French Bulldogs are not on the AVS approved HDB breed list. More critically, their severely flat faces (brachycephalic) cause chronic breathing difficulties that are dangerously exacerbated by Singapore's heat and humidity  they are one of the breeds most at risk of heatstroke in tropical climates.",photo:"https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/Dog_Breeds_-_French_Bulldog.jpg/480px-Dog_Breeds_-_French_Bulldog.jpg",temperament:["Playful","Adaptable","Smart","Loyal"],energyLevel:2,trainability:3,groomingNeeds:1,heatTolerance:1,firstTimeFriendly:!1,idealOwner:["Fully air-conditioned homes only","Experienced brachycephalic breed owners","Those aware of very high vet costs"],lifespan:"1012 years",weightKg:"814 kg",healthIssues:["Severe breathing difficulties (BOAS)","Heatstroke","Spinal issues (IVDD)","Skin fold infections","Eye prolapse"],summary:"French Bulldogs are charming and low-exercise dogs but Singapore's climate is genuinely dangerous for them. Many French Bulldog owners in Singapore report emergency vet visits from heat exhaustion. They require full-time air-conditioning, no outdoor time in midday heat, and owners who can commit to very high vet bills. Animal welfare advocates are calling for breeding restrictions on brachycephalic breeds.",suitabilityTags:["Strongly not recommended for Singapore","Extreme heat danger","Very high vet costs","Full-time A/C essential","Condo or landed only"],shelterSearchUrl:"https://sosd.org.sg/adopt/"}];function Ra({icon:t,label:e,level:n,colorClass:r,labelLow:i,labelHigh:s}){const o=n<=2?i:n>=4?s:"Moderate";return d.jsxs("div",{className:"flex items-center gap-3 mb-3 last:mb-0",children:[d.jsx("span",{className:"text-lg w-7 flex-shrink-0",children:t}),d.jsxs("div",{className:"flex-1",children:[d.jsxs("div",{className:"flex justify-between mb-1",children:[d.jsx("span",{className:"text-xs font-bold text-gray-700",children:e}),d.jsx("span",{className:"text-xs text-gray-400",children:o})]}),d.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(l=>d.jsx("div",{className:`h-2 rounded-full flex-1 ${l<=n?r:"bg-gray-200"}`},l))})]})]})}function c2({level:t}){return d.jsx("div",{className:"flex items-center gap-0.5",children:[1,2,3,4,5].map(e=>d.jsx("span",{className:`text-sm ${e<=t?"opacity-100":"opacity-20"}`,children:""},e))})}function h2({breed:t,onClose:e}){const[n,r]=$.useState(!1);$.useEffect(()=>{const o=setTimeout(()=>r(!0),30);return()=>clearTimeout(o)},[]);const i=()=>{r(!1),setTimeout(e,320)},s=()=>{window.open(t.shelterSearchUrl,"_blank","noopener,noreferrer")};return d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center",style:{zIndex:200},onClick:i,children:d.jsxs("div",{className:`w-full max-w-[430px] bg-white rounded-t-[32px] overflow-hidden transition-all duration-320 ${n?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,style:{maxHeight:"94vh",overflowY:"auto",transition:"transform 0.32s cubic-bezier(0.32,0.72,0,1), opacity 0.32s ease"},onClick:o=>o.stopPropagation(),children:[d.jsx("div",{className:"flex justify-center pt-3 pb-1",children:d.jsx("div",{className:"w-10 h-1 bg-gray-200 rounded-full"})}),d.jsxs("div",{className:"relative mx-4 mt-2 rounded-2xl overflow-hidden",style:{height:200},children:[d.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover",onError:o=>{o.target.onerror=null,o.target.src=`https://placedog.net/400/400?id=${t.id.length*17}`}}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent"}),d.jsx("div",{className:`absolute bottom-3 left-3 px-3 py-1.5 rounded-full shadow flex items-center gap-1.5 ${t.hdbApproved?"bg-green-500 text-white":"bg-gray-600 text-white"}`,children:d.jsx("span",{className:"text-xs font-extrabold",children:t.hdbApproved?" HDB Approved":"Private Housing Only"})}),d.jsx("div",{className:"absolute bottom-3 right-3 bg-black/50 backdrop-blur-sm px-2 py-1 rounded-full flex items-center gap-1",children:d.jsx(c2,{level:t.heatTolerance})})]}),d.jsxs("div",{className:"px-5 pt-4 pb-8",children:[d.jsxs("div",{className:"mb-3",children:[d.jsx("h2",{className:"font-display text-2xl font-bold text-gray-900 leading-tight",children:t.name}),d.jsxs("p",{className:"text-gray-500 text-sm font-semibold mt-0.5",children:[t.weightKg,"  ",t.lifespan,t.firstTimeFriendly&&d.jsx("span",{className:"ml-2 text-green-600 font-bold",children:" Great for first-timers "})]})]}),d.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:t.temperament.map(o=>d.jsx("span",{className:"bg-orange-50 border border-orange-200 text-[#FF6B35] px-3 py-1 rounded-full text-xs font-bold",children:o},o))}),d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4",children:[d.jsx("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-3",children:"Traits & Ratings"}),d.jsx(Ra,{icon:"",label:"Energy Level",level:t.energyLevel,colorClass:"bg-[#FF6B35]",labelLow:"Couch potato",labelHigh:"Marathon runner"}),d.jsx(Ra,{icon:"",label:"Trainability",level:t.trainability,colorClass:"bg-[#4CAF78]",labelLow:"Independent thinker",labelHigh:"Eager to please"}),d.jsx(Ra,{icon:"",label:"Grooming Needs",level:t.groomingNeeds,colorClass:"bg-blue-400",labelLow:"Wash & go",labelHigh:"Salon regular"}),d.jsx(Ra,{icon:"",label:"Heat Tolerance",level:t.heatTolerance,colorClass:"bg-amber-400",labelLow:"Needs A/C",labelHigh:"Loves the heat"})]}),d.jsxs("div",{className:"bg-[#FFF8F0] border border-orange-100 rounded-2xl p-4 mb-4",children:[d.jsx("p",{className:"text-xs font-extrabold text-gray-500 uppercase tracking-wider mb-3",children:" Singapore Suitability"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:t.suitabilityTags.map(o=>d.jsx("span",{className:"bg-white border border-orange-200 text-orange-700 px-3 py-1 rounded-full text-xs font-semibold",children:o},o))})]}),d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4",children:[d.jsx("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-3",children:" Ideal Owner"}),d.jsx("div",{className:"flex flex-wrap gap-2",children:t.idealOwner.map(o=>d.jsx("span",{className:"bg-white border border-gray-200 text-gray-700 px-3 py-1.5 rounded-full text-xs font-semibold",children:o},o))})]}),d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4",children:[d.jsx("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-2",children:" Health & Lifespan"}),d.jsxs("p",{className:"text-sm text-gray-700 font-semibold mb-3",children:["Average lifespan: ",t.lifespan]}),d.jsx("div",{className:"flex flex-wrap gap-2",children:t.healthIssues.map(o=>d.jsx("span",{className:"bg-amber-50 border border-amber-200 text-amber-700 px-2.5 py-0.5 rounded-full text-xs font-semibold",children:o},o))})]}),!t.hdbApproved&&t.notHdbReason&&d.jsxs("div",{className:"bg-red-50 border border-red-100 rounded-2xl p-4 mb-4",children:[d.jsx("p",{className:"text-sm font-bold text-red-700 mb-2",children:" Why Not HDB Approved"}),d.jsx("p",{className:"text-sm text-red-600 leading-relaxed",children:t.notHdbReason})]}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-2",children:["About ",t.name]}),d.jsx("p",{className:"text-sm text-gray-700 leading-relaxed",children:t.summary})]}),d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4 border border-gray-100",children:[d.jsxs("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-1",children:["Find a ",t.name," to adopt"]}),d.jsx("p",{className:"text-xs text-gray-400 mb-3",children:"Search Singapore shelters for available dogs"}),!t.hdbApproved&&d.jsx("p",{className:"text-xs text-amber-600 font-bold mb-2",children:" Remember: this breed requires private housing (condo or landed)"}),d.jsx("button",{onClick:s,className:"w-full py-3.5 rounded-xl font-bold text-sm bg-[#4CAF78] text-white shadow hover:bg-green-600 active:scale-95 transition-all duration-200",children:"Search Shelter Adoptions "})]}),d.jsx("button",{onClick:i,className:"w-full py-3.5 rounded-2xl font-bold text-sm border-2 border-gray-200 text-gray-500 hover:bg-gray-50 active:scale-95 transition-all duration-200",children:"Close"})]})]})})}const d2=[{key:"hdbOnly",label:"HDB Approved",type:"toggle"},{key:"firstTimeFriendly",label:"First-timer OK",type:"toggle"},{key:"heatTolerant",label:"Heat Tolerant",type:"toggle"},{key:"energyLevel",label:"Low Energy",type:"value",value:"low"},{key:"energyLevel",label:"High Energy",type:"value",value:"high"},{key:"groomingNeeds",label:"Low Grooming",type:"value",value:"low"},{key:"groomingNeeds",label:"High Grooming",type:"value",value:"high"},{key:"trainability",label:"Highly Trainable",type:"value",value:"high"}],wy={hdbOnly:!1,energyLevel:null,groomingNeeds:null,trainability:null,firstTimeFriendly:!1,heatTolerant:!1},f2=[1,2],p2=[3],m2=[4,5],Rc={low:f2,medium:p2,high:m2};function g2({level:t,color:e}){return d.jsx("div",{className:"flex gap-0.5",children:[1,2,3,4,5].map(n=>d.jsx("div",{className:`w-3.5 h-1.5 rounded-full ${n<=t?e:"bg-gray-200"}`},n))})}function Ty({breed:t,onTap:e}){return d.jsxs("button",{onClick:e,className:"bg-white rounded-2xl shadow-sm border border-gray-100 overflow-hidden text-left active:scale-95 transition-all duration-200 hover:shadow-md",children:[d.jsxs("div",{className:"relative",style:{height:110},children:[d.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover",onError:n=>{n.target.onerror=null,n.target.src=`https://placedog.net/400/400?id=${t.id.length*17}`}}),d.jsx("div",{className:`absolute top-2 right-2 px-2 py-0.5 rounded-full text-[9px] font-extrabold ${t.hdbApproved?"bg-green-500 text-white":"bg-gray-500 text-white"}`,children:t.hdbApproved?"HDB ":"Private"}),t.firstTimeFriendly&&d.jsx("div",{className:"absolute top-2 left-2 bg-blue-500 text-white px-2 py-0.5 rounded-full text-[9px] font-extrabold",children:"Beginner "})]}),d.jsxs("div",{className:"px-3 py-2.5",children:[d.jsx("p",{className:"font-display font-bold text-gray-900 text-sm leading-tight truncate mb-1.5",children:t.name}),d.jsx("div",{className:"mb-1",children:d.jsx(g2,{level:t.energyLevel,color:"bg-[#FF6B35]"})}),d.jsxs("p",{className:"text-[10px] text-gray-400 font-semibold truncate",children:[t.temperament[0],"  ",t.temperament[1]]})]})]})}function y2({breed:t,onTap:e}){return d.jsx("button",{onClick:e,className:"w-full rounded-2xl overflow-hidden text-left active:scale-[0.98] transition-all duration-200 shadow-md",children:d.jsxs("div",{className:"bg-gradient-to-r from-[#2d7a4f] to-[#4CAF78] flex",style:{minHeight:120},children:[d.jsx("div",{className:"w-28 flex-shrink-0",style:{height:130},children:d.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover",onError:n=>{n.target.onerror=null,n.target.src="https://placedog.net/400/400?id=200"}})}),d.jsxs("div",{className:"flex-1 p-4 flex flex-col justify-between",children:[d.jsxs("div",{children:[d.jsx("div",{className:"inline-block bg-white/20 text-white text-[9px] font-extrabold uppercase tracking-widest px-2 py-0.5 rounded-full mb-2",children:"Singapore's Own"}),d.jsx("h3",{className:"font-display text-lg font-bold text-white leading-tight",children:t.name}),d.jsx("p",{className:"text-white/70 text-xs font-semibold",children:"Mixed breed  Street-rescued"})]}),d.jsxs("div",{className:"flex flex-wrap gap-1.5 mt-2",children:[t.temperament.slice(0,3).map(n=>d.jsx("span",{className:"bg-white/20 text-white text-[9px] font-bold px-2 py-0.5 rounded-full",children:n},n)),d.jsx("span",{className:"bg-gray-600/50 text-white/80 text-[9px] font-bold px-2 py-0.5 rounded-full",children:"Not HDB"})]})]}),d.jsx("div",{className:"flex items-center pr-4",children:d.jsx("span",{className:"text-white/60 text-xl",children:""})})]})})}function xy({title:t,count:e,countColor:n}){const r={green:"bg-green-100 text-green-700",gray:"bg-gray-100 text-gray-500",amber:"bg-amber-100 text-amber-700"};return d.jsxs("div",{className:"flex items-center justify-between mb-3",children:[d.jsx("h3",{className:"font-display text-base font-bold text-gray-900",children:t}),d.jsxs("span",{className:`text-xs font-bold px-2.5 py-1 rounded-full ${r[n]??r.gray}`,children:[e," breed",e!==1?"s":""]})]})}function v2({onClear:t}){return d.jsxs("div",{className:"flex flex-col items-center justify-center py-16 text-center",children:[d.jsx("span",{className:"text-5xl mb-4",children:""}),d.jsx("p",{className:"font-display font-bold text-gray-800 text-lg mb-1",children:"No breeds match"}),d.jsx("p",{className:"text-gray-400 text-sm mb-5",children:"Try adjusting your filters or search"}),d.jsx("button",{onClick:t,className:"px-6 py-2.5 rounded-2xl bg-[#FF6B35] text-white font-bold text-sm active:scale-95 transition-all",children:"Clear Filters"})]})}function _2(){const[t,e]=$.useState(wy),[n,r]=$.useState(""),[i,s]=$.useState(null),o=$.useMemo(()=>Object.entries(t).filter(([,b])=>b!==!1&&b!==null).length,[t]),l=b=>{b.type==="toggle"?e(P=>({...P,[b.key]:!P[b.key]})):e(P=>({...P,[b.key]:P[b.key]===b.value?null:b.value}))},u=b=>b.type==="toggle"?t[b.key]===!0:t[b.key]===b.value,h=()=>{e(wy),r("")},p=$.useMemo(()=>u2.filter(b=>{if(t.hdbOnly&&!b.hdbApproved||t.firstTimeFriendly&&!b.firstTimeFriendly||t.heatTolerant&&b.heatTolerance<4||t.energyLevel&&!Rc[t.energyLevel].includes(b.energyLevel)||t.groomingNeeds&&!Rc[t.groomingNeeds].includes(b.groomingNeeds)||t.trainability&&!Rc[t.trainability].includes(b.trainability))return!1;if(n.trim()){const P=n.toLowerCase();return b.name.toLowerCase().includes(P)||b.temperament.some(L=>L.toLowerCase().includes(P))||b.suitabilityTags.some(L=>L.toLowerCase().includes(P))}return!0}),[t,n]),m=p.filter(b=>b.category==="featured"),y=p.filter(b=>b.category==="hdb"),S=p.filter(b=>b.category==="non-hdb");return d.jsxs(d.Fragment,{children:[d.jsxs("div",{className:"flex-1 overflow-y-auto",children:[d.jsx("div",{className:"px-4 pt-1 pb-3",children:d.jsxs("div",{className:"relative",children:[d.jsx("span",{className:"absolute left-3.5 top-1/2 -translate-y-1/2 text-gray-400 text-sm",children:""}),d.jsx("input",{type:"text",value:n,onChange:b=>r(b.target.value),placeholder:"Search breeds or traits...",className:"w-full bg-gray-100 rounded-2xl pl-10 pr-10 py-3 text-sm font-semibold text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 focus:ring-[#FF6B35] transition"}),n&&d.jsx("button",{onClick:()=>r(""),className:"absolute right-3.5 top-1/2 -translate-y-1/2 text-gray-400 text-lg leading-none",children:""})]})}),d.jsx("div",{className:"px-4 pb-2",children:d.jsxs("div",{className:"flex gap-2 pb-1 overflow-x-auto",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:[d2.map((b,P)=>{const L=u(b);return d.jsx("button",{onClick:()=>l(b),style:{touchAction:"manipulation"},className:`flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold transition-all duration-200 ${L?"bg-[#FF6B35] text-white shadow-sm":"bg-gray-100 text-gray-500 hover:bg-gray-200"}`,children:b.label},`${b.key}-${b.value??"toggle"}-${P}`)}),o>0&&d.jsx("button",{onClick:h,style:{touchAction:"manipulation"},className:"flex-shrink-0 px-4 py-2 rounded-full text-xs font-bold bg-white border-2 border-gray-200 text-gray-500 hover:bg-gray-50 transition-all duration-200",children:"Clear all"})]})}),(o>0||n)&&d.jsx("div",{className:"px-4 mb-1",children:d.jsxs("p",{className:"text-xs text-gray-400 font-semibold",children:[p.length," breed",p.length!==1?"s":""," match",p.length===1?"es":""," your search"]})}),d.jsxs("div",{className:"px-4 pb-28",children:[m.length>0&&d.jsx("section",{className:"mb-6",children:d.jsx(y2,{breed:m[0],onTap:()=>s(m[0])})}),y.length>0&&d.jsxs("section",{className:"mb-6",children:[d.jsx(xy,{title:"HDB Approved Breeds",count:y.length,countColor:"green"}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:y.map(b=>d.jsx(Ty,{breed:b,onTap:()=>s(b)},b.id))})]}),S.length>0&&d.jsxs("section",{className:"mb-6",children:[d.jsx(xy,{title:"Private Housing Only",count:S.length,countColor:"gray"}),d.jsx("div",{className:"bg-orange-50 border border-orange-100 rounded-2xl p-3 mb-3",children:d.jsx("p",{className:"text-xs text-orange-700 font-semibold leading-snug",children:" These breeds require a condo or landed property. Tap any breed to see why they are not HDB-eligible."})}),d.jsx("div",{className:"grid grid-cols-2 gap-3",children:S.map(b=>d.jsx(Ty,{breed:b,onTap:()=>s(b)},b.id))})]}),p.length===0&&d.jsx(v2,{onClear:h})]})]}),i&&d.jsx(h2,{breed:i,onClose:()=>s(null)})]})}const Ey=["#FF6B35","#4CAF78","#FFD700","#FF69B4","#87CEEB","#9B59B6","#E74C3C","#2ECC71"];function w2({count:t=70}){const e=$.useMemo(()=>Array.from({length:t},(n,r)=>({id:r,left:Math.random()*100,delay:Math.random()*2.5,duration:2.5+Math.random()*2.5,color:Ey[Math.floor(Math.random()*Ey.length)],width:6+Math.random()*8,height:4+Math.random()*8,isCircle:Math.random()>.5,startRotation:Math.random()*360})),[t]);return d.jsx("div",{className:"fixed inset-0 pointer-events-none overflow-hidden",style:{zIndex:200},"aria-hidden":"true",children:e.map(n=>d.jsx("div",{className:"absolute animate-confetti-fall",style:{"--fall-duration":`${n.duration}s`,"--fall-delay":`${n.delay}s`,left:`${n.left}%`,top:-20,width:n.width,height:n.height,backgroundColor:n.color,borderRadius:n.isCircle?"50%":"2px",transform:`rotate(${n.startRotation}deg)`,willChange:"transform, opacity"}},n.id))})}function T2({animal:t,score:e,userProfile:n,onKeepSwiping:r,onViewMatches:i}){const[s,o]=$.useState(!1);$.useEffect(()=>{const m=setTimeout(()=>o(!0),50);return()=>clearTimeout(m)},[]);const{bullets:l,waitingNote:u}=t2(n,t),h=e>=80?"#4CAF78":e>=60?"#FF6B35":"#94a3b8",p=()=>{var m;(m=t.shelter)!=null&&m.url&&window.open(t.shelter.url,"_blank","noopener,noreferrer")};return d.jsxs(d.Fragment,{children:[d.jsx(w2,{}),d.jsx("div",{className:"fixed inset-0 bg-black/60 backdrop-blur-sm flex items-end justify-center",style:{zIndex:150},onClick:r,children:d.jsxs("div",{className:`w-full max-w-[430px] bg-white rounded-t-[32px] overflow-hidden transition-all duration-500 ${s?"translate-y-0 opacity-100":"translate-y-full opacity-0"}`,style:{maxHeight:"92vh",overflowY:"auto"},onClick:m=>m.stopPropagation(),children:[d.jsx("div",{className:"flex justify-center pt-3 pb-1",children:d.jsx("div",{className:"w-10 h-1 bg-gray-200 rounded-full"})}),d.jsxs("div",{className:"relative mx-5 mt-3 rounded-2xl overflow-hidden",style:{height:200},children:[d.jsx("img",{src:t.photo,alt:t.name,className:"w-full h-full object-cover"}),d.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/55 to-transparent"}),d.jsx("div",{className:"absolute bottom-3 left-4 right-4",children:d.jsxs("p",{className:"text-white text-xs font-bold opacity-90",children:[" ",t.daysInShelter," days in shelter"]})})]}),d.jsxs("div",{className:"px-6 pt-5 pb-8",children:[d.jsxs("div",{className:"text-center mb-5 animate-pop-in",children:[d.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 rounded-full border-4 mb-3 shadow-lg",style:{borderColor:h,backgroundColor:`${h}18`},children:d.jsxs("span",{className:"font-display text-2xl font-bold",style:{color:h},children:[e,"%"]})}),d.jsxs("h2",{className:"font-display text-2xl font-bold text-gray-900 leading-tight",children:["You and ",t.name]}),d.jsxs("h2",{className:"font-display text-2xl font-bold leading-tight",style:{color:h},children:["are a ",e,"% match!"]}),d.jsxs("p",{className:"text-gray-400 text-sm mt-1 font-semibold",children:[t.breed,"  ",t.age," ",t.age===1?"year":"years"," old"]})]}),d.jsxs("div",{className:"bg-[#FFF8F0] rounded-2xl p-4 mb-4 animate-slide-up-fade",children:[d.jsx("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-3",children:"Why you're compatible"}),d.jsx("ul",{className:"space-y-2.5",children:l.map((m,y)=>d.jsxs("li",{className:"flex items-start gap-2.5",children:[d.jsx("span",{className:"text-[#4CAF78] font-black text-lg leading-tight flex-shrink-0 mt-0.5",children:""}),d.jsx("span",{className:"text-gray-700 text-sm leading-snug font-semibold",children:m})]},y))}),u&&d.jsxs("div",{className:"mt-3 pt-3 border-t border-amber-200 flex items-start gap-2.5",children:[d.jsx("span",{className:"text-amber-500 text-lg leading-tight flex-shrink-0 mt-0.5",children:""}),d.jsx("span",{className:"text-amber-600 text-sm leading-snug font-bold",children:u})]})]}),d.jsx("div",{className:"flex items-center justify-center mb-4",children:d.jsx("span",{className:"bg-orange-50 border border-orange-200 text-[#FF6B35] px-4 py-1.5 rounded-full text-sm font-bold",children:t.personalityTag})}),t.shelter&&d.jsxs("div",{className:"bg-gray-50 rounded-2xl p-4 mb-4 border border-gray-100",children:[d.jsxs("p",{className:"text-xs font-extrabold text-gray-400 uppercase tracking-wider mb-3",children:["Ready to meet ",t.name,"?"]}),d.jsxs("button",{onClick:p,className:"w-full py-3.5 rounded-xl font-bold text-sm bg-[#4CAF78] text-white shadow hover:bg-green-600 active:scale-95 transition-all duration-200 mb-2.5",children:["Contact ",t.shelter.name," "]}),d.jsxs("p",{className:"text-xs text-gray-400 text-center leading-snug",children:[" ",t.shelter.address]}),t.daysInShelter>90&&d.jsxs("p",{className:"text-xs text-amber-600 font-bold text-center mt-2 leading-snug",children:[" ",t.name," has been waiting ",t.daysInShelter," days. Please reach out today."]})]}),d.jsxs("div",{className:"flex flex-col gap-3",children:[d.jsx("button",{onClick:r,className:"w-full py-4 rounded-2xl font-bold text-base bg-[#FF6B35] text-white shadow-lg hover:bg-orange-600 active:scale-95 transition-all duration-200",children:" Keep Swiping"}),d.jsx("button",{onClick:i,className:"w-full py-4 rounded-2xl font-bold text-base bg-white border-2 border-[#FF6B35] text-[#FF6B35] hover:bg-orange-50 active:scale-95 transition-all duration-200",children:" View All My Matches"})]})]})]})})]})}const by=[{id:1,name:"Shadow",species:"cat",breed:"Domestic Shorthair",age:7,photo:"https://placekittens.com/498/600",personalityTag:"The Strategist",mbtiType:"INTJ",energyLevel:2,hdbApproved:!0,bio:"Shadow watches everything from a distance before deciding you're worth his time. He's not cold  he's selective. Once you earn his trust, he's unwaveringly loyal. He's been overlooked for 4 months because people want instant affection. He offers something rarer: earned devotion.",daysInShelter:120,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Cat Welfare Society",url:"https://www.catwelfare.org",email:"contact@catwelfare.org",address:"Online network  no physical shelter"}},{id:2,name:"Pretzel",species:"dog",breed:"Dachshund Mix",age:5,photo:"https://placedog.net/500/600?id=2",personalityTag:"The Thinker",mbtiType:"INTP",energyLevel:3,hdbApproved:!0,bio:"Pretzel has figured out how to open the treat cabinet and reorganizes his toys by size every morning. He needs a human who finds that charming, not exhausting. He's happiest with a puzzle toy and a quiet afternoon. Whoever adopts him will never feel like they've fully figured him out  and that's the fun.",daysInShelter:85,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"SPCA Singapore",url:"https://spca.org.sg/services/adoption",email:"adoption@spca.org.sg",address:"50 Sungei Tengah Road, Singapore 699012"}},{id:3,name:"Ace",species:"dog",breed:"Singapore Special (Large)",age:4,photo:"https://placedog.net/500/600?id=3",personalityTag:"The Commander",mbtiType:"ENTJ",energyLevel:5,hdbApproved:!1,bio:"Ace is a Singapore Special  the mixed breed that defines our local streets. He's smart, loyal, and was picked up from Punggol. He needs space and a firm hand but will protect your family with everything he has.",daysInShelter:60,specialNeeds:!1,experienceLevelNeeded:"experienced",shelter:{name:"Save Our Street Dogs (SOSD)",url:"https://sosd.org.sg",email:"adoption@sosd.org.sg",address:"59 Sungei Tengah Road, #01-42, Singapore 699014"}},{id:4,name:"Mango",species:"dog",breed:"Mixed Terrier",age:3,photo:"https://placedog.net/500/600?id=4",personalityTag:"The Debater",mbtiType:"ENTP",energyLevel:4,hdbApproved:!1,bio:"Mango has escaped 4 enclosures, learned to ring a bell for attention, and once stole an entire sandwich in under 2 seconds. Life with Mango is never boring. He thrives on novelty, chaos, and someone who can match his energy intellectually. If you like a challenge, he's your dog.",daysInShelter:45,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Causes for Animals Singapore",url:"https://www.causesforanimals.com",email:"casingapore@gmail.com",address:"59 Sungei Tengah Road, Singapore 699014"}},{id:5,name:"Kopi",species:"dog",breed:"Singapore Special (Medium)",age:5,photo:"https://placedog.net/500/600?id=5",personalityTag:"The Advocate",mbtiType:"INFJ",energyLevel:2,hdbApproved:!1,bio:"Kopi was found near a kopitiam in Toa Payoh, scavenging quietly on her own. She's gentle and perceptive in that way only street dogs can be  she's learned to read people to survive. Give her safety and she'll give you everything.",daysInShelter:95,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Action for Singapore Dogs (ASD)",url:"https://asdsingapore.com",email:"adoption@asdsingapore.com",address:"59 Sungei Tengah Road, Singapore 699014"}},{id:6,name:"Willow",species:"dog",breed:"Beagle",age:8,photo:"https://placedog.net/500/600?id=6",personalityTag:"The Dreamer",mbtiType:"INFP",energyLevel:2,hdbApproved:!0,bio:"Willow was surrendered when her family moved abroad. She still waits by the door sometimes. She loves deeply and quietly  a walk at dusk, a blanket shared on the couch, someone who simply stays. She just needs someone who will choose her back.",daysInShelter:140,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Animal Lovers League (ALL)",url:"https://animalloversleague.com/",email:"info@animaloversleague.com",address:"59 Sungei Tengah Road, Block Q, #01-29, Singapore 699014"}},{id:7,name:"Biscuit",species:"dog",breed:"Golden Retriever Mix",age:2,photo:"https://placedog.net/500/600?id=7",personalityTag:"The Giver",mbtiType:"ENFJ",energyLevel:4,hdbApproved:!1,bio:"Biscuit greets every person, dog, and pigeon with the same level of enthusiasm. He genuinely believes everyone is his best friend  and honestly, he's probably right. He's passed every temperament test with flying colors. He was made for family life and has been waiting for one to call his own.",daysInShelter:30,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"SPCA Singapore",url:"https://spca.org.sg/services/adoption",email:"adoption@spca.org.sg",address:"50 Sungei Tengah Road, Singapore 699012"}},{id:8,name:"Milo",species:"dog",breed:"Singapore Special (Medium)",age:2,photo:"https://placedog.net/500/600?id=8",personalityTag:"The Champion",mbtiType:"ENFP",energyLevel:5,hdbApproved:!1,bio:"Milo was rescued from Pasir Ris and named after the drink because he gives you energy just being around him. He's loud, joyful, and convinced every day is the best day of his life. Needs space to run and a human who can keep up.",daysInShelter:55,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Save Our Street Dogs (SOSD)",url:"https://sosd.org.sg",email:"adoption@sosd.org.sg",address:"59 Sungei Tengah Road, #01-42, Singapore 699014"}},{id:9,name:"Uncle",species:"dog",breed:"Singapore Special (Senior)",age:10,photo:"https://placedog.net/500/600?id=9",personalityTag:"The Duty Fulfiller",mbtiType:"ISTJ",energyLevel:2,hdbApproved:!1,bio:"Uncle has been at the shelter longer than any staff member can remember. He was a kampung dog before the area was redeveloped. He's slow, steady, and asks for very little  just a cool spot to nap and someone who comes home to him.",daysInShelter:200,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Exclusively Mongrels",url:"https://www.exclusivelymongrels.org",email:"exclusivelymongrels@gmail.com",address:"Online foster network  no physical shelter"}},{id:10,name:"Daisy",species:"dog",breed:"Shih Tzu",age:10,photo:"https://placedog.net/500/600?id=10",personalityTag:"The Nurturer",mbtiType:"ISFJ",energyLevel:1,hdbApproved:!0,bio:"Daisy was her owner's companion for a decade until he passed away. She's a little lost right now  she still looks for him sometimes. She gives love quietly and completely. She doesn't need excitement. She just needs someone to be her person again.",daysInShelter:75,specialNeeds:!0,experienceLevelNeeded:"beginner",shelter:{name:"SPCA Singapore",url:"https://spca.org.sg/services/adoption",email:"adoption@spca.org.sg",address:"50 Sungei Tengah Road, Singapore 699012"}},{id:11,name:"Rex",species:"dog",breed:"German Shepherd",age:5,photo:"https://placedog.net/500/600?id=11",personalityTag:"The Supervisor",mbtiType:"ESTJ",energyLevel:4,hdbApproved:!1,bio:"Rex knows 12 commands, walks perfectly on leash, and stays calm in crowded public spaces. He was a family dog whose owners divorced and couldn't keep him. No fault of his own. He's structured, loyal, and ready to protect and love whoever gives him a stable home.",daysInShelter:50,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Oasis Second Chance Animal Shelter (OSCAS)",url:"https://www.oscas.sg",email:"oscas2010@gmail.com",address:"59 Sungei Tengah Road, Block R, #01-33, Singapore 699014"}},{id:12,name:"Honey",species:"dog",breed:"Cocker Spaniel",age:3,photo:"https://placedog.net/500/600?id=12",personalityTag:"The Caregiver",mbtiType:"ESFJ",energyLevel:3,hdbApproved:!0,bio:"Honey follows her foster mom from room to room, sits with whoever looks sad, and has never met a lap she didn't like. She's been flagged by three foster families as 'emotionally intuitive'  she just knows. She was made for family life and she knows it too.",daysInShelter:40,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Mutts & Mittens",url:"https://muttsandmittens.com.sg",email:"muttsandmittenssg@gmail.com",address:"59 Sungei Tengah Road, Blk B, #01-03/04, Singapore 699014"}},{id:13,name:"Kodak",species:"cat",breed:"Tabby",age:4,photo:"https://placekittens.com/500/600",personalityTag:"The Craftsman",mbtiType:"ISTP",energyLevel:2,hdbApproved:!0,bio:"Kodak does his own thing 90% of the time. The other 10%, he'll appear out of nowhere and sit directly on whatever you're working on. On his terms. Always. He's the perfect companion for someone who respects independence and finds quiet presence more comforting than constant affection.",daysInShelter:110,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Love Kuching Project",url:"https://www.lovekuchingproject.org",email:"Contact via @luvkuching on Instagram",address:"Foster-based network, Ubi area, Singapore"}},{id:15,name:"Char",species:"dog",breed:"Singapore Special (Terrier Mix)",age:3,photo:"https://placedog.net/500/600?id=15",personalityTag:"The Dynamo",mbtiType:"ESTP",energyLevel:5,hdbApproved:!1,bio:"Char was surrendered by a family that underestimated him. He's scrappy, affectionate, and fiercely loyal. He gets his name from the char kway teow stall he used to hang around before he was rescued in Geylang. One of the most returned and most loving dogs in the shelter.",daysInShelter:160,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"Noah's Ark CARES",url:"https://www.noahsarkcares.com",email:"Contact via website",address:"Yishun area, Singapore"}},{id:16,name:"Peanut",species:"dog",breed:"Chihuahua Mix",age:1,photo:"https://placedog.net/500/600?id=16",personalityTag:"The Entertainer",mbtiType:"ESFP",energyLevel:4,hdbApproved:!0,bio:"Peanut is 4.5 pounds of pure confidence. He dances for treats, argues with his reflection, and will absolutely steal the spotlight at any social gathering. He was overlooked at three adoption events because families wanted bigger dogs. Size is the only small thing about him.",daysInShelter:35,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Animal Lovers League (ALL)",url:"https://www.animaloversleague.com",email:"info@animaloversleague.com",address:"59 Sungei Tengah Road, Block Q, #01-29, Singapore 699014"}},{id:17,name:"Teh",species:"cat",breed:"Singapore Street Cat (Orange Tabby)",age:4,photo:"https://placekittens.com/501/600",personalityTag:"The Nurturer",mbtiType:"ISFJ",energyLevel:2,hdbApproved:!0,bio:"Teh was rescued from a Toa Payoh void deck, always the cat who groomed the younger strays. She's warm, consistent, and deeply comforting to be around. She will find the saddest person in the room and sit with them. Named after teh tarik  sweet, familiar, and always there when you need it.",daysInShelter:90,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Love Kuching Project",url:"https://www.lovekuchingproject.org",email:"Contact via @luvkuching on Instagram",address:"Foster-based network, Singapore"}},{id:18,name:"Gula",species:"cat",breed:"Singapore Street Cat (Calico)",age:2,photo:"https://placekittens.com/502/600",personalityTag:"The Entertainer",mbtiType:"ESFP",energyLevel:4,hdbApproved:!0,bio:"Gula was found in a Bedok market, performing acrobatics on the fish stall for scraps. She is loud, joyful, and has absolutely no concept of personal space. She will sit on your laptop, knock your drink over, and make you laugh every single time. Named after gula melaka  intensely sweet and impossible to ignore.",daysInShelter:25,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Cat Welfare Society",url:"https://www.catwelfare.org",email:"contact@catwelfare.org",address:"Online network  no physical shelter"}},{id:19,name:"Bubur",species:"cat",breed:"Singapore Street Cat (Grey)",age:8,photo:"https://placekittens.com/503/600",personalityTag:"The Advocate",mbtiType:"INFJ",energyLevel:2,hdbApproved:!0,bio:"Bubur was a void deck cat in Clementi for years, quietly watching over the neighbourhood. The auntie who fed him passed away and nobody came for him. He's gentle, perceptive, and bonds with exactly one person completely. Senior cats like Bubur are the least adopted. He has been waiting 8 months.",daysInShelter:240,specialNeeds:!1,experienceLevelNeeded:"intermediate",shelter:{name:"LUNI Singapore",url:"https://luni-singapore.com",email:"Contact via website",address:"Community-based, Singapore"}},{id:20,name:"Roti",species:"cat",breed:"Singapore Street Cat (Black and White)",age:3,photo:"https://placekittens.com/504/600",personalityTag:"The Champion",mbtiType:"ENFP",energyLevel:5,hdbApproved:!0,bio:"Roti was rescued from a bakery lane in Tiong Bahru where he used to greet every morning customer. He is relentlessly enthusiastic, affectionate to a fault, and has never met a stranger. He needs someone who matches his energy and doesn't mind a cat who follows them from room to room narrating everything.",daysInShelter:18,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"Love Kuching Project",url:"https://www.lovekuchingproject.org",email:"Contact via @luvkuching on Instagram",address:"Foster-based network, Singapore"}},{id:21,name:"Kueh",species:"cat",breed:"Singapore Street Cat (Tortoiseshell)",age:9,photo:"https://placekittens.com/505/600",personalityTag:"The Strategist",mbtiType:"INTJ",energyLevel:1,hdbApproved:!0,bio:"Kueh was found in an AMK kopitiam  the cat everyone fed but nobody owned. She is sharp, self-sufficient, and chooses her people with ruthless precision. She's been passed over repeatedly for younger cats. But the person who earns her trust will have a companion of extraordinary quiet loyalty. She's waited long enough.",daysInShelter:180,specialNeeds:!0,experienceLevelNeeded:"intermediate",shelter:{name:"Cat Welfare Society",url:"https://www.catwelfare.org",email:"contact@catwelfare.org",address:"Online network  no physical shelter"}},{id:22,name:"Kaya",species:"cat",breed:"Singapore Street Cat (White and Ginger)",age:5,photo:"https://placekittens.com/506/600",personalityTag:"The Dreamer",mbtiType:"INFP",energyLevel:2,hdbApproved:!0,bio:"Kaya was surrendered by a family who emigrated. She spent her first three weeks at the shelter hiding. Now she emerges every evening to sit quietly near whoever is in the room  close, but not demanding. She loves gently, on her own terms. She just needs someone patient enough to let her arrive in her own time.",daysInShelter:65,specialNeeds:!1,experienceLevelNeeded:"beginner",shelter:{name:"SPCA Singapore",url:"https://spca.org.sg/services/adoption",email:"adoption@spca.org.sg",address:"50 Sungei Tengah Road, Singapore 699012"}}];function Dc(t,e,n){try{const r=localStorage.getItem(`pawmatch_${t}_${e}`);return r?JSON.parse(r):n}catch{return n}}function si(t,e,n){try{localStorage.setItem(`pawmatch_${t}_${e}`,JSON.stringify(n))}catch{}}function x2(t){["profile","liked","passed"].forEach(e=>localStorage.removeItem(`pawmatch_${t}_${e}`))}async function E2(t){const e=await mA($o(Qo,"users",t));if(!e.exists())return{profile:null,likedAnimals:[],passedIds:[]};const n=e.data();return{profile:n.profile??null,likedAnimals:n.likedAnimals??[],passedIds:n.passedIds??[]}}async function b2(t,e){await wu($o(Qo,"users",t),{profile:e},{merge:!0})}async function S2(t,e){await wu($o(Qo,"users",t),{likedAnimals:e},{merge:!0})}async function I2(t,e){await wu($o(Qo,"users",t),{passedIds:e},{merge:!0})}async function k2(t){await wu($o(Qo,"users",t),{profile:hA(),likedAnimals:[],passedIds:[]},{merge:!0})}const A2=[{value:"all",label:"All",emoji:""},{value:"dog",label:"Dogs",emoji:""},{value:"cat",label:"Cats",emoji:""}];function C2(){var N;const{currentUser:t,authLoading:e}=bu(),[n,r]=$.useState("login"),[i,s]=$.useState(null),[o,l]=$.useState([]),[u,h]=$.useState([]),[p,m]=$.useState("discover"),[y,S]=$.useState(null),[b,P]=$.useState("all"),[L,E]=$.useState(!1);$.useEffect(()=>{if(!t){s(null),l([]),h([]),m("discover"),P("all");return}const _=t.uid;s(Dc(_,"profile",null)),l(Dc(_,"liked",[])),h(Dc(_,"passed",[])),E(!0),E2(_).then(({profile:ce,likedAnimals:tt,passedIds:kn})=>{s(ce),l(tt),h(kn),si(_,"profile",ce),si(_,"liked",tt),si(_,"passed",kn)}).catch(console.error).finally(()=>E(!1))},[t]),$.useEffect(()=>{if(!t||L)return;const _=t.uid;b2(_,i).catch(console.error),si(_,"profile",i)},[i]),$.useEffect(()=>{if(!t||L)return;const _=t.uid;S2(_,o).catch(console.error),si(_,"liked",o)},[o]),$.useEffect(()=>{if(!t||L)return;const _=t.uid;I2(_,u).catch(console.error),si(_,"passed",u)},[u]);const w=i?e2(by,i):by,A=new Set([...o.map(_=>_.id),...u]),R=w.filter(_=>!A.has(_.id)),F=(i==null?void 0:i.livingSpace)==="hdb"?R.filter(_=>_.hdbApproved):R,M=b==="all"?F:F.filter(_=>_.species===b),T=_=>{s(_),l([]),h([])},v=_=>{const ce=Xh(i,_);l(tt=>[...tt,{..._,score:ce}]),S({animal:_,score:ce})},x=_=>{h(ce=>[...ce,_.id])},I=async()=>{if(t)try{await k2(t.uid),x2(t.uid)}catch(_){console.error("Failed to clear Firestore data:",_)}s(null),l([]),h([]),S(null),m("discover"),P("all")},k=t!=null&&t.displayName?t.displayName[0].toUpperCase():((N=t==null?void 0:t.email)==null?void 0:N[0].toUpperCase())??"?";return e?d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-5xl animate-bounce inline-block",children:""}),d.jsx("p",{className:"text-[#FF6B35] font-bold mt-3 font-display text-lg",children:"PawMatch"})]})}):t?L?d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex items-center justify-center",children:d.jsxs("div",{className:"text-center",children:[d.jsx("span",{className:"text-5xl animate-bounce inline-block",children:""}),d.jsx("p",{className:"text-[#FF6B35] font-bold mt-3 font-display text-lg",children:"Loading your profile"})]})}):i?d.jsx("div",{className:"min-h-screen bg-[#FFF8F0] flex justify-center",children:d.jsxs("div",{className:"w-full max-w-[430px] min-h-screen flex flex-col bg-[#FFF8F0] relative",children:[d.jsxs("header",{className:"flex-shrink-0 bg-white/80 backdrop-blur border-b border-gray-100 px-5 py-3 flex items-center justify-between shadow-sm",children:[d.jsxs("div",{className:"flex items-center gap-2",children:[d.jsx("span",{className:"text-2xl",children:""}),d.jsx("h1",{className:"font-display text-xl font-bold text-[#FF6B35]",children:"PawMatch"})]}),d.jsxs("div",{className:"flex items-center gap-2",children:[p==="discover"&&M.length>0&&d.jsxs("span",{className:"text-xs font-bold text-gray-400 bg-gray-100 px-2.5 py-1 rounded-full",children:[M.length," waiting"]}),p==="matches"&&o.length>0&&d.jsxs("span",{className:"text-xs font-bold text-white bg-[#FF6B35] px-2.5 py-1 rounded-full",children:[o.length," "]}),d.jsx("div",{className:"w-8 h-8 rounded-full bg-[#FF6B35] flex items-center justify-center text-white text-xs font-black shadow-sm flex-shrink-0",children:k})]})]}),d.jsxs("div",{className:"flex-shrink-0 px-5 pt-3 pb-2",children:[p==="discover"&&d.jsxs("div",{children:[d.jsx("h2",{className:"font-display text-lg font-bold text-gray-900",children:"Find Your Match"}),d.jsxs("p",{className:"text-xs text-gray-400 font-semibold mb-3",children:["Sorted by compatibility  ",i.mbti," type"]}),d.jsx("div",{className:"flex gap-1.5 bg-gray-100 p-1 rounded-2xl",children:A2.map(_=>d.jsxs("button",{onClick:()=>P(_.value),className:`flex-1 flex items-center justify-center gap-1.5 py-2 rounded-xl text-sm font-bold transition-all duration-200 ${b===_.value?"bg-white text-[#FF6B35] shadow-sm":"text-gray-500 hover:text-gray-700"}`,children:[d.jsx("span",{children:_.emoji}),d.jsx("span",{children:_.label})]},_.value))})]}),p==="matches"&&d.jsxs("div",{children:[d.jsx("h2",{className:"font-display text-lg font-bold text-gray-900",children:"My Matches"}),d.jsx("p",{className:"text-xs text-gray-400 font-semibold",children:"Animals you've connected with"})]}),p==="profile"&&d.jsxs("div",{children:[d.jsx("h2",{className:"font-display text-lg font-bold text-gray-900",children:"My Profile"}),d.jsx("p",{className:"text-xs text-gray-400 font-semibold",children:t.displayName||t.email})]}),p==="guide"&&d.jsxs("div",{children:[d.jsx("h2",{className:"font-display text-lg font-bold text-gray-900",children:"Breed Guide"}),d.jsx("p",{className:"text-xs text-gray-400 font-semibold",children:"Singapore's dogs  HDB & beyond"})]})]}),d.jsxs("main",{className:"flex-1 overflow-hidden flex flex-col",children:[p==="discover"&&d.jsx(YN,{animals:M,onSwipeRight:v,onSwipeLeft:x},b),p==="matches"&&d.jsx(XN,{likedAnimals:o,onViewDiscover:()=>m("discover")}),p==="profile"&&d.jsx(a2,{userProfile:i,onRetakeQuiz:I}),p==="guide"&&d.jsx(_2,{})]}),d.jsx(l2,{activeTab:p,onTabChange:m}),y&&d.jsx(T2,{animal:y.animal,score:y.score,userProfile:i,onKeepSwiping:()=>S(null),onViewMatches:()=>{S(null),m("matches")}})]})}):d.jsx(WN,{onComplete:T}):n==="login"?d.jsx(UN,{onSwitchToSignup:()=>r("signup")}):d.jsx(HN,{onSwitchToLogin:()=>r("login")})}Lc.createRoot(document.getElementById("root")).render(d.jsx(YT.StrictMode,{children:d.jsx(MN,{children:d.jsx(C2,{})})}));
